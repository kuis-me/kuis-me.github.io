import{ce as u,h as f,u as l,D as c,n as r,cf as s}from"#entry";const h=u(async a=>{let t,i;if(a.path.match(/\.(png|jpg|jpeg|gif|svg|ico|css|js|webmanifest)$/i))return;const n=f(),o=l().$axiosAuth;if(!c("auth_token").value)return a.name!=="login"?r("/login"):void 0;try{let e=n.get("AUTH")||null;if(e||(e=([t,i]=s(()=>o.post("/authentication")),t=await t,i(),t).data,n.set("AUTH",e),[t,i]=s(()=>n.set("profil",{status:!0,data:e.profil})),await t,i()),!e.auth)return a.name!=="login"?r("/login"):void 0;if(!e.email_verified&&a.name!=="email-verify")return r("/email-verify")}catch{if(n.clear("profil"),a.name!=="login")return r("/login")}});export{h as default};
