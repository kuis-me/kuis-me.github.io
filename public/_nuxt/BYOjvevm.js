import{_ as at}from"./BFU05jqY.js";import{_ as lt}from"./U5lp1qOd.js";import{_ as st}from"./D_eN7wpH.js";import{_ as nt}from"./CwQB-XB4.js";import it from"./C3z-ywvo.js";import rt from"./D9wmH--q.js";import{f as dt,h as ut,i as pt,j as mt,r,u as ct,G as S,e as ft,M as vt,c as u,o as n,a as e,z as D,C as F,d as V,b as m,k as x,l as b,w as g,ak as O,F as w,q as C,t as _,A as bt,S as gt}from"#entry";import{d as _t}from"./DoL2xymK.js";/* empty css        */import"./DlAUqK2U.js";import"./C-MlBdbB.js";import"./CyOk-nPg.js";import"./CiWoB02X.js";import"./8bvVrqmo.js";import"./B3sYwAEL.js";import"./EGTR48JM.js";import"./DEyYGdNQ.js";import"./BJGrA6Jd.js";import"./CpUMhc7e.js";import"./jc0MLXVe.js";import"./BYFRBfKH.js";import"./CLs7nh7g.js";import"./BsL1qDrr.js";import"./CWLiJ0se.js";import"./Z8xctkZt.js";import"./B38jw_rB.js";import"./se1TuXrA.js";import"./fEXnvkqj.js";import"./BfI910sS.js";import"./BoVvw8Hm.js";import"./DPMQvY-A.js";import"./B4itNNXA.js";import"./ZhWAdK_X.js";import"./BVWaKjMr.js";import"./DOzupMSm.js";import"./pNQ8ID25.js";import"./CRFPveH9.js";import"./BdAeE4wo.js";import"./D29EZvgL.js";import"./DhHsBxdy.js";import"./CIk3Bab-.js";import"./B2f3LX6i.js";import"./CpAjJcKS.js";import"./LyQxZvra.js";import"./BW1qPPXF.js";import"./CPZCcta-.js";import"./CmIUM5n7.js";import"./GvVV1ICA.js";import"./Dk9qCNTH.js";import"./OzCEp4nL.js";const kt={class:"pb-5"},yt={class:"d-flex"},ht={class:"ms-auto"},xt={class:"table-responsive p-2 position-relative",style:{"min-height":"500px"}},wt=["innerHTML"],Ct={key:0},Mt={class:"d-flex flex-wrap gap-1"},Ut={class:"d-flex gap-2 overflow-auto"},St=["onClick"],Dt=["onClick"],Vt=["onClick"],Lt=["onClick"],Bt={class:"mt-3 d-flex flex-wrap align-items-center justify-content-between gap-2"},Tt={class:"col-auto"},jt={class:"col-auto"},Nt={key:0},Rt={class:"modal fade",id:"pdfModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},$t={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},At={class:"modal-content"},Ft={class:"modal-body position-relative bg-white m-0 p-0",style:{"min-height":"200px","background-color":"white"}},Ot={class:"modal fade",id:"uploadMateriModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Et={class:"modal-dialog modal-dialog-centered"},Ht={class:"modal-content"},It={class:"modal-body p-4 position-relative"},zt={key:0,class:"alert alert-success"},Gt={class:"d-flex flex-column gap-3"},Kt={class:"mb-1"},qt={class:"mb-1"},Jt={class:"mb-1"},Pt={class:"input-group position-relative"},Yt=["value","textContent"],Qt={class:"mt-1"},Wt={class:"d-flex flex-wrap gap-2"},Xt=["onClick"],Zt={class:"mb-1"},te={class:"mb-3"},ee={key:0},to=dt({__name:"index",emits:["jawab","data","item","update:modelValue"],setup(oe,{emit:E}){const M=_t(()=>{B()},300);ut(),pt(),mt(),r("");const i=r({nama:"",status:"aktif",kategori:[],nama_file:""}),k=r([]),H=r([]);r({}),r(5);const I=r(1),R=r(""),f=r({jenis:"pilihan_ganda",search:"",page:1,page_list:5,sort_by:"desc",sort_name:"id",kd_id:"",tingkat_kesulitan:""}),L=r({}),d=r({table:!1,upload:!1,kategori:!1}),y=r({upload:""}),{$axiosAuth:h}=ct(),$=E;S(H,o=>{M(),$("jawab",o)},{deep:!0});async function B(){d.value.table=!0;const o=new FormData;for(var t in f.value)o.append(t,f.value[t]);R.value="/materi/index";try{const s=(await h({method:"post",url:R.value,data:o})).data;k.value=s.data,$("data",s),d.value.table=!1}catch(l){console.error(l.response?.data||l.message),d.value.table=!1}}async function z(o){if((await gt.fire({title:"Apakah Anda yakin?",text:"Data ini tidak dapat dikembalikan setelah dihapus.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"})).isConfirmed){d.value.table=!0;const l=new FormData;l.append("id",o),l.append("_method","delete");try{const s=await h({method:"post",url:"/materi/delete",data:l});console.log(s.data),B(),d.value.table=!1}catch(s){console.error(s.response?.data||s.message),d.value.table=!1}}}function G(o){return typeof o!="string"?"":o.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())}function K(o){i.value.file=o.target.files[0]}async function q(){L.value={},d.value.upload=!0,y.value.upload="";const o=new FormData,t=i.value;for(var l in t)if(l=="kategori"){var s=t[l];o.append(l,JSON.stringify(s))}else o.append(l,t[l]);try{let v=await h({method:"post",url:"/materi/store",data:o});B(),t.id||(i.value={}),y.value.upload="upload berhasil",d.value.upload=!1,A.value.value=""}catch(v){console.error(v.response?.data||v.message),d.value.upload=!1,L.value=v.response?.data?.errors}}async function J(){y.value.upload="",i.value={nama:"",kategori:[]}}async function P(o){y.value.upload="",i.value={id:o.id,nama:o.nama,status:o.status,nama_file:o.nama_file};let t=o.kategori;i.value.kategori=t}const A=r(null),T=r({url_view:"",url_downoad:""});async function Y(o){const t=await h({method:"post",url:o,responseType:"blob"}),l=URL.createObjectURL(t.data);T.value.url_view=await l}async function Q(o){try{const t=await h({method:"post",url:o,responseType:"blob"}),l=t.headers["content-disposition"];let s="materi.pdf";l&&l.includes("filename=")&&(s=l.split("filename=")[1].replace(/"/g,""));const v=URL.createObjectURL(t.data),c=document.createElement("a");c.href=v,c.download=s,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(v)}catch(t){console.error(t.response?.data||t.message)}}const j=r([]);async function W(){d.value.kategori=!0;try{let o=await h({method:"post",url:"/other/group"});j.value=o?.data?.data?.kategori,d.value.kategori=!1}catch(o){console.error(o.response?.data||o.message),d.value.kategori=!1}}async function X(o){const t=o.target.value,l=j.value.find(s=>s?.id===t);l&&!i.value.kategori.some(s=>s?.id===l?.id)&&i.value.kategori.push(l),o.target.value=""}async function Z(o){const t=i.value.kategori.indexOf(o);t!==-1&&await i.value.kategori.splice(t,1)}const N=r(!1);return S(T,(o,t)=>{N.value=!1,setTimeout(()=>{N.value=!0},100)},{deep:!0}),r([]),S(f.value,(o,t)=>{M()},{deep:!0}),S(I,()=>{M()}),ft(()=>{M()}),vt(()=>{}),(o,t)=>{const l=rt,s=bt("font-awesome-icon"),v=it,c=at,tt=lt,et=st,ot=nt;return n(),u("div",kt,[t[25]||(t[25]=e("div",{class:"d-flex justify-content-between align-items-center mb-4"},[e("h2",{class:"fw-bold mb-0"},"Materi")],-1)),t[26]||(t[26]=e("hr",{class:"border border-2"},null,-1)),e("div",yt,[e("div",null,[D(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>f.value.cari=a),class:"form-control form-control-sm rounded-4",placeholder:"Cari"},null,512),[[F,f.value.cari]])]),e("div",ht,[e("button",{type:"button",class:"btn btn-primary shadow-sm","data-bs-toggle":"modal","data-bs-target":"#uploadMateriModal",onClick:t[1]||(t[1]=a=>J())},[...t[8]||(t[8]=[e("i",{class:"fa-solid fa-plus me-1"},null,-1),V(" Tambah ",-1)])])])]),e("div",xt,[m(v,{value:k.value.data,sortMode:"single",customSort:!0,onSort:o.handleSort,responsiveLayout:"stack",breakpoint:"960px",class:"table table-hover table-striped"},{empty:g(()=>[...t[9]||(t[9]=[e("div",{class:"text-center text-muted p-4"},"Belum ada data",-1)])]),default:g(()=>[m(l,{header:"Nama"},{body:g(({data:a})=>[e("span",{innerHTML:a.nama},null,8,wt)]),_:1}),m(l,{header:"Dapat dilihat oleh",style:{"min-width":"200px"}},{body:g(({data:a})=>[a.kategori?.length?b("",!0):(n(),u("span",Ct,"Semua")),e("div",Mt,[(n(!0),u(w,null,C(a.kategori,(p,U)=>(n(),u("div",{key:U,class:"px-2 py-1 rounded-4 border border-2 text-truncate"},_(p.text),1))),128))])]),_:1}),m(l,{header:"Status"},{body:g(({data:a})=>[V(_(G(a.status)),1)]),_:1}),m(l,{header:"Aksi"},{body:g(({data:a})=>[e("div",Ut,[e("button",{class:"btn btn-sm btn-outline-primary rounded-3","data-bs-toggle":"modal","data-bs-target":"#pdfModal",onClick:p=>Y(a.url_view)},[m(s,{icon:["fa","file-pdf"]}),t[10]||(t[10]=e("span",null,"Tampil",-1))],8,St),e("button",{class:"btn btn-sm btn-outline-success rounded-3",onClick:p=>Q(a.url_download)},[m(s,{icon:["fa","download"]}),t[11]||(t[11]=e("span",null,"Unduh",-1))],8,Dt),e("button",{class:"btn btn-sm btn-outline-success rounded-3",title:"Edit","data-bs-toggle":"modal","data-bs-target":"#uploadMateriModal",onClick:p=>P(a)},[m(s,{icon:["fa","pen"]}),t[12]||(t[12]=e("span",null,"Ganti",-1))],8,Vt),e("button",{class:"btn btn-sm btn-outline-danger rounded-3",title:"Hapus",onClick:p=>z(a?.id)},[m(s,{icon:["fa","circle-xmark"]}),t[13]||(t[13]=e("span",null,"Hapus",-1))],8,Lt)])]),_:1})]),_:1},8,["value","onSort"]),d.value.table?(n(),x(c,{key:0,class:"position-center"})):b("",!0)]),e("div",Bt,[e("div",Tt,[D(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>f.value.page_list=a),class:"form-select form-select-sm w-auto"},[...t[14]||(t[14]=[e("option",{value:"5"},"5",-1),e("option",{value:"10"},"10",-1),e("option",{value:"50"},"50",-1),e("option",{value:"100"},"100",-1)])],512),[[O,f.value.page_list]])]),e("div",jt,[k.value?.total>k.value?.per_page?(n(),u("div",Nt,[m(tt,{modelValue:f.value.page,"onUpdate:modelValue":t[3]||(t[3]=a=>f.value.page=a),"total-items":k.value.total||1,"items-per-page":k.value.per_page||1},null,8,["modelValue","total-items","items-per-page"])])):b("",!0)])]),e("div",Rt,[e("div",$t,[e("div",At,[e("div",Ft,[t[15]||(t[15]=e("button",{type:"button",class:"btn-close position-absolute top-0 end-0 m-3","data-bs-dismiss":"modal","aria-label":"Close",style:{"z-index":"1300"}},null,-1)),N.value?(n(),x(et,{key:0,data:T.value,style:{padding:"0px !important",margin:"0px !important"}},null,8,["data"])):(n(),x(c,{key:1,class:"position-center"}))])])])]),e("div",Ot,[e("div",Et,[e("div",Ht,[e("div",It,[t[24]||(t[24]=e("button",{type:"button",class:"btn-close position-absolute top-0 end-0","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),(n(!0),u(w,null,C(L.value,(a,p)=>(n(),u("div",{key:p},[(n(!0),u(w,null,C(a,(U,ae)=>(n(),u("div",{key:p,class:"alert alert-danger"},_(U),1))),128))]))),128)),y.value.upload?(n(),u("div",zt,_(y.value.upload),1)):b("",!0),e("div",Gt,[e("div",Kt,[t[16]||(t[16]=e("strong",null,[e("label",{class:"form-label"},"Nama")],-1)),D(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>i.value.nama=a),type:"text",class:"form-control",placeholder:""},null,512),[[F,i.value.nama]])]),e("div",qt,[t[19]||(t[19]=e("strong",null,[e("label",{class:"form-label"},"Dilihat oleh")],-1)),e("div",Jt,[e("div",Pt,[e("select",{class:"form-select",onChange:t[5]||(t[5]=a=>X(a)),onFocus:t[6]||(t[6]=a=>W())},[t[17]||(t[17]=e("option",{value:""},null,-1)),(n(!0),u(w,null,C(j.value,(a,p)=>(n(),u("option",{key:p,value:a.id,textContent:_(a.text)},null,8,Yt))),128))],32),m(ot,{class:"btn btn-light border border-1",to:{name:"home-setting"}},{default:g(()=>[...t[18]||(t[18]=[V("+ K ",-1)])]),_:1}),d.value.kategori?(n(),x(c,{key:0,class:"position-center"})):b("",!0)]),e("div",Qt,[e("div",Wt,[(n(!0),u(w,null,C(i.value.kategori,(a,p)=>(n(),u("span",{key:p,class:"border border-1 border-secondary rounded d-inline-flex align-items-center px-2 py-1",style:{"font-size":"0.875rem","line-height":"1"}},[V(_(a.text)+" ",1),e("button",{type:"button",class:"btn btn-sm btn-light ms-2 p-0 d-flex align-items-center justify-content-center",style:{width:"20px",height:"20px"},onClick:U=>Z(a)},[m(s,{icon:["fas","circle-xmark"],class:"text-secondary"})],8,Xt)]))),128))])])])]),e("div",Zt,[t[21]||(t[21]=e("strong",null,[e("label",{class:"form-label"},"Status")],-1)),D(e("select",{class:"form-control form-control-sm","onUpdate:modelValue":t[7]||(t[7]=a=>i.value.status=a)},[...t[20]||(t[20]=[e("option",{value:"aktif"},"Aktif",-1),e("option",{value:"non-aktif"},"Non-Aktif",-1)])],512),[[O,i.value.status]])]),e("div",te,[t[22]||(t[22]=e("label",{for:"formFile",class:"form-label"},"Upload File",-1)),i.value.nama_file?(n(),u("div",ee," 📄 "+_(i.value.nama_file),1)):b("",!0),e("input",{class:"form-control",type:"file",id:"formFile",ref_key:"fileInput",ref:A,accept:"application/pdf",onChange:K},null,544),t[23]||(t[23]=e("small",{class:"form-text text-muted d-flex justify-content-end"}," .pdf max.2MB ",-1))]),e("button",{onClick:q,class:"btn btn-primary w-100"},"Upload")]),d.value.upload?(n(),x(c,{key:1,class:"position-center"})):b("",!0)])])])])])}}});export{to as default};
