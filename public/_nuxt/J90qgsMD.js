import{_ as D}from"./BFU05jqY.js";import{_ as C}from"./BwT3rymJ.js";import{u as L}from"./CUA_6ykz.js";import{f as N,u as R,i as U,B,r as b,e as S,c as i,o as a,a as s,l as p,b as h,v as T,t as l,F as z,q as H,d as w,k as J,w as V}from"#entry";const A={class:"row justify-content-center mt-5"},F={class:"col-12 col-xl-8 p-3"},K={class:"card border border-secondary shadow-lg rounded-4 overflow-hidden"},P={class:"bg-purple-primary text-white p-4 d-flex justify-content-between align-items-center"},$=["src"],E={class:"text-end ms-4"},M={class:"text-center p-2 border rounded bg-light shadow-sm text-dark",style:{"min-width":"120px"}},O={class:"fw-bold text-success",style:{"font-size":"1.5rem"}},q={key:0,class:"card-body body-striped2"},G={key:1,class:"card-body body-striped2"},Q={key:2,class:"card-body body-striped2"},I={class:"row"},W={class:"col-12 col-md-5 body-striped2"},X={class:"p-3 border rounded shadow-sm bg-white mb-3"},Y={class:"list-group border rounded-3 overflow-hidden"},Z={class:"list-group-item"},ss={key:0,class:"fw-semibold mb-1"},ts={key:1,class:"fw-semibold mb-1"},es={class:"list-group-item"},ls={key:0,class:"list-group-item"},as={key:1,class:"list-group-item"},os={class:"list-group-item"},is={class:"p-3 border rounded shadow-sm bg-white"},ds={class:"list-group border rounded-3 overflow-hidden"},ns={class:"list-group-item"},rs={class:"fw-semibold mb-1"},us={class:"col body-striped2"},ms={class:"p-3 border rounded shadow-sm bg-white mb-3"},cs={class:"table table-sm table-hover table-bordered align-middle text-center mb-0"},bs={class:"p-3 border rounded shadow-sm bg-white"},ps={style:{height:"200px","overflow-x":"auto","font-size":"14px"}},vs={class:"table table-sm table-hover table-bordered align-middle text-center mb-0"},_s={class:"text-end mt-3"},fs={class:"d-flex flex-column flex-md-row gap-2 mt-3"},ks=N({__name:"hasil",setup(hs){L({title:"Hasil Kuis"});const{$axiosAuth:v}=R(),y=U(),_=B();_.public.baseLink,_.public.baseURL2;const g=y.params.id,f=b({}),u=b({}),e=b({}),d=b({mulai:!1,unduh:!1});async function x(){d.value.mulai=!0;const m=new FormData;m.append("unggahan_id",g);try{let n=(await v({method:"post",url:"/unggahan/kuis/answer/nilai",data:m})).data;if(f.value=n,!n?.status){d.value.mulai=!1;return}let r=n.data,c=r?.jawab,o=r?.kuis;u.value=o,e.value=c,d.value.mulai=!1}catch(t){console.error(t.response?.data||t.message),d.value.mulai=!1}}async function k(m){d.value.unduh=!0;try{const t=await v({method:"post",url:"pdf/soal?id="+m,responseType:"blob"}),n=t.headers["content-disposition"];let r="hasil-"+m+".pdf";n&&n.includes("filename=")&&(r=n.split("filename=")[1].replace(/"/g,""));const c=URL.createObjectURL(t.data),o=document.createElement("a");o.href=c,o.download=r,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(c),d.value.unduh=!1}catch(t){console.error(t.response?.data||t.message),d.value.unduh=!1}}return S(async()=>{await x()}),(m,t)=>{const n=T("font-awesome-icon"),r=D,c=C;return a(),i("div",null,[s("div",A,[s("div",F,[s("div",K,[s("div",P,[e.value.swafoto_show_formated?(a(),i("img",{key:0,src:e.value.swafoto_show_formated,class:"rounded-circle border shadow-sm",style:{width:"100px",height:"100px","object-fit":"cover"}},null,8,$)):p("",!0),t[2]||(t[2]=s("div",{class:"d-flex align-items-center gap-3"},[s("i",{class:"bi bi-lightning-fill display-5"}),s("div",null,[s("h3",{class:"mb-1 fw-bold"},"Hasil Kuis")])],-1)),s("div",E,[s("div",M,[h(n,{icon:["far","circle-check"],class:"text-success mb-1",style:{"font-size":"1.8rem"}}),s("div",O,l(e.value.nilai),1),t[1]||(t[1]=s("div",{class:"text-muted small"},"Total Nilai",-1))])])]),d.value.mulai?(a(),i("div",q,[...t[3]||(t[3]=[s("div",{class:"text-center py-5"},[s("div",{class:"spinner-border text-primary",role:"status"}),s("p",{class:"mt-3 text-muted"},"Sedang memuat data kuis...")],-1)])])):f.value.status?(a(),i("div",Q,[s("div",I,[s("div",W,[s("div",X,[t[9]||(t[9]=s("h5",{class:"mb-3 text-primary fw-bold"},"Pelaksanaan",-1)),s("ul",Y,[s("li",Z,[u.value.mode==="statis"?(a(),i("div",ss,"🕛 Dimulai: ")):(a(),i("div",ts,"🕛 Dimulai antara:")),s("div",null,l(e.value.mulai_formated),1)]),s("li",es,[t[5]||(t[5]=s("div",{class:"fw-semibold mb-1"},"⏱️ Durasi:",-1)),s("div",null,l(e.value.durasi)+" Menit ",1)]),u.value.mode==="statis"?(a(),i("li",ls,[t[6]||(t[6]=s("div",{class:"fw-semibold mb-1"},"⏱️ Selesai:",-1)),s("div",null,l(e.value.selesai_formated),1)])):p("",!0),u.value.waktu_selesai_realisasi?(a(),i("li",as,[t[7]||(t[7]=s("div",{class:"fw-semibold mb-1"},"⏱️ Selesai realisasi:",-1)),s("div",null,l(e.value.selesai_realisasi_formated??e.value.selesai_formated),1)])):p("",!0),s("li",os,[t[8]||(t[8]=s("div",{class:"fw-semibold mb-1"},"📘 Pelajaran:",-1)),s("div",null,l(u.value.mata_pelajaran),1)])])]),s("div",is,[t[10]||(t[10]=s("h5",{class:"mb-3 text-primary fw-bold"},"Catatan",-1)),s("ul",ds,[s("li",ns,[s("div",rs,l(u.value?.catatan),1)])])])]),s("div",us,[s("div",ms,[t[15]||(t[15]=s("h5",{class:"mb-3 text-primary fw-bold"},"Rekap Hasil",-1)),s("table",cs,[t[14]||(t[14]=s("thead",{class:"table-light"},[s("tr",null,[s("th",{scope:"col"},"Jenis"),s("th",{scope:"col"},"Jumlah"),s("th",{scope:"col"},"Terjawab"),s("th",{scope:"col"},"Skor")])],-1)),s("tbody",null,[s("tr",null,[t[11]||(t[11]=s("td",null,"Pilihan Ganda",-1)),s("td",null,l(e.value.pg_count),1),s("td",null,l(e.value.jwb_pg_count),1),s("td",null,l(e.value.pg_hasil),1)]),s("tr",null,[t[12]||(t[12]=s("td",null,"Uraian",-1)),s("td",null,l(e.value.uraian_count),1),s("td",null,l(e.value.jwb_uraian_count),1),s("td",null,l(e.value.uraian_hasil),1)])]),s("tfoot",null,[s("tr",null,[t[13]||(t[13]=s("td",{colspan:"3"},"Total Skor",-1)),s("td",null,l(e.value.skor),1)])])]),t[16]||(t[16]=s("div",{class:"text-end mt-3"},null,-1))]),s("div",bs,[t[17]||(t[17]=s("h5",{class:"mb-3 text-primary fw-bold"},"Aktivitas",-1)),s("div",ps,[s("table",vs,[s("tbody",null,[(a(!0),i(z,null,H(e.value.aktifitas,(o,j)=>(a(),i("tr",{key:j},[s("td",null,l(o.waktu),1),s("td",null,l(o.aksi),1)]))),128))])])])]),s("div",_s,[s("div",fs,[s("button",{type:"button",onClick:t[0]||(t[0]=o=>k(e.value.id)),target:"_blank",rel:"noopener noreferrer",class:"btn btn-primary text-white position-relative"},[t[18]||(t[18]=w(" Unduh Lembar Jawab ",-1)),d.value.unduh?(a(),J(r,{key:0,class:"position-center",message:"",style:{"z-index":"1200"}})):p("",!0)]),h(c,{to:{name:"home"},class:"btn btn-secondary text-white"},{default:V(()=>[...t[19]||(t[19]=[w(" Kembali ke Beranda ",-1)])]),_:1})])])])])])):(a(),i("div",G,[...t[4]||(t[4]=[s("div",{class:"text-center py-5"},[s("p",{class:"mt-3 text-muted"},"Tidak ada nilai yang ditampilkan")],-1)])]))])])])])}}});export{ks as default};
