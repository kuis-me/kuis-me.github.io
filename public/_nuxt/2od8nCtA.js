import{_ as j}from"./BFU05jqY.js";import{f as b,r as p,s as k,h as M,i as V,u as q,e as B,c as r,o as s,a as o,b as g,v as I,F as N,q as $,x as z,y as L,k as O,l as T,z as w,t as l,m as E,A as K}from"#entry";import{d as P}from"./DoL2xymK.js";const R={class:"modal-css"},U={class:"modal-dialog-chat-css"},G={class:"modal-body-chat-css position-relative"},H={ref:"chatContainer",class:"modal-body p-3 position-relative border",style:{"min-height":"400px","max-height":"400px","overflow-y":"auto"}},J={key:0,class:"d-flex"},Q={class:"d-flex p-2 rounded border border-primary text-secondary shadow-sm position-relative",style:{"max-width":"75%","align-items":"center"}},W=["src"],X={style:{"word-break":"break-word"}},Y={key:1,class:"d-flex justify-content-end"},Z={class:"d-flex p-2 rounded border border-danger text-secondary shadow-sm position-relative",style:{"max-width":"75%","align-items":"center"}},ee={style:{"word-break":"break-word"}},te=["src"],ae={class:"input-group mt-1"},oe=b({__name:"Surat",props:{data:{type:Object,required:!1,default:()=>({})}},emits:["modal_close"],setup(_,{emit:S}){const d=_,i=p({...d.data});k(()=>d.data,n=>{i.value={...n}},{deep:!0});const m=M(),h=V(),{$axiosAuth:f}=q(),v=p([]);async function x(){let n=y();const t=new FormData;t.append("acak",n),t.append("profil_id",i.value.profil_id??h.query.id);try{let c=(await f({method:"post",url:"/surat/index",data:t})).data;v.value=c.data,console.log(c)}catch(a){console.error(a.response?.data||a.message)}}async function C(){let n=y();const t=new FormData;t.append("acak",n),t.append("profil_id",i.value.profil_id??h.query.id),t.append("text",i.value.text);try{let c=(await f({method:"post",url:"/surat/store",data:t})).data;console.log(c),x()}catch(a){console.error(a.response?.data||a.message)}}function y(n=30){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let a="";for(let c=0;c<n;c++){const e=Math.floor(Math.random()*t.length);a+=t[e]}return a}const u=p({}),D=P(async()=>{u.value=await m.get("profil")?.data},300);k(()=>E(m.get("profil")),(n,t)=>{u.value=n?.data},{deep:!0}),B(()=>{x(),D()});function A(){i.value.show=!0}return(n,t)=>{const a=I("FontAwesomeIcon"),c=j;return s(),r("div",null,[o("div",R,[o("div",U,[o("div",G,[o("button",{class:"btn right-top",onClick:A},[g(a,{icon:["fa","circle-xmark"],class:"fa-2x"})]),o("div",H,[(s(!0),r(N,null,$(v.value,(e,F)=>(s(),r("div",{key:F,class:"mb-2"},[e.profil_id==u.value.id?(s(),r("div",J,[o("div",Q,[e.image_show?(s(),r("img",{key:0,src:e.image_show,class:"avatar-30 me-2 flex-shrink-0"},null,8,W)):(s(),r("div",{key:1,style:w({backgroundColor:e.color}),class:"avatar-30 me-2 flex-shrink-0 d-flex justify-content-center align-items-center text-white"},l(e.nama_inisial),5)),o("span",X,l(e.text),1),e.loading?(s(),O(c,{key:2,message:"",class:"position-center"})):T("",!0)])])):(s(),r("div",Y,[o("div",Z,[o("span",ee,l(e.text),1),e.image_show?(s(),r("img",{key:0,src:e.image_show,class:"avatar-30 ms-2 flex-shrink-0"},null,8,te)):(s(),r("div",{key:1,style:w({backgroundColor:e.color}),class:"avatar-30 ms-2 flex-shrink-0 d-flex justify-content-center align-items-center text-white"},l(e.nama_inisial),5))])]))]))),128))],512),o("div",ae,[z(o("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.value.text=e),class:"form-control",placeholder:"Tulis pesan...",rows:"2"},null,512),[[L,i.value.text]]),o("button",{class:"btn btn-primary",type:"button",onClick:C}," Kirim ")])])])])])}}}),se=Object.assign(oe,{__name:"Surat"}),ne={class:"p-4"},le=b({__name:"test",setup(_){return K(),(S,d)=>{const i=se;return s(),r("div",ne,[g(i)])}}});export{le as default};
