import{_ as L}from"./CwQB-XB4.js";import{_ as R}from"./QraDVNg7.js";import{f as K,i as M,h as U,j as q,u as E,r as p,G,e as P,c as d,o as i,a,l as m,k,H as T,t as r,d as w,b as c,w as F,I as y,A as J,m as O,z as Q,C as X,F as h,q as Y}from"#entry";import{_ as b}from"./DmRUS9VP.js";import{u as Z}from"./CUA_6ykz.js";import{_ as C}from"./BFU05jqY.js";import{_ as aa}from"./DlAUqK2U.js";const ta={key:0},sa={class:"list-group-item position-relative mb-3"},ea={class:"card shadow-sm"},na={class:"card-body position-relative"},oa={class:"d-flex justify-content-between align-items-start"},la={class:"row align-items-start"},ia={class:"col-auto"},ra=["src"],da={class:"col"},ua={class:"small-custom text-start"},ca={class:"small-custom text-start"},pa={class:"mb-2"},ma={class:"small-custom text-end d-none d-md-block"},va={class:"mapel-kuis"},_a={class:"small-custom d-md-none d-block"},ga={class:"text-center mapel-kuis"},fa={class:"text-center"},ka={class:"row"},ha={class:"col-sm-12 p-2"},xa={class:"notebook position-relative"},wa={class:"d-flex justify-content-between align-items-center mt-3"},ya={class:"d-flex gap-3 flex-wrap text-secondary position-relative"},ba={class:"ms-1"},Ca={class:"ms-1"},Da={class:"ms-1"},$a={key:0,class:"position-absolute top-0 end-0 m-4"},ja={class:"dropdown"},Ba={role:"button","data-bs-toggle":"dropdown"},Sa={key:0,class:"dropdown-menu"},Fa={class:"card comments-card border-0 shadow-sm"},Ia={class:"card-body"},Na={class:"mb-3"},Ta={class:"position-relative"},Va={class:"upload-footer d-flex justify-content-between align-items-center mt-2"},Wa={class:"d-flex gap-2"},Aa=["disabled"],Ha={class:"comments-list position-relative"},za={class:"d-flex"},La={class:"flex-shrink-0 me-3"},Ra=["onClick"],Ka=["src"],Ma={class:"flex-grow-1"},Ua={class:"d-flex justify-content-between align-items-start mb-1"},qa={class:"fw-bold mb-0"},Ea={class:"text-muted"},Ga={class:"dropdown"},Pa={class:"btn btn-link text-muted p-0",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Ja={class:"dropdown-menu dropdown-menu-end"},Oa=["onClick"],Qa={class:"mb-0"},Xa={key:1,class:"list-group-item mb-3"},Ya={class:"card shadow-sm"},Za={class:"card-body position-relative",style:{"min-height":"150px"}},at=K({__name:"[id]",setup(tt){const D=M();Z({title:"Unggahan - "+D.params.user});const V=U();q();const{$axiosAuth:x}=E(),$=p({}),I=D.params.id,j=D.params.user,s=p({profil:{}}),N=p([]),v=p({}),_=p({}),u=p({tanggapan:!0,tanggapan_input:!1});async function B(){u.value.tanggapan=!0;const o=new FormData;o.append("unggahan_id",I),o.append("username",j);try{const l=(await x({method:"post",url:"/unggahan/show",data:o})).data;s.value=l.data,N.value=l.tanggapan,u.value.tanggapan=!1}catch(t){console.error(t.response?.data||t.message),u.value.tanggapan=!1}}async function W(){u.value.tanggapan_input=!0;const o=new FormData;o.append("unggahan_id",I),o.append("username",j);const t=v.value;for(var l in t)o.append(l,t[l]);try{const n=await x({method:"post",url:"/unggahan/tanggapan/store",data:o});$.value=n.data.data,v.value.text="",B(),u.value.tanggapan_input=!1}catch(n){console.error(n.response?.data||n.message),u.value.tanggapan_input=!1}}async function A(o){const t=new FormData;t.append("tanggapan_id",o);try{const l=await x({method:"delete",url:"/unggahan/tanggapan/"+o+"/destroy",data:t});$.value=l.data,console.log($.value),B()}catch(l){console.error(l.response?.data||l.message)}}async function S(o,t,l){let n=s.value;n.loading=!0;const f=new FormData;f.append("unggahan_id",t),f.append("reaksi",l);try{const e=await x({method:"post",url:"/unggahan/reaksi/store",data:f});_.value=e.data,n.tidak_suka_count=_.value.tidak_suka,n.suka_count=_.value.suka,n.reaksi_ku=_.value.reaksi,n.mark=_.value.mark,n.loading=!1,l=="mark"&&V.set("tanda",_.value.mark)}catch(e){console.error(e.response?.data||e.message),n.loading=!1}}const g=p({max_text:200,remaining_text:200});return G(()=>v.value.text,o=>{const t=g.value.max_text||200,l=o?.length||0,n=t-l;l>t&&(v.value.text=o.slice(0,t)),g.value.remaining_text=n>=0?n:0}),P(()=>{B()}),(o,t)=>{const l=L,n=J("font-awesome-icon"),f=R;return i(),d("div",null,[s.value?.profil?.nama_lengkap?(i(),d("div",ta,[a("div",sa,[a("div",ea,[a("div",na,[u.value.tanggapan?(i(),k(C,{key:0,class:"position-center"})):m("",!0),a("div",null,[a("div",oa,[a("div",la,[a("div",ia,[s.value.profil.image_show?(i(),d("img",{key:0,src:s.value.profil.image_show,class:"profil-img avatar-50",onClick:t[0]||(t[0]=e=>o.redirect(s.value.profil.username))},null,8,ra)):(i(),d("div",{key:1,style:T({backgroundColor:s.value.profil.color}),class:"avatar-50 profile-img",onClick:t[1]||(t[1]=e=>o.redirect(s.value.profil.username))},r(s.value.profil.nama_inisial),5))]),a("div",da,[a("div",{class:"fw-bold cursor-pointer",onClick:t[2]||(t[2]=e=>o.redirect(s.value.profil.username))},r(s.value.profil.nama_lengkap),1),a("div",ua," ID: "+r(s.value.id_ref),1),a("div",ca,r(s.value.created_at_for_humans),1)]),t[9]||(t[9]=a("div",{class:"text-muted small"},null,-1))]),t[10]||(t[10]=a("div",{class:"col-sm-6 text-muted small",style:{"margin-top":"-10px","padding-top":"-10px !important"}},null,-1))]),t[19]||(t[19]=a("hr",{class:"my-2"},null,-1)),a("div",pa,[a("div",ma,[a("span",va,r(s.value.kuis?.mata_pelajaran),1),w(" ⏰ "+r(s.value.waktu_mulai)+" WIB – "+r(s.value.waktu_selesai)+" WIB ",1)]),a("div",_a,[a("div",ga,r(s.value.kuis?.mata_pelajaran),1),a("div",fa," ⏰ "+r(s.value.waktu_mulai)+" WIB – "+r(s.value.waktu_selesai)+" WIB ",1)]),a("div",ka,[a("div",ha,[a("div",xa,[a("div",null,r(s.value.text||""),1)])])])]),a("div",wa,[a("div",null,[a("div",null,[c(l,{to:{name:"kuis-persiapan",params:{user:s.value.profil.username,id:s.value.id}},class:"btn-outline-custom",style:{gap:"0.5rem"}},{default:F(()=>[s.value?.status_kuis=="tutup"?(i(),d(h,{key:0},[t[11]||(t[11]=a("img",{src:b,width:"20",height:"20"},null,-1)),t[12]||(t[12]=a("span",null," Tutup",-1))],64)):s.value?.status_kuis=="berlangsung"?(i(),d(h,{key:1},[t[13]||(t[13]=a("img",{src:b,width:"20",height:"20"},null,-1)),t[14]||(t[14]=a("span",null," Berlangsung",-1))],64)):s.value?.status_kuis=="dijawab"?(i(),d(h,{key:2},[t[15]||(t[15]=a("img",{src:b,width:"20",height:"20"},null,-1)),t[16]||(t[16]=a("span",null,"Telah Dijawab",-1))],64)):(i(),d(h,{key:3},[t[17]||(t[17]=a("img",{src:b,width:"20",height:"20"},null,-1)),t[18]||(t[18]=a("span",null," Belum dimulai",-1))],64))]),_:1},8,["to"])])]),a("div",ya,[a("button",{class:"btn p-0 text-secondary",onClick:t[3]||(t[3]=e=>S(null,s.value.id,"suka")),title:"Suka"},[c(n,{icon:["fas","heart"],class:y({"text-danger":s.value.reaksi_ku==="suka"})},null,8,["class"]),a("span",ba,r(s.value.suka_count),1)]),a("button",{class:"btn p-0 text-secondary",onClick:t[4]||(t[4]=e=>S(null,s.value.id,"tidak suka")),title:"Tidak Suka"},[c(n,{icon:["fas","heart-crack"],class:y({"text-danger":s.value.reaksi_ku==="tidak suka"})},null,8,["class"]),a("span",Ca,r(s.value.tidak_suka_count),1)]),a("button",{class:"btn p-0 text-secondary",onClick:t[5]||(t[5]=e=>S(null,s.value.id,"mark")),title:"Favorit"},[c(n,{icon:["fas","bookmark"],class:y({"text-danger":s.value.mark})},null,8,["class"])]),c(l,{to:{name:"tanggapan",params:{user:s.value.profil.username,id:s.value.id}},class:"text-secondary text-decoration-none small",title:"Komentar"},{default:F(()=>[c(n,{icon:["fas","comments"]}),a("span",Da,r(s.value.tanggapan_all_count??0),1)]),_:1},8,["to"]),s.value.loading?(i(),k(f,{key:0,class:"position-center"})):m("",!0)])])])]),O(j)?m("",!0):(i(),d("div",$a,[a("div",ja,[a("a",Ba,[c(n,{icon:["fas","ellipsis-vertical"],class:"text-secondary"})]),s.value.miliku?(i(),d("ul",Sa,[a("li",null,[c(l,{to:{name:"kuis-laporan",params:{id:s.value.id}},class:"dropdown-item"},{default:F(()=>[...t[20]||(t[20]=[w(" Laporan",-1)])]),_:1},8,["to"])]),a("li",null,[a("a",{href:"#",class:"dropdown-item text-danger",onClick:t[6]||(t[6]=e=>o.unggahanDelete(s.value.id))},"Hapus")])])):m("",!0)])]))])]),a("div",Fa,[a("div",Ia,[a("div",Na,[a("div",Ta,[Q(a("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>v.value.text=e),class:"upload-textarea",rows:"3",placeholder:"Apa tanggapan anda?"},null,512),[[X,v.value.text]]),u.value.tanggapan_input?(i(),k(C,{key:0,class:"spinner-overlay"})):m("",!0)]),a("div",Va,[a("small",{class:y(["char-counter",{warning:g.value.remaining_text<20}])},r(g.value.max_text-g.value.remaining_text)+"/"+r(g.value.max_text),3),a("div",Wa,[a("button",{type:"button",class:"upload-btn btn-send",disabled:u.value.tanggapan_input,onClick:t[8]||(t[8]=e=>W())},[c(n,{icon:["fas","plus"],class:"me-1"}),t[21]||(t[21]=w(" Kirim ",-1))],8,Aa)])])]),a("div",Ha,[(i(!0),d(h,null,Y(N.value,(e,H)=>(i(),d("div",{key:H,class:"comment-item mb-3"},[a("div",za,[a("div",La,[a("div",{class:"profile-picture-container cursor-pointer",onClick:z=>o.redirect(e.profil.username)},[e.profil.image_show?(i(),d("img",{key:0,src:e.profil.image_show,class:"rounded-circle object-fit-cover",width:"40",height:"40",alt:"Profile picture"},null,8,Ka)):(i(),d("div",{key:1,class:"rounded-circle d-flex align-items-center justify-content-center",style:T({backgroundColor:e.profil.color,width:"40px",height:"40px",color:"white",fontWeight:"bold"})},r(e.profil.nama_inisial),5))],8,Ra)]),a("div",Ma,[a("div",Ua,[a("div",null,[a("h6",qa,r(e.profil.nama_lengkap),1),a("small",Ea,r(e.created_at_for_humans),1)]),a("div",Ga,[a("button",Pa,[c(n,{icon:["fas","fa-ellipsis-v"]})]),a("ul",Ja,[a("li",null,[a("button",{class:"dropdown-item text-danger",onClick:z=>A(e.id)},[...t[22]||(t[22]=[a("i",{class:"fas fa-trash me-2"},null,-1),w("Hapus ",-1)])],8,Oa)])])])]),a("p",Qa,r(e.text||""),1)])])]))),128)),u.value.tanggapan?(i(),k(C,{key:0,class:"position-center"})):m("",!0)])])])])):(i(),d("div",Xa,[a("div",Ya,[a("div",Za,[u.value.tanggapan?(i(),k(C,{key:0,class:"position-center"})):m("",!0),t[23]||(t[23]=a("div",{class:"position-center"}," Tidak ada data atau sedang diarsipkan ",-1))])])]))])}}}),dt=aa(at,[["__scopeId","data-v-d34af1dd"]]);export{dt as default};
