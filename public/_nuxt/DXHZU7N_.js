import{g as Y}from"#entry";function tt(v,f){for(var C=0;C<f.length;C++){const y=f[C];if(typeof y!="string"&&!Array.isArray(y)){for(const h in y)if(h!=="default"&&!(h in v)){const d=Object.getOwnPropertyDescriptor(y,h);d&&Object.defineProperty(v,h,d.get?d:{enumerable:!0,get:()=>y[h]})}}}return Object.freeze(Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}))}var E={exports:{}},k;function et(){return k||(k=1,(function(v){window.mathquill4quill=function(f){f=f||{};const C=f.Quill||window.Quill,y=f.MathQuill||window.MathQuill,h=f.katex||window.katex,d=f.localStorage||window.localStorage;function j(u,o){try{d.setItem(u,o)}catch{}}function B(u){try{return d.getItem(u)}catch{return""}}function D(u){try{d.removeItem(u)}catch{}}function z(u,o){o.parentNode.insertBefore(u,o.nextSibling)}function K(u){return/^\\[A-Za-z]+$/.test(u)}function P(u,o){o=o||{};function M(){return C?y?h?u.options.modules.formula?MutationObserver?!0:(console.log("MutationObserver not defined"),!1):(console.log("Formula module not enabled"),!1):(console.log("katex.js not loaded"),!1):(console.log("MathQuill.js not loaded"),!1):(console.log("Quill.js not loaded"),!1)}function J(e){try{return JSON.parse(d.getItem(e))||[]}catch{return[]}}function R(e){const t=B(e);if(t&&t.length>0){const c=q.indexOf(t);c!=-1&&q.splice(c,1),q.unshift(t),q.length>_&&q.pop();try{d.setItem(S,JSON.stringify(q))}catch{}}}function $(e,t){e.splice(t,1);try{d.setItem(S,JSON.stringify(e))}catch{}}function w(){return u.container.getElementsByClassName("ql-tooltip")[0]}function Z(){return w().getElementsByClassName("ql-action")[0]}function Q(){return w().getElementsByTagName("input")[0]}function G(){const e=o.autofocus==null?!0:o.autofocus,t=o.mathQuillConfig!=null?o.mathQuillConfig:{},c=o.cacheKey||"__mathquill4quill_cache__";let a=null,g=null,s=null;function p(i){i.setAttribute("class","mathquill4quill-mathquill-input")}function n(i){i.setAttribute("class","mathquill4quill-latex-input")}function r(i,b){const A=t.handlers==null?{}:t.handlers;t.handlers={...A,edit(){const O=m.latex();i.value=O,j(c,O)},enter(){b.click()}};const m=y.getInterface(2).MathField(a,t),x=B(c);return x&&m.latex(x),b.addEventListener("click",()=>{R(c),D(c)}),m}function l(i){e&&window.setTimeout(()=>i.focus(),1)}return{render(){if(a!=null)return;const i=Q(),b=Z();return a=document.createElement("span"),p(a),s=i.className,n(i),g=r(i,b),l(g),z(a,i),g},destroy(){if(a==null)return;Q().setAttribute("class",s),a.remove(),a=null}}}function U(){const e=o.operators||[];let t=null;function c(s){s.setAttribute("class","mathquill4quill-operator-button")}function a(s){s.setAttribute("class","mathquill4quill-operator-container")}function g(s,p){const n=s[0],r=s[1],l=document.createElement("button");return l.setAttribute("type","button"),l.setAttribute("data-value",r),h.render(n,l,{throwOnError:!1}),l.onclick=()=>{K(r)?p.cmd(r):p.write(r),p.focus()},l}return{render(s){if(t!=null||e.length===0)return;const p=w();t=document.createElement("div"),a(t),e.forEach(n=>{const r=g(n,s);c(r),t.appendChild(r)}),p.appendChild(t)},destroy(){t!=null&&(t.remove(),t=null)}}}function V(){const e=q||[];let t=null;function c(n){n.setAttribute("class","mathquill4quill-history-button")}function a(n){n.setAttribute("class","mathquill4quill-history-inner-container")}function g(n){n.setAttribute("class","mathquill4quill-history-delete-button"),n.setAttribute("title","Delete"),n.setAttribute("role","button")}function s(n,r){let l="mathquill4quill-history-container";r&&(l+=" mathquill4quill-history-container-with-delete-button"),n.setAttribute("class",l)}function p(n,r){const l=document.createElement("button");return l.setAttribute("type","button"),h.render(n,l,{throwOnError:!1}),l.onclick=()=>{r.write(n),r.focus()},l}return{render(n){if(W(),t!=null||!X||e.length===0)return;const r=w();t=document.createElement("div");let l=document.createElement("div");s(l,H);let i=document.createElement("p");i.innerHTML="Past formulas (max "+_+")",t.appendChild(i),e.forEach(b=>{const A=p(b,n);if(c(A),H){const m=document.createElement("div");a(m);const x=document.createElement("div");g(x),x.addEventListener("click",()=>{m.remove();const O=e.indexOf(b);$(e,O)}),m.appendChild(A),m.appendChild(x),l.appendChild(m)}else l.appendChild(A)}),t.appendChild(l),r.appendChild(t)},destroy(){t!=null&&(t.remove(),t=null)}}}function W(){const e=w();e.getBoundingClientRect().top-u.container.getBoundingClientRect().top<0&&(e.style.top="0px")}if(!M())return;const I=w(),S=o.historyCacheKey||"__mathquill4quill_historylist_cache__";let q=J(S);const _=o.historySize||10,X=o.displayHistory||!1,H=o.displayDeleteButtonOnHistory||!1,L=G(),F=U(),T=V();new MutationObserver(()=>{if(!I.classList.contains("ql-hidden")&&I.attributes["data-mode"]&&I.attributes["data-mode"].value==="formula"){const t=L.render();F.render(t),T.render(t)}else L.destroy(),F.destroy(),T.destroy()}).observe(I,{attributes:!0,attributeFilter:["class","data-mode"]})}return P},v.exports&&(v.exports=window.mathquill4quill),window.Quill&&(window.Quill.prototype.enableMathQuillFormulaAuthoring=function(f){window.mathquill4quill()(this,f)})})(E)),E.exports}var N=et();const nt=Y(N),rt=tt({__proto__:null,default:nt},[N]);export{rt as m};
