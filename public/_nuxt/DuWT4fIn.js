import{_ as D}from"./BFU05jqY.js";import{_ as $}from"./DBDT5h3r.js";import{f as F,h as S,i as A,j as B,u as j,r as k,s as v,e as I,c as d,o as l,k as _,l as g,a as r,F as R,q as G,b as M,I as q,d as z,v as E,t as y}from"#entry";import{d as H}from"./DoL2xymK.js";const K={class:"p-3 position-relative"},L={key:1},O={class:"list-group list-group-flush"},P=["onClick"],T={key:2,class:"card card-body position-relative",style:{"min-height":"100px"}},U={key:3,class:"m-2 float-end"},J=F({__name:"GetNotifikasi",props:["modelValue"],emits:["update:modelValue"],setup(b,{emit:x}){const u=H(()=>{m()},300),c=S();A(),B();const h=b,N=x,{$axiosAuth:f}=j(),a=k({notifikasi:!1}),i=k({}),p=k({page:1});async function m(t){a.value.notifikasi=!0;const e=new FormData;for(let o in p.value)e.append(o,p.value[o]);let n="";t=="unread"?n="/notifikasi/unread":n="/notifikasi";try{let o=await f({method:"post",url:n});i.value=o?.data,a.value.notifikasi=!1}catch(o){console.error(o?.response?.data||o.message),a.value.notifikasi=!1}}async function V(t){a.value.notifikasi=!0;const e=new FormData;e.append("id",t);try{let n=await f({method:"post",url:"/notifikasi/mark-as-read",data:e});u(),a.value.notifikasi=!1}catch(n){console.error(n?.response?.data||n.message),a.value.notifikasi=!1}}async function w(){a.value.notifikasi=!0;try{let t=await f({method:"post",url:"/notifikasi/delete"});u(),a.value.notifikasi=!1}catch(t){console.error(t?.response?.data||t.message),a.value.notifikasi=!1}}return v(p.value,async(t,e)=>{u()},{deep:!0}),v(()=>h.refresh,t=>{t&&(u(),N("update:modelValue",!1))}),v(()=>c.get("refresh-page"),(t,e)=>{t!=e&&u()}),I(async()=>{c.get("Notifikasi"),u(),c.set("Notifikasi",!0)}),(t,e)=>{const n=D,o=E("FontAwesomeIcon"),C=$;return l(),d("div",K,[a.value.notifikasi?(l(),_(n,{key:0,class:"position-center"})):g("",!0),e[5]||(e[5]=r("div",{class:"judul"},"Notifikasi",-1)),r("div",null,[r("button",{type:"button",class:"btn-outline-custom-xs m-1",onClick:e[0]||(e[0]=s=>m("all"))},"Semua"),r("button",{type:"button",class:"btn-outline-custom-xs m-1",onClick:e[1]||(e[1]=s=>m("unread"))},"Belum dibaca"),r("button",{type:"button",class:"btn-outline-custom-xs m-1",onClick:e[2]||(e[2]=s=>w())},"Hapus Semua")]),i.value?.data?.length?(l(),d("div",L,[r("ul",O,[(l(!0),d(R,null,G(i.value?.data,(s,Q)=>(l(),d("li",{class:q([s.read_at?"bg-light":"","list-group-item position-relative"]),key:"index"},[r("a",{href:"#",onClick:W=>V(s.id)},[s.read_at?(l(),_(o,{key:0,icon:["far","envelope-open"]})):(l(),_(o,{key:1,icon:["fas","envelope"]})),z(" "+y(s.data.title)+" "+y(s.data.body),1)],8,P)],2))),128))])])):(l(),d("div",T,[...e[4]||(e[4]=[r("div",{class:"position-center text-center"}," Kosong ",-1)])])),i.value?.total>i.value?.per_page?(l(),d("div",U,[M(C,{modelValue:p.value.page,"onUpdate:modelValue":e[3]||(e[3]=s=>p.value.page=s),"total-items":i.value.total?i.value.total:1,"items-per-page":i.value.per_page?i.value.per_page:1},null,8,["modelValue","total-items","items-per-page"])])):g("",!0)])}}}),te=Object.assign(J,{__name:"GetNotifikasi"});export{te as _};
