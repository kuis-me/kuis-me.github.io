import{_ as Xa}from"./CptwQQoJ.js";import{_ as Ya}from"./BwT3rymJ.js";import{_ as xa}from"./BFU05jqY.js";import{_ as Qa}from"./QraDVNg7.js";import{_ as Za}from"./DBDT5h3r.js";import ka from"./kmlYAAaf.js";import wa from"./ZiLk4lra.js";import{bA as Q,bB as q,bC as ae,bD as ee,bE as Ca,bF as C,bG as te,bH as oe,bI as ne,bJ as se,bK as Ma,bL as re,bM as ie,f as Da,s as ca,bN as le,bO as de,bP as ue,bQ as ce,u as Sa,i as $a,r as D,e as Pa,c as $,o as x,a as i,b as _,t as M,k as N,l as T,m as oa,bR as pe,w as k,T as fe,h as ve,j as me,a8 as _e,J as he,x as H,y as ma,d as U,v as be,I as _a,aj as ye,F as la,q as ge,K as xe,z as ha,S as da}from"#entry";import{_ as ke}from"./DlAUqK2U.js";import we from"./W3EY5j9d.js";import Ce from"./DS2vF2GC.js";import{u as Me}from"./CUA_6ykz.js";import{s as De}from"./BzLCLO6P.js";import{d as ba}from"./DoL2xymK.js";/* empty css        */import"./DZc5BzD_.js";import"./BWvFuTba.js";import"./C_eBRcTf.js";import"./DmzSdYQA.js";import"./DXgNeqGS.js";import"./ecGWoZ4Q.js";import"./BHWX8u6U.js";import"./B7LfFs11.js";import"./jc0MLXVe.js";import"./B1L61x1n.js";import"./CLs7nh7g.js";import"./DRsPoi7a.js";import"./Db4K0la1.js";import"./DWlM1jn-.js";import"./q5qRWjfX.js";import"./D44Yf3QM.js";import"./fs6baYA6.js";import"./CWybxcEt.js";import"./Bug4FVMO.js";import"./BTRELKMG.js";import"./CAzzG9wP.js";import"./ZhWAdK_X.js";import"./kCNMqWzW.js";import"./TrWR14PH.js";import"./BRlVjEi6.js";import"./BJ_RKzcj.js";import"./0BfNHR4B.js";import"./TFTh-Rt9.js";import"./Bfhb82ua.js";import"./BbPWr3wD.js";import"./kvmXFRvq.js";import"./GZ7RvKSW.js";import"./Dv2PrIyq.js";import"./Cvm_7BmW.js";import"./DY0j9i7W.js";import"./tK1yKuoH.js";import"./UGo1Dn0E.js";import"./Bkx-VIdb.js";import"./M5H1MJdm.js";/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var ya=(function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var a=window.screen;if(a)return(a.deviceXDPI||1)/(a.logicalXDPI||1)}return 1})(),X={toTextLines:function(a){var o=[],e;for(a=[].concat(a);a.length;)e=a.pop(),typeof e=="string"?o.unshift.apply(o,e.split(`
`)):Array.isArray(e)?a.push.apply(a,e):q(a)||o.unshift(""+e);return o},textSize:function(a,o,e){var t=[].concat(o),n=t.length,s=a.font,r=0,d;for(a.font=e.string,d=0;d<n;++d)r=Math.max(a.measureText(t[d]).width,r);return a.font=s,{height:n*e.lineHeight,width:r}},bound:function(a,o,e){return Math.max(a,Math.min(o,e))},arrayDiff:function(a,o){var e=a.slice(),t=[],n,s,r,d;for(n=0,r=o.length;n<r;++n)d=o[n],s=e.indexOf(d),s===-1?t.push([d,1]):e.splice(s,1);for(n=0,r=e.length;n<r;++n)t.push([e[n],-1]);return t},rasterize:function(a){return Math.round(a*ya)/ya}};function ua(a,o){var e=o.x,t=o.y;if(e===null)return{x:0,y:-1};if(t===null)return{x:1,y:0};var n=a.x-e,s=a.y-t,r=Math.sqrt(n*n+s*s);return{x:r?n/r:0,y:r?s/r:-1}}function Se(a,o,e,t,n){switch(n){case"center":e=t=0;break;case"bottom":e=0,t=1;break;case"right":e=1,t=0;break;case"left":e=-1,t=0;break;case"top":e=0,t=-1;break;case"start":e=-e,t=-t;break;case"end":break;default:n*=Math.PI/180,e=Math.cos(n),t=Math.sin(n);break}return{x:a,y:o,vx:e,vy:t}}var $e=0,ja=1,Ba=2,Aa=4,Ta=8;function Z(a,o,e){var t=$e;return a<e.left?t|=ja:a>e.right&&(t|=Ba),o<e.top?t|=Ta:o>e.bottom&&(t|=Aa),t}function Pe(a,o){for(var e=a.x0,t=a.y0,n=a.x1,s=a.y1,r=Z(e,t,o),d=Z(n,s,o),u,f,c;!(!(r|d)||r&d);)u=r||d,u&Ta?(f=e+(n-e)*(o.top-t)/(s-t),c=o.top):u&Aa?(f=e+(n-e)*(o.bottom-t)/(s-t),c=o.bottom):u&Ba?(c=t+(s-t)*(o.right-e)/(n-e),f=o.right):u&ja&&(c=t+(s-t)*(o.left-e)/(n-e),f=o.left),u===r?(e=f,t=c,r=Z(e,t,o)):(n=f,s=c,d=Z(n,s,o));return{x0:e,x1:n,y0:t,y1:s}}function aa(a,o){var e=o.anchor,t=a,n,s;return o.clamp&&(t=Pe(t,o.area)),e==="start"?(n=t.x0,s=t.y0):e==="end"?(n=t.x1,s=t.y1):(n=(t.x0+t.x1)/2,s=(t.y0+t.y1)/2),Se(n,s,a.vx,a.vy,o.align)}var ea={arc:function(a,o){var e=(a.startAngle+a.endAngle)/2,t=Math.cos(e),n=Math.sin(e),s=a.innerRadius,r=a.outerRadius;return aa({x0:a.x+t*s,y0:a.y+n*s,x1:a.x+t*r,y1:a.y+n*r,vx:t,vy:n},o)},point:function(a,o){var e=ua(a,o.origin),t=e.x*a.options.radius,n=e.y*a.options.radius;return aa({x0:a.x-t,y0:a.y-n,x1:a.x+t,y1:a.y+n,vx:e.x,vy:e.y},o)},bar:function(a,o){var e=ua(a,o.origin),t=a.x,n=a.y,s=0,r=0;return a.horizontal?(t=Math.min(a.x,a.base),s=Math.abs(a.base-a.x)):(n=Math.min(a.y,a.base),r=Math.abs(a.base-a.y)),aa({x0:t,y0:n+r,x1:t+s,y1:n,vx:e.x,vy:e.y},o)},fallback:function(a,o){var e=ua(a,o.origin);return aa({x0:a.x,y0:a.y,x1:a.x+(a.width||0),y1:a.y+(a.height||0),vx:e.x,vy:e.y},o)}},z=X.rasterize;function je(a){var o=a.borderWidth||0,e=a.padding,t=a.size.height,n=a.size.width,s=-n/2,r=-t/2;return{frame:{x:s-e.left-o,y:r-e.top-o,w:n+e.width+o*2,h:t+e.height+o*2},text:{x:s,y:r,w:n,h:t}}}function Be(a,o){var e=o.chart.getDatasetMeta(o.datasetIndex).vScale;if(!e)return null;if(e.xCenter!==void 0&&e.yCenter!==void 0)return{x:e.xCenter,y:e.yCenter};var t=e.getBasePixel();return a.horizontal?{x:t,y:null}:{x:null,y:t}}function Ae(a){return a instanceof Ma?ea.arc:a instanceof re?ea.point:a instanceof ie?ea.bar:ea.fallback}function Te(a,o,e,t,n,s){var r=Math.PI/2;if(s){var d=Math.min(s,n/2,t/2),u=o+d,f=e+d,c=o+t-d,v=e+n-d;a.moveTo(o,f),u<c&&f<v?(a.arc(u,f,d,-Math.PI,-r),a.arc(c,f,d,-r,0),a.arc(c,v,d,0,r),a.arc(u,v,d,r,Math.PI)):u<c?(a.moveTo(u,e),a.arc(c,f,d,-r,r),a.arc(u,f,d,r,Math.PI+r)):f<v?(a.arc(u,f,d,-Math.PI,0),a.arc(u,v,d,0,Math.PI)):a.arc(u,f,d,-Math.PI,Math.PI),a.closePath(),a.moveTo(o,e)}else a.rect(o,e,t,n)}function Ie(a,o,e){var t=e.backgroundColor,n=e.borderColor,s=e.borderWidth;!t&&(!n||!s)||(a.beginPath(),Te(a,z(o.x)+s/2,z(o.y)+s/2,z(o.w)-s,z(o.h)-s,e.borderRadius),a.closePath(),t&&(a.fillStyle=t,a.fill()),n&&s&&(a.strokeStyle=n,a.lineWidth=s,a.lineJoin="miter",a.stroke()))}function Re(a,o,e){var t=e.lineHeight,n=a.w,s=a.x,r=a.y+t/2;return o==="center"?s+=n/2:(o==="end"||o==="right")&&(s+=n),{h:t,w:n,x:s,y:r}}function Ee(a,o,e){var t=a.shadowBlur,n=e.stroked,s=z(e.x),r=z(e.y),d=z(e.w);n&&a.strokeText(o,s,r,d),e.filled&&(t&&n&&(a.shadowBlur=0),a.fillText(o,s,r,d),t&&n&&(a.shadowBlur=t))}function Ne(a,o,e,t){var n=t.textAlign,s=t.color,r=!!s,d=t.font,u=o.length,f=t.textStrokeColor,c=t.textStrokeWidth,v=f&&c,g;if(!(!u||!r&&!v))for(e=Re(e,n,d),a.font=d.string,a.textAlign=n,a.textBaseline="middle",a.shadowBlur=t.textShadowBlur,a.shadowColor=t.textShadowColor,r&&(a.fillStyle=s),v&&(a.lineJoin="round",a.lineWidth=c,a.strokeStyle=f),g=0,u=o.length;g<u;++g)Ee(a,o[g],{stroked:v,filled:r,w:e.w,x:e.x,y:e.y+e.h*g})}var Ia=function(a,o,e,t){var n=this;n._config=a,n._index=t,n._model=null,n._rects=null,n._ctx=o,n._el=e};Q(Ia.prototype,{_modelize:function(a,o,e,t){var n=this,s=n._index,r=oe(C([e.font,{}],t,s)),d=C([e.color,ne.color],t,s);return{align:C([e.align,"center"],t,s),anchor:C([e.anchor,"center"],t,s),area:t.chart.chartArea,backgroundColor:C([e.backgroundColor,null],t,s),borderColor:C([e.borderColor,null],t,s),borderRadius:C([e.borderRadius,0],t,s),borderWidth:C([e.borderWidth,0],t,s),clamp:C([e.clamp,!1],t,s),clip:C([e.clip,!1],t,s),color:d,display:a,font:r,lines:o,offset:C([e.offset,4],t,s),opacity:C([e.opacity,1],t,s),origin:Be(n._el,t),padding:se(C([e.padding,4],t,s)),positioner:Ae(n._el),rotation:C([e.rotation,0],t,s)*(Math.PI/180),size:X.textSize(n._ctx,o,r),textAlign:C([e.textAlign,"start"],t,s),textShadowBlur:C([e.textShadowBlur,0],t,s),textShadowColor:C([e.textShadowColor,d],t,s),textStrokeColor:C([e.textStrokeColor,d],t,s),textStrokeWidth:C([e.textStrokeWidth,0],t,s)}},update:function(a){var o=this,e=null,t=null,n=o._index,s=o._config,r,d,u,f=C([s.display,!0],a,n);f&&(r=a.dataset.data[n],d=te(Ca(s.formatter,[r,a]),r),u=q(d)?[]:X.toTextLines(d),u.length&&(e=o._modelize(f,u,s,a),t=je(e))),o._model=e,o._rects=t},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(a,o){var e=this,t=a.ctx,n=e._model,s=e._rects,r;this.visible()&&(t.save(),n.clip&&(r=n.area,t.beginPath(),t.rect(r.left,r.top,r.right-r.left,r.bottom-r.top),t.clip()),t.globalAlpha=X.bound(0,n.opacity,1),t.translate(z(o.x),z(o.y)),t.rotate(n.rotation),Ie(t,s.frame,n),Ne(t,n.lines,s.text,n),t.restore())}});var Le=Number.MIN_SAFE_INTEGER||-9007199254740991,ze=Number.MAX_SAFE_INTEGER||9007199254740991;function J(a,o,e){var t=Math.cos(e),n=Math.sin(e),s=o.x,r=o.y;return{x:s+t*(a.x-s)-n*(a.y-r),y:r+n*(a.x-s)+t*(a.y-r)}}function ga(a,o){var e=ze,t=Le,n=o.origin,s,r,d,u,f;for(s=0;s<a.length;++s)r=a[s],d=r.x-n.x,u=r.y-n.y,f=o.vx*d+o.vy*u,e=Math.min(e,f),t=Math.max(t,f);return{min:e,max:t}}function ta(a,o){var e=o.x-a.x,t=o.y-a.y,n=Math.sqrt(e*e+t*t);return{vx:(o.x-a.x)/n,vy:(o.y-a.y)/n,origin:a,ln:n}}var Ra=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};Q(Ra.prototype,{center:function(){var a=this._rect;return{x:a.x+a.w/2,y:a.y+a.h/2}},update:function(a,o,e){this._rotation=e,this._rect={x:o.x+a.x,y:o.y+a.y,w:o.w,h:o.h}},contains:function(a){var o=this,e=1,t=o._rect;return a=J(a,o.center(),-o._rotation),!(a.x<t.x-e||a.y<t.y-e||a.x>t.x+t.w+e*2||a.y>t.y+t.h+e*2)},intersects:function(a){var o=this._points(),e=a._points(),t=[ta(o[0],o[1]),ta(o[0],o[3])],n,s,r;for(this._rotation!==a._rotation&&t.push(ta(e[0],e[1]),ta(e[0],e[3])),n=0;n<t.length;++n)if(s=ga(o,t[n]),r=ga(e,t[n]),s.max<r.min||r.max<s.min)return!1;return!0},_points:function(){var a=this,o=a._rect,e=a._rotation,t=a.center();return[J({x:o.x,y:o.y},t,e),J({x:o.x+o.w,y:o.y},t,e),J({x:o.x+o.w,y:o.y+o.h},t,e),J({x:o.x,y:o.y+o.h},t,e)]}});function Ea(a,o,e){var t=o.positioner(a,o),n=t.vx,s=t.vy;if(!n&&!s)return{x:t.x,y:t.y};var r=e.w,d=e.h,u=o.rotation,f=Math.abs(r/2*Math.cos(u))+Math.abs(d/2*Math.sin(u)),c=Math.abs(r/2*Math.sin(u))+Math.abs(d/2*Math.cos(u)),v=1/Math.max(Math.abs(n),Math.abs(s));return f*=n*v,c*=s*v,f+=o.offset*n,c+=o.offset*s,{x:t.x+f,y:t.y+c}}function Fe(a,o){var e,t,n,s;for(e=a.length-1;e>=0;--e)for(n=a[e].$layout,t=e-1;t>=0&&n._visible;--t)s=a[t].$layout,s._visible&&n._box.intersects(s._box)&&o(n,s);return a}function Ue(a){var o,e,t,n,s,r,d;for(o=0,e=a.length;o<e;++o)t=a[o],n=t.$layout,n._visible&&(d=new Proxy(t._el,{get:(u,f)=>u.getProps([f],!0)[f]}),s=t.geometry(),r=Ea(d,t.model(),s),n._box.update(r,s,t.rotation()));return Fe(a,function(u,f){var c=u._hidable,v=f._hidable;c&&v||v?f._visible=!1:c&&(u._visible=!1)})}var Y={prepare:function(a){var o=[],e,t,n,s,r;for(e=0,n=a.length;e<n;++e)for(t=0,s=a[e].length;t<s;++t)r=a[e][t],o.push(r),r.$layout={_box:new Ra,_hidable:!1,_visible:!0,_set:e,_idx:r._index};return o.sort(function(d,u){var f=d.$layout,c=u.$layout;return f._idx===c._idx?c._set-f._set:c._idx-f._idx}),this.update(o),o},update:function(a){var o=!1,e,t,n,s,r;for(e=0,t=a.length;e<t;++e)n=a[e],s=n.model(),r=n.$layout,r._hidable=s&&s.display==="auto",r._visible=n.visible(),o|=r._hidable;o&&Ue(a)},lookup:function(a,o){var e,t;for(e=a.length-1;e>=0;--e)if(t=a[e].$layout,t&&t._visible&&t._box.contains(o))return a[e];return null},draw:function(a,o){var e,t,n,s,r,d;for(e=0,t=o.length;e<t;++e)n=o[e],s=n.$layout,s._visible&&(r=n.geometry(),d=Ea(n._el,n.model(),r),s._box.update(d,r,n.rotation()),n.draw(a,d))}},Oe=function(a){if(q(a))return null;var o=a,e,t,n;if(ae(a))if(!q(a.label))o=a.label;else if(!q(a.r))o=a.r;else for(o="",e=Object.keys(a),n=0,t=e.length;n<t;++n)o+=(n!==0?", ":"")+e[n]+": "+a[e[n]];return""+o},We={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:Oe,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},A="$datalabels",Na="$default";function Ke(a,o){var e=a.datalabels,t={},n=[],s,r;return e===!1?null:(e===!0&&(e={}),o=Q({},[o,e]),s=o.labels||{},r=Object.keys(s),delete o.labels,r.length?r.forEach(function(d){s[d]&&n.push(Q({},[o,s[d],{_key:d}]))}):n.push(o),t=n.reduce(function(d,u){return ee(u.listeners||{},function(f,c){d[c]=d[c]||{},d[c][u._key||Na]=f}),delete u.listeners,d},{}),{labels:n,listeners:t})}function pa(a,o,e,t){if(o){var n=e.$context,s=e.$groups,r;o[s._set]&&(r=o[s._set][s._key],r&&Ca(r,[n,t])===!0&&(a[A]._dirty=!0,e.update(n)))}}function Ve(a,o,e,t,n){var s,r;!e&&!t||(e?t?e!==t&&(r=s=!0):r=!0:s=!0,r&&pa(a,o.leave,e,n),s&&pa(a,o.enter,t,n))}function Ge(a,o){var e=a[A],t=e._listeners,n,s;if(!(!t.enter&&!t.leave)){if(o.type==="mousemove")s=Y.lookup(e._labels,o);else if(o.type!=="mouseout")return;n=e._hovered,e._hovered=s,Ve(a,t,n,s,o)}}function He(a,o){var e=a[A],t=e._listeners.click,n=t&&Y.lookup(e._labels,o);n&&pa(a,t,n,o)}var Je={id:"datalabels",defaults:We,beforeInit:function(a){a[A]={_actives:[]}},beforeUpdate:function(a){var o=a[A];o._listened=!1,o._listeners={},o._datasets=[],o._labels=[]},afterDatasetUpdate:function(a,o,e){var t=o.index,n=a[A],s=n._datasets[t]=[],r=a.isDatasetVisible(t),d=a.data.datasets[t],u=Ke(d,e),f=o.meta.data||[],c=a.ctx,v,g,w,j,B,F,I,L;for(c.save(),v=0,w=f.length;v<w;++v)if(I=f[v],I[A]=[],r&&I&&a.getDataVisibility(v)&&!I.skip)for(g=0,j=u.labels.length;g<j;++g)B=u.labels[g],F=B._key,L=new Ia(B,c,I,v),L.$groups={_set:t,_key:F||Na},L.$context={active:!1,chart:a,dataIndex:v,dataset:d,datasetIndex:t},L.update(L.$context),I[A].push(L),s.push(L);c.restore(),Q(n._listeners,u.listeners,{merger:function(O,V,na){V[O]=V[O]||{},V[O][o.index]=na[O],n._listened=!0}})},afterUpdate:function(a){a[A]._labels=Y.prepare(a[A]._datasets)},afterDatasetsDraw:function(a){Y.draw(a,a[A]._labels)},beforeEvent:function(a,o){if(a[A]._listened){var e=o.event;switch(e.type){case"mousemove":case"mouseout":Ge(a,e);break;case"click":He(a,e);break}}},afterEvent:function(a){var o=a[A],e=o._actives,t=o._actives=a.getActiveElements(),n=X.arrayDiff(e,t),s,r,d,u,f,c,v;for(s=0,r=n.length;s<r;++s)if(f=n[s],f[1])for(v=f[0].element[A]||[],d=0,u=v.length;d<u;++d)c=v[d],c.$context.active=f[1]===1,c.update(c.$context);(o._dirty||n.length)&&(Y.update(o._labels),a.render()),delete o._dirty}};const qe={class:"chart-container position-relative p-2"},Xe={class:"chart-title text-center"},Ye={class:"chart-wrapper"},Qe={key:0,class:"d-flex justify-content-center mt-4"},Ze=["innerHTML"],at=["innerHTML"],et=Da({__name:"ChartKoreksi",props:{data:{type:Object,required:!1}},setup(a){const o=a;ca(()=>o.data?.type,c=>{c&&f(c)},{deep:!0}),le.register(de,ue,ce,Ma,Je);const{$axiosAuth:e}=Sa(),n=$a()?.params?.id,s=D(!0),r=D(null);D({show:!1});const d=D([]),u={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{size:13}}},datalabels:{color:"#fff",font:{weight:"bold",size:14},formatter:(c,v)=>{v.chart.data.labels[v.dataIndex];const w=v.chart.data.datasets[0].data.reduce((B,F)=>B+F,0);return`${(c/w*100).toFixed(1)}%`}},tooltip:{callbacks:{label:c=>{const v=c.label||"",g=c.formattedValue||"";return`${v}: ${g}%`}}}}};async function f(c="pan"){s.value=!0;const v=new FormData;v.append("unggahan_id",n);let g="";c=="pan"?g="/analisis/kuis/pan":g="/analisis/kuis/normal";try{const w=await e.post(g,v);d.value=w.data?.data||[];const j=w.data?.persentase||{},B=["Sangat Baik","Baik","Cukup","Kurang","Sangat Kurang"],F=B.map(I=>j[I]||0);r.value={labels:B,datasets:[{label:"Persentase Nilai",data:F,backgroundColor:["#16a34a","#22c55e","#facc15","#f97316","#ef4444"],borderColor:"#fff",borderWidth:2}]}}catch(w){console.error(w.response?.data||w.message)}finally{s.value=!1}}return Pa(()=>{f()}),(c,v)=>{const g=xa,w=wa,j=ka;return x(),$("div",null,[i("div",qe,[i("div",Xe,[i("strong",null,M(o.data?.type?.toUpperCase()),1)]),i("div",Ye,[r.value?(x(),N(oa(pe),{key:0,data:r.value,options:u},null,8,["data"])):T("",!0),s.value?(x(),N(g,{key:1,class:"position-center"})):T("",!0)])]),_(fe,{name:"fade"},{default:k(()=>[o.data?.table?(x(),$("div",Qe,[_(j,{value:d.value,sortMode:"single",customSort:!0,responsiveLayout:"scroll",class:"bordered-table w-90"},{empty:k(()=>[...v[0]||(v[0]=[i("div",{class:"text-center text-muted p-4"},"Belum ada data",-1)])]),default:k(()=>[_(w,{field:"nama_lengkap",header:"Nama",sortable:""},{body:k(({data:B})=>[i("span",{innerHTML:B.nama_lengkap},null,8,Ze)]),_:1}),_(w,{field:"kategori",header:"Kategori",sortable:""},{body:k(({data:B})=>[i("span",{innerHTML:B.kategori},null,8,at)]),_:1})]),_:1},8,["value"])])):T("",!0)]),_:1})])}}}),tt=Object.assign(ke(et,[["__scopeId","data-v-eb96c06f"]]),{__name:"ChartKoreksi"}),ot={class:"pb-5 pt-3 pt-sm-3"},nt={class:"position-relative"},st={class:"row justify-content-between mb-3"},rt={class:"col-12 col-sm-4"},it={class:"search-bar-sm mb-3"},lt={class:"col-auto"},dt={type:"button",class:"btn-outline-purple rounded-pill position-relative me-1","data-bs-toggle":"modal","data-bs-target":"#ModalChart"},ut={key:0},ct={key:1},pt=["disabled"],ft={style:{"min-height":"500px !important"}},vt=["href"],mt=["href"],_t={class:"col-auto"},ht={key:0,class:"profil-img avatar-50 lazy-img"},bt=["onClick"],yt={class:"col-auto"},gt={key:0,class:"profil-img avatar-50 lazy-img"},xt={class:"position-relative"},kt=["value","onInput"],wt={class:"position-relative m-0 p-0"},Ct={class:"btn-group me-3",role:"group","aria-label":"Aksi Laporan"},Mt=["onClick"],Dt={class:"text-center"},St={class:"text-muted"},$t=["onClick"],Pt=["onClick"],jt={class:"right-top m-0 p-0"},Bt={class:"dropdown"},At={role:"button","data-bs-toggle":"dropdown"},Tt={class:"dropdown-menu shadow-sm"},It=["onClick"],Rt={class:"mt-2"},Et={class:"row justify-content-between"},Nt={class:"col-4 mb-2"},Lt={class:"col-auto"},zt={class:"col-auto"},Ft={class:"modal fade",id:"PelanggaranModal",tabindex:"-1"},Ut={class:"modal-dialog modal-lg"},Ot={class:"modal-content"},Wt={class:"modal-header"},Kt={class:"modal-title",id:"exampleModalLabel"},Vt={class:"modal-body position-relative",style:{"min-height":"300px"}},Gt={key:0},Ht=["src"],Jt={key:1,class:"table-head-sticky"},qt={class:"table table-bordered"},Xt={class:"text-success"},Yt={class:"text-success"},Qt={class:"text-success"},Zt=["onClick"],ao={class:"modal fade",id:"ModalCatatan",tabindex:"-1"},eo={class:"modal-dialog"},to={class:"modal-content position-relative"},oo={class:"modal-body"},no={class:"modal-footer"},so={class:"modal fade",id:"ModalChart",tabindex:"-1"},ro={class:"modal-dialog"},io={class:"modal-content position-relative"},lo={class:"modal-body"},uo={type:"button",class:"btn right-top","data-bs-dismiss":"modal","aria-label":"Close"},pn=Da({__name:"index",setup(a){Me({title:"Koreksi - Kuis"});const o=ba(()=>{B()},1e3),e=ve(),t=$a();me();const n=D({}),s=t?.params?.id,r=D({pelanggaran:!1,show:!1,catatan:!1,nilai:!1}),d=D(""),u=D({search:"",page:1,page_list:100,sort_by:"desc",sort_name:"id"}),f=D({}),c=D({});D({name:"",sort:"desc"});const v=D({aksi:"",foto:"",pelanggaran:[],nilai:!1}),g=D({}),{$axiosAuth:w}=Sa(),j=D({show:!1,type:"pan",table:!1});async function B(){r.value.show=!0;const m=new FormData;m.append("page",u.value.page),m.append("page_list",u.value.page_list),m.append("search",u.value.search),m.append("sort_by",u.value.sort_by),m.append("sort_name",u.value.sort_name),m.append("unggahan_id",s),d.value="/unggahan/kuis/koreksi";try{const h=(await w({method:"post",url:d.value,data:m})).data;f.value=h.kuis,v.value.nilai=f.value.nilai,c.value=h.data,r.value.show=!1,j.value.show=!0}catch(l){console.error(l.response?.data||l.message),r.value.show=!1}}ca(u,()=>{o()},{deep:!0});function F(m,l){I({jawab_id:m?.id}),v.value={index:l,aksi:"pelanggaran"}}async function I(m){r.value.pelanggaran=!0;const l=new FormData;l.append("unggahan_id",s),l.append("jawab_id",m?.jawab_id);try{let b=(await w({method:"post",url:"/unggahan/kuis/koreksi/pelanggaran",data:l})).data;v.value.aksi="pelanggaran",v.value.pelanggaran=b?.data;let P=v.value.index;c.value?.data?.[P]&&(c.value.data[P].pelanggaran_jumlah=b?.count??0)}catch(h){console.error(h.response?.data||h.message)}r.value.pelanggaran=!1}async function L(m){if((await da.fire({title:"Apakah Anda yakin?",text:"Data ini tidak dapat dikembalikan setelah dihapus.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"})).isConfirmed){r.value.pelanggaran=!0;const h=new FormData;h.append("unggahan_id",s),h.append("jawab_id",m?.jawab_id),h.append("pelanggaran_id",m?.id),h.append("_method","Delete");try{(await w({method:"post",url:"/unggahan/kuis/koreksi/pelanggaran/delete",data:h})).data?.status==!0&&await I({jawab_id:m?.jawab_id})}catch(b){console.error(b.response?.data||b.message)}r.value.pelanggaran=!1}}function O(m){v.value={aksi:"swafoto",image:m}}async function V(m){r.value.laporan=!0;const l=new FormData;l.append("id",m);try{const h=await w({method:"post",url:"/excel/laporan/kuis",data:l,responseType:"blob"});let b="laporan.xlsx";const P=h.headers["content-disposition"];if(P&&P.includes("filename=")){const W=P.match(/filename="?(.+?)"?$/);W&&W[1]&&(b=W[1])}const S=new Blob([h.data]),y=window.URL.createObjectURL(S),R=document.createElement("a");R.href=y,R.download=b,R.click(),window.URL.revokeObjectURL(y),r.value.laporan=!1}catch(h){console.error("Gagal download:",h.response),r.value.laporan=!1}}async function na(m){g.value=m}async function La(m,l,h,b){if((await da.fire({title:"Apakah Anda yakin ingin mengganti menjadi Mulai ?",text:"Proses tidak dapat dibatalkan.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Ganti!",cancelButtonText:"Batal"})).isConfirmed)try{let S=c.value.data[b];S&&(S.loading=!0);let y=m.target.value;const R=new FormData;R.append("value",y),R.append("kuis_id",l),R.append("jawab_id",h);let ia=(await w({method:"post",url:"/unggahan/kuis/koreksi/status/update",data:R})).data;S&&(S.loading=!1),ia?.status==!0&&(S.status=y)}catch(S){item&&(item.loading=!1),console.error(S.response?.data||S.message)}}async function za(){r.value.catatan=!0;const m=new FormData;m.append("kuis_id",g.value.kuis_id),m.append("jawab_id",g.value.id),m.append("catatan",g.value.catatan);try{const l=await w({method:"post",url:"/unggahan/kuis/koreksi/catatan/store",data:m});r.value.catatan=!1,Wa()}catch(l){console.error(l.response?.data||l.message),r.value.catatan=!1}}async function Fa(m){r.value.nilai=!0;const l=new FormData;l.append("kuis_id",m);try{let b=(await w({method:"post",url:"/unggahan/kuis/nilai",data:l})).data;v.value.nilai=b.data,r.value.nilai=!1}catch(h){console.error(h.response?.data||h.message),r.value.nilai=!1}}D(null);const sa=D(!1),G=D({from:"admin",show:!1,loading:!1,nama:"",jawab_id:"",pesan:"",list:[]});D("");async function Ua(m){sa.value=!0,G.value={from:"admin",show:!0,loading:!0,profil_id:m.profil?.id,nama:m.profil?.nama_lengkap,image_show:m.profil?.image_show,nama_inisial:m.profil?.nama_inisial,color:m.profil?.color,jawab_id:m.id,pesan:"",list:[]};const l=new FormData;l.append("jawab_id",m.id);try{let b=(await w({method:"post",url:"/pesan/index",data:l})).data;G.value.loading=!1,G.value.list=b.data}catch(h){console.error(h.response?.data||h.message),r.value.pesan=!1}G.value.loading=!1}function Oa(m){return m?m.charAt(0).toUpperCase()+m.slice(1):""}async function Wa(){await document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(m=>m.click())}const Ka=ba(async()=>{n.value=await e.get("profil")?.data},300);ca(()=>oa(e.get("profil")),(m,l)=>{n.value=m?.data},{deep:!0});let ra=null;Pa(()=>{Ka(),o(),ra=De(()=>{o()},3e5)}),_e(()=>{}),he(()=>{ra&&clearInterval(ra)});function Va(){sa.value=!1}function fa(m){j.value.type=m}async function Ga(m){if((await da.fire({title:"Apakah Anda yakin?",text:"Data ini tidak dapat dikembalikan setelah dihapus.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"})).isConfirmed){r.value.show=!0;const h=new FormData;h.append("jawab_id",m),h.append("_method","delete");try{let P=(await w({method:"post",url:"/unggahan/kuis/koreksi/jawab/delete",data:h})).data;console.log(P),o(),r.value.show=!1}catch(b){console.error(b.response?.data||b.message),r.value.show=!1}}}return(m,l)=>{const h=Xa,b=be("font-awesome-icon"),P=Ya,S=xa,y=wa,R=Ce,W=we,ia=Qa,Ha=ka,Ja=Za,qa=tt,va=xe("lazy");return x(),$("div",null,[sa.value?(x(),N(h,{key:0,data:G.value,onModal_close:Va},null,8,["data"])):T("",!0),l[28]||(l[28]=i("h2",{class:"pb-2 mb-4"}," Laporan ",-1)),i("div",ot,[i("div",nt,[i("div",st,[i("div",rt,[i("div",it,[H(i("input",{type:"text",placeholder:"cari","onUpdate:modelValue":l[0]||(l[0]=p=>u.value.search=p),style:{"max-width":"300px"}},null,512),[[ma,u.value.search]])])]),i("div",lt,[i("button",dt,[_(b,{icon:["fa","chart-pie"]}),l[10]||(l[10]=U(" Analisa ",-1))]),_(P,{class:"btn-outline-purple rounded-pill position-relative p-2 me-1",to:{name:"kuis-laporan-masalah",params:{id:oa(s)}}},{default:k(()=>[_(b,{icon:["fa","circle-exclamation"],class:"text-purple-pink"}),l[11]||(l[11]=U(" Masalah ",-1))]),_:1},8,["to"]),i("button",{type:"button",class:_a([v.value.nilai?"btn-success":"","btn-outline-purple rounded-pill position-relative me-1"]),onClick:l[1]||(l[1]=p=>Fa(f.value.id))},[v.value.nilai?(x(),$("span",ut,[_(b,{icon:["fa","eye"]}),l[12]||(l[12]=U(" Nilai tampil ",-1))])):(x(),$("span",ct,[_(b,{icon:["fa","eye-slash"]}),l[13]||(l[13]=U(" Nilai sembunyi ",-1))])),r.value.nilai?(x(),N(S,{key:2,message:"",class:"position-center"})):T("",!0)],2),i("button",{type:"button",class:"btn-outline-purple rounded-pill position-relative",onClick:l[2]||(l[2]=p=>V(f.value.id)),disabled:!f.value.id},[l[14]||(l[14]=U("Unduh laporan ",-1)),r.value.laporan?(x(),N(S,{key:0,message:"",class:"position-center"})):T("",!0)],8,pt)])]),i("div",ft,[r.value.show?(x(),N(S,{key:0,class:"position-center"})):T("",!0),_(Ha,{value:c.value.data,responsiveLayout:"scroll",class:"bordered-table",layout:"fixed"},{empty:k(()=>[...l[15]||(l[15]=[i("div",{class:"text-center text-muted p-4"},"Belum ada data",-1)])]),default:k(()=>[_(W,{type:"header"},{default:k(()=>[_(R,null,{default:k(()=>[_(y,{header:"Nama",rowspan:2,style:{width:"25%"}}),_(y,{header:"Profil",rowspan:2,style:{width:"25%"}}),_(y,{header:"Swafoto",rowspan:2}),_(y,{header:"Status",rowspan:2,style:{width:"50px"}}),_(y,{header:"Jumlah Pilihan Ganda Jawab Benar",colspan:3,style:{"text-align":"center !important"}}),_(y,{header:"Skor Pilihan Ganda",rowspan:2}),_(y,{header:"Skor Uraian",rowspan:2}),_(y,{header:"Nilai",rowspan:2}),_(y,{header:"Action",rowspan:2,style:{width:"450px"}})]),_:1}),_(R,null,{default:k(()=>[_(y,{header:"Rendah"}),_(y,{header:"Sedang"}),_(y,{header:"Tinggi"})]),_:1})]),_:1}),_(y,null,{body:k(({data:p})=>[_(P,{to:{name:"profil",params:{user:p.profil.username}},custom:""},{default:k(({href:E})=>[i("a",{href:E,target:"_blank",rel:"noopener noreferrer",class:"row align-items-start"},[i("strong",null,M(p.profil?.nama_lengkap),1)],8,vt)]),_:2},1032,["to"])]),_:1}),_(y,null,{body:k(({data:p})=>[_(P,{to:{name:"profil",params:{user:p.profil.username}},custom:""},{default:k(({href:E})=>[i("a",{href:E,target:"_blank",rel:"noopener noreferrer",class:"row align-items-start"},[i("div",_t,[p.profil?.image_show?H((x(),$("img",ht,null,512)),[[va,p.profil?.image_show]]):(x(),$("div",{key:1,style:ha({backgroundColor:p.profil.color}),class:"avatar-50 profile-img"},M(p.profil?.nama_inisial),5))])],8,mt)]),_:2},1032,["to"])]),_:1}),_(y,null,{body:k(({data:p})=>[i("div",{class:"row align-items-start",onClick:E=>O(p.swafoto_show),"data-bs-toggle":"modal","data-bs-target":"#PelanggaranModal"},[i("div",yt,[p.swafoto_show?H((x(),$("img",gt,null,512)),[[va,p.swafoto_show]]):(x(),$("div",{key:1,style:ha({backgroundColor:p.profil.color}),class:"avatar-50 profile-img"},null,4))])],8,bt)]),_:1}),_(y,null,{body:k(({data:p,index:E})=>[i("div",xt,[i("select",{class:_a([p.status=="selesai"?"border-success":"border-danger","rounded-pill border border-success form-control form-control-sm m-0"]),value:p.status,style:{width:"80px"},onInput:K=>La(K,p.kuis_id,p.id,E)},[...l[16]||(l[16]=[i("option",{value:""},null,-1),i("option",{value:"mulai"},"Mulai",-1),i("option",{value:"selesai"},"Selesai",-1)])],42,kt),p?.loading?(x(),N(ia,{key:0,class:"position-center"})):T("",!0)])]),_:1}),_(y,{field:"rendah"},{body:k(({data:p})=>[U(M(p.jawaban_rendah_count),1)]),_:1}),_(y,{field:"sedang"},{body:k(({data:p})=>[U(M(p.jawaban_sedang_count),1)]),_:1}),_(y,{field:"tinggi"},{body:k(({data:p})=>[U(M(p.jawaban_tinggi_count),1)]),_:1}),_(y,null,{body:k(({data:p})=>[i("pre",null,M(p.nilai_pilihan_ganda),1)]),_:1}),_(y,null,{body:k(({data:p})=>[i("pre",null,M(p.nilai_uraian),1)]),_:1}),_(y,null,{body:k(({data:p})=>[i("pre",null,M(p.nilai_total),1)]),_:1}),_(y,null,{body:k(({data:p,index:E})=>[i("div",wt,[i("div",Ct,[i("button",{type:"button",class:"btn btn-outline-custom me-1 d-flex flex-column align-items-center justify-content-center",onClick:K=>F(p,E),"data-bs-toggle":"modal","data-bs-target":"#PelanggaranModal"},[_(b,{icon:["fa","triangle-exclamation"],class:"text-purple-pink mb-1"}),i("div",Dt,[l[17]||(l[17]=i("span",null,"Pelanggaran",-1)),i("span",St,"("+M(p?.pelanggaran_jumlah)+")",1)])],8,Mt),i("button",{type:"button",class:"btn btn-outline-custom me-1 d-flex flex-column align-items-center justify-content-center",onClick:K=>Ua(p)},[_(b,{icon:["fa","comments"],class:"text-purple-pink mb-1"}),l[18]||(l[18]=i("div",null,"Obrolan",-1))],8,$t),_(P,{to:"/home/kuis/"+oa(s)+"/koreksi/"+p.id,class:"btn btn-outline-custom me-1 d-flex flex-column align-items-center justify-content-center"},{default:k(()=>[_(b,{icon:["fa","file-pen"],class:"text-purple-pink mb-1"}),l[19]||(l[19]=i("div",null,"Koreksi",-1))]),_:1},8,["to"]),i("button",{type:"button",class:"btn btn-outline-custom me-1 d-flex flex-column align-items-center justify-content-center","data-bs-toggle":"modal",onClick:K=>na(p),"data-bs-target":"#ModalCatatan"},[_(b,{icon:["fa","note-sticky"],class:"text-purple-pink mb-1"}),l[20]||(l[20]=i("div",null,"Catatan",-1))],8,Pt)]),i("div",jt,[i("div",Bt,[i("a",At,[_(b,{icon:["fas","ellipsis-vertical"],class:"text-secondary"})]),i("ul",Tt,[i("li",null,[i("a",{href:"#",class:"dropdown-item text-danger d-flex align-items-center gap-2",onClick:K=>Ga(p.id)},[_(b,{icon:["fas","trash"]}),l[21]||(l[21]=i("span",null,"Hapus",-1))],8,It)])])])])])]),_:1})]),_:1},8,["value"])]),i("div",Rt,[i("div",Et,[i("div",Nt,[H(i("select",{"onUpdate:modelValue":l[3]||(l[3]=p=>u.value.page_list=p),style:{"border-radius":"5px"}},[...l[22]||(l[22]=[i("option",{value:"5"}," 5",-1),i("option",{value:"10"}," 10",-1),i("option",{value:"50"}," 50",-1),i("option",{value:"100"}," 100",-1)])],512),[[ye,u.value.page_list]])]),i("div",Lt,M(c.value.to)+" dari "+M(c.value.total),1),i("div",zt,[_(Ja,{modelValue:u.value.page,"onUpdate:modelValue":l[4]||(l[4]=p=>u.value.page=p),"total-items":c.value.total?c.value.total:1,"items-per-page":c.value.per_page?c.value.per_page:1},null,8,["modelValue","total-items","items-per-page"])])])])])]),i("div",Ft,[i("div",Ut,[i("div",Ot,[i("div",Wt,[i("h5",Kt,M(Oa(v.value.aksi)),1),l[23]||(l[23]=i("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),i("div",Vt,[v.value.aksi=="swafoto"?(x(),$("div",Gt,[v.value.image?(x(),$("img",{key:0,src:v.value.image,style:{width:"100%"}},null,8,Ht)):T("",!0)])):(x(),$("div",Jt,[i("table",qt,[l[24]||(l[24]=i("thead",null,[i("tr",null,[i("th",null,"No"),i("th",null,"Waktu"),i("th",null,"Jenis"),i("th",null,"Aksi")])],-1)),i("tbody",null,[(x(!0),$(la,null,ge(v.value.pelanggaran,(p,E)=>(x(),$("tr",{key:E},[p.aksi=="Masuk"?(x(),$(la,{key:0},[i("td",Xt,[_(b,{icon:["fas","angles-right"]})]),i("td",Yt,M(p.waktu),1),i("td",Qt,M(p.aksi),1)],64)):(x(),$(la,{key:1},[i("td",null,M(p.nomor),1),i("td",null,M(p.waktu),1),i("td",null,M(p.aksi),1)],64)),i("td",null,[i("button",{type:"button",class:"btn btn-sm",onClick:K=>L(p)},[_(b,{icon:["fas","circle-xmark"],class:"text-danger"})],8,Zt)])]))),128))])])])),r.value.pelanggaran?(x(),N(S,{key:2,class:"position-center"})):T("",!0)]),l[25]||(l[25]=i("div",{class:"modal-footer"},[i("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])]),i("div",ao,[i("div",eo,[i("div",to,[l[27]||(l[27]=i("div",{class:"modal-header"},[i("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Catatan Akhir Penilaian"),i("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),i("div",oo,[H(i("textarea",{"onUpdate:modelValue":l[5]||(l[5]=p=>g.value.catatan=p),class:"form-control"}," ",512),[[ma,g.value.catatan]])]),i("div",no,[l[26]||(l[26]=i("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Batal",-1)),i("button",{type:"button",class:"btn btn-primary",onClick:l[6]||(l[6]=p=>za())},"Simpan")]),r.value.catatan?(x(),N(S,{key:0,class:"position-center"})):T("",!0)])])]),i("div",so,[i("div",ro,[i("div",io,[i("div",lo,[i("button",uo,[_(b,{class:"fa-2x",icon:["fas","circle-xmark"]})]),i("button",{type:"button",class:"btn btn-primary me-2",onClick:l[7]||(l[7]=p=>fa("pan"))},"PAN"),i("button",{type:"button",class:"btn btn-success me-3",onClick:l[8]||(l[8]=p=>fa("normal"))},"Normal"),i("button",{type:"button",class:"btn btn-secondary",onClick:l[9]||(l[9]=p=>j.value.table=!j.value.table)},"Tabel"),j.value.show?(x(),N(qa,{key:0,data:j.value},null,8,["data"])):T("",!0)])])])])])}}});export{pn as default};
