import{_ as I}from"./BTT6KBUK.js";import{_ as z}from"./DBDT5h3r.js";import{f as Y,r as u,u as G,s as P,h as J,e as O,c,o as r,l as b,a,x as Q,k as B,y as R,I as v,b as l,d as m,v as W,F as X,q as Z,t as tt,w as D,S as at,m as et}from"#entry";import{u as st}from"./CUA_6ykz.js";import{_ as $}from"./BFU05jqY.js";/* empty css        */import{P as ot}from"./BkDKw6tt.js";import"./Dda1HtW4.js";import"./C31_JZqf.js";import"./BLmUUPHe.js";import{P as nt}from"./BrnF6Yk7.js";import{u as lt}from"./C-MlBdbB.js";import{d as N}from"./DoL2xymK.js";/* empty css        */import"./DlAUqK2U.js";import"./QraDVNg7.js";import"./BbXXgusc.js";import"./DTCu01cd.js";import"./cmuNVbBL.js";import"./B1oisLxj.js";import"./Cc79cNwZ.js";import"./DsmCZfJr.js";const it={class:"container-fluid px-0"},rt={key:0,class:"card mb-1 mb-md-3"},ut={class:"card-body"},dt={class:"position-relative"},ct={class:"d-flex justify-content-end mt-2"},pt={class:"position-relative"},mt={key:0,class:"list-group list-group-flush mt-2"},gt={class:"d-flex justify-content-between align-items-start"},vt={class:"dropdown"},ft={class:"text-muted",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},_t={class:"dropdown-menu dropdown-menu-end"},bt=["onClick"],ht=["onClick"],kt={key:0,class:"mt-2 d-flex gap-2"},yt={type:"button",class:"disabled btn-outline-custom"},wt={class:"disabled btn-outline-custom"},xt={key:1,class:"mt-2 d-flex gap-2"},Ct=["onClick"],Pt=["onClick"],Bt={key:2,class:"m-2 float-end"},Dt={class:"modal fade",id:"pengaturanModal",tabindex:"-1","aria-labelledby":"pengaturanModalLabel","aria-hidden":"true"},Vt={class:"modal-dialog modal-fullscreen-lg-down modal-lg"},Mt={class:"modal-content"},St={class:"modal-header"},$t={href:"#",class:"right-top",id:"btn_modal_akun","data-bs-dismiss":"modal","aria-label":"Close"},Nt={class:"modal-body"},ea=Y({__name:"index",setup(Ht){st({title:"Home"});const{isMobile:H}=lt(),V=u(!1),g=N(()=>{A()},300);u(null),u({});const d=u([]);u([]);const M=u({}),y=u({}),n=u({posting_new:!1,profil:!0,posting:!0,posting_sent:!0}),i=u({}),{$axiosAuth:w}=G(),f=u({page:1});async function A(){n.value.posting=!0;const s=new FormData;for(var t in f.value)s.append(t,f.value[t]);try{let p=(await w({method:"post",url:"/unggahan",data:s})).data;d.value=p?.data,n.value.posting=!1}catch(e){console.error(e.response?.data||e.message),n.value.posting=!1}}async function K(s){if((await at.fire({title:"Apakah Anda yakin?",text:"Data ini tidak dapat dikembalikan setelah dihapus.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"})).isConfirmed){n.value.posting=!0;try{const e=await w({method:"delete",url:"/unggahan/"+s+"/delete"});g(),n.value.posting=!1}catch(e){console.error(e.response?.data||e.message),n.value.posting=!1}}}async function q(){i.value.status="menunggu",x()}async function x(){n.value.posting_new=!0,n.value.posting_sent=!0;const s=i.value,t=new FormData;for(var e in s)t.append(e,s[e]);try{let h=(await w({method:"post",url:"/unggahan/store",data:t})).data;if(h.status==!0){g(),i.value={},n.value.posting_new=!1,n.value.posting_sent=!1;return}g(),y.value=h.errors;const k=d.value.findIndex(_=>_.id===s.id);d.value[k].error=y.value,n.value.posting_new=!1,n.value.posting_sent=!1}catch(p){console.error(p.response?.data||p.message),n.value.posting_sent=!1,n.value.posting_new=!1}}async function F(s){i.value={id:s.id,_method:"patch",text:s.text}}async function L(s){M.value=await s}async function T(){i.value.status="menunggu",console.log(i.value),x()}async function U(s,t,e){i.value=await{id:s,status:e,index:t},x()}P(()=>f,(s,t)=>{g()},{deep:!0}),u(!1);const S=J(),C=u({}),E=N(async()=>{C.value=await S.get("profil")?.data},300);P(()=>et(S.get("profil")),(s,t)=>{C.value=s?.data},{deep:!0}),u(null),O(async()=>{g(),E()});async function j(){g()}return P(H,(s,t)=>{V.value=s}),(s,t)=>{const e=W("font-awesome-icon"),p=I,h=z;return r(),c("div",it,[C.value?.peran?.guru?(r(),c("div",rt,[a("div",ut,[a("div",null,[a("div",dt,[Q(a("textarea",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.value.text=o),class:v([y.value.text?"border border-danger":"","form-control shadow-sm rounded-4"]),rows:"2",placeholder:"Apa yang sedang kamu pikirkan?"},null,2),[[R,i.value.text]]),n.value.posting_new?(r(),B($,{key:0,class:"position-center"})):b("",!0)]),a("div",ct,[i.value.id?(r(),c("button",{key:0,type:"button",class:"btn-outline-custom px-4",onClick:t[1]||(t[1]=o=>T())}," Update ")):(r(),c("button",{key:1,type:"button",class:"btn-outline-custom px-4",onClick:t[2]||(t[2]=o=>q())},[l(e,{icon:["fas","plus"],class:"me-1"}),t[4]||(t[4]=m(" Unggah ",-1))]))])]),a("div",pt,[d.value?.data?.length>0?(r(),c("ul",mt,[(r(!0),c(X,null,Z(d.value?.data,(o,k)=>(r(),c("li",{class:v([i.value.id==o.id&&i.value._method=="patch"?"bg-light":"","list-group-item mb-3 shadow-sm rounded"]),key:k},[a("div",gt,[a("div",null,[a("div",null,tt(o.text),1)]),a("div",vt,[a("a",ft,[l(e,{icon:["fas","ellipsis-vertical"]})]),a("ul",_t,[a("li",null,[a("a",{href:"#",class:"dropdown-item",onClick:_=>F(o)},"Edit",8,bt)]),a("li",null,[a("a",{href:"#",class:"dropdown-item text-danger",onClick:_=>K(o.id)},"Hapus",8,ht)])])])]),i.value.id==o.id&&i.value._method=="patch"?(r(),c("div",kt,[l(p,{class:"disabled btn-outline-custom",to:{}},{default:D(()=>[l(e,{icon:["fas","pen-to-square"],class:"me-1"}),t[5]||(t[5]=m(" Kuis ",-1))]),_:1}),a("button",yt,[l(e,{icon:["fas","gears"],class:"me-1"}),t[6]||(t[6]=m(" Pengaturan ",-1))]),a("button",wt,[l(e,{icon:["far","paper-plane"],class:"text-prima4y me-1"}),t[7]||(t[7]=m(" Publikasi ",-1))])])):(r(),c("div",xt,[l(p,{class:v([o.error.kuis?"border border-danger":"","btn-outline-custom"]),to:{name:"kuis-home",params:{id:o.id},query:{tab:"pilihan_ganda"}}},{default:D(()=>[l(e,{icon:["fas","pen-to-square"],class:"me-1"}),t[8]||(t[8]=m(" Kuis ",-1))]),_:1},8,["class","to"]),V.value?(r(),B(p,{key:0,to:{name:"kuis-pengaturan",params:{id:o.id}},class:v([o.error.pengaturan?"border border-danger":"","btn-outline-custom"])},{default:D(()=>[l(e,{icon:["fas","gears"],class:"me-1"}),t[9]||(t[9]=m(" Pengaturan ",-1))]),_:1},8,["to","class"])):(r(),c("button",{key:1,type:"button",class:v([o.error.pengaturan?"border border-danger":"","btn-outline-custom"]),"data-bs-toggle":"modal","data-bs-target":"#pengaturanModal",onClick:_=>L(o)},[l(e,{icon:["fas","gears"],class:"me-1"}),t[10]||(t[10]=m(" Pengaturan ",-1))],10,Ct)),a("button",{onClick:_=>U(o.id,k,"kirim"),type:"button",class:v(["btn-outline-custom"])},[l(e,{icon:["far","paper-plane"],class:"me-1"}),t[11]||(t[11]=m(" Publikasi ",-1))],8,Pt)]))],2))),128))])):b("",!0),n.value.posting?(r(),B($,{key:1,class:"position-center"})):b("",!0),d.value?.total>d.value?.per_page?(r(),c("div",Bt,[l(h,{modelValue:f.value.page,"onUpdate:modelValue":t[3]||(t[3]=o=>f.value.page=o),"total-items":d.value?.total?d.value.total:1,"items-per-page":d.value?.per_page?d.value.per_page:1},null,8,["modelValue","total-items","items-per-page"])])):b("",!0)])])])):b("",!0),a("div",null,[l(ot,{loading:n.value.posting_sent,onPageHome:j},null,8,["loading"])]),a("div",Dt,[a("div",Vt,[a("div",Mt,[a("div",St,[t[12]||(t[12]=a("h5",{class:"modal-title",id:"pengaturanModalLabel"},"Pengaturan Kuis",-1)),a("a",$t,[l(e,{class:"fa-2x",icon:["fas","circle-xmark"]})])]),a("div",Nt,[l(nt,{data:M.value},null,8,["data"])])])])])])}}});export{ea as default};
