import{_ as Z}from"./CwQB-XB4.js";import{_ as ee}from"./DSPHs38f.js";import{Q as ae}from"./B5Pd6NfA.js";import{f as te,s as se,h as ne,j as le,i as oe,u as ue,r as k,S as I,e as ie,G as M,al as re,c as r,o as u,a,k as S,l as v,F as C,q as R,b as d,w as y,z as b,C as T,a9 as de,ak as L,A as U,I as W,d as _,J as me,m as pe,n as ce,t as j}from"#entry";import{_ as V}from"./BFU05jqY.js";const ve={class:"pengaturan"},ge={class:"position-relative"},fe={class:"row"},ke={class:"col-md-5"},be={class:"card card-body mb-3"},_e={class:"mb-3"},we={class:"input-group position-relative"},ye=["value","textContent"],he={class:"mt-1"},xe={class:"d-flex flex-wrap gap-2"},Se=["onClick"],Ce={class:"card card-body mb-3"},Re={class:"mb-3"},je={class:"card card-body mb-3"},Ve={class:"d-flex justify-content-between align-items-center form-check form-switch m-0 p-0"},Ke={class:"card card-body mb-3"},Pe={class:"mb-3"},Te={class:"card card-body mb-3"},Oe={class:"mb-3"},Ae={class:"position-relative"},De={class:"mb-3"},Fe={class:"input-group"},Ie={class:"mb-3"},Me={class:"input-group"},Ue={key:0,class:"mb-3"},Ne={class:"position-relative"},Be={key:1,class:"mb-3"},$e={class:"position-relative"},Je={class:"col-md-7"},Le={class:"card card-body mb-3"},We={class:"mb-3"},Ee={class:"position-relative"},He={key:0,class:"mt-1"},qe={key:1,class:"mt-1"},ze={class:"mb-3"},Ge={class:"position-relative"},Qe={key:0,class:"mt-1"},Ye={key:1,class:"mt-1"},Xe={class:"form-label d-inline-flex align-items-center gap-1"},Ze={class:"text-end mt-2"},ea={class:"btn-group position-relative me-3"},aa={class:"dropdown-menu dropdown-menu-end mt-2 dropdown-custom","data-bs-auto-close":"outside"},ta={class:"p-3"},sa={class:"menu-list"},na={class:"table table-sm table-bordered table-striped table-hover align-middle"},la={class:"text-center"},oa={style:{"white-space":"pre-wrap"}},ua={class:"card card-body"},ia={key:1,class:"modal-footer"},ra={key:2,class:"modal-footer"},da=te({__name:"pengaturan",props:{data:{type:Object,required:!1,default:()=>({})}},setup(E){const N=E,O=se();ne(),le();const H=oe(),{$axiosAuth:h}=ue(),w=H.params.id,l=k({pg_rumus:!1,ur_rumus:!1,show:!1,waktu_selesai:!1,kategori:!1}),q=new Date().toISOString().slice(0,16),A=k({});k([]);const t=k({kategori:[],waktu_mulai:q,layar_penuh:!0,durasi:120,mode:"dinamis",waktu_selesai:"",waktu_tutup:"",swafoto_aksi:"random",pg_rumus:"(SKOR/SKOR_MAKS)*60",ur_rumus:"(SKOR/SKOR_MAKS)*40",petunjuk:"<div><b>Pilihan Ganda</b></div> baca dengan teliti dan tekan tombol pilihan sesuai pilihan yang Anda anggap benar. Tunggu sampai tanda tunggu berhenti, jawaban akan disimpan otomatis. <div><b>Uraian</b></div> Jawab pertanyaan dengan teliti. Jawab pertanyaan Anda pada kolom yang disediakan. Tunggu tanda tunggu selesai, jawaban Anda akan disimpan otomatis."}),z=k([{nama:"SKOR",keterangan:"Skor didapat"},{nama:"SKOR_MAKS",keterangan:"Skor maksimal"},{nama:"+",keterangan:"Tambah"},{nama:"-",keterangan:"Kurang"},{nama:"/",keterangan:"Bagi"},{nama:"*",keterangan:"Kali"},{nama:"sqrt(SKOR, 1/2)	",keterangan:"Akar 2"},{nama:"pow(SKOR, 2)	",keterangan:"Pangkat 2"}]),D=I.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:n=>{n.onmouseenter=I.stopTimer,n.onmouseleave=I.resumeTimer}}),p=k({});async function G(n,e){K(t.value.pg_rumus,"pilihan_ganda"),K(t.value.ur_rumus,"uraian")}async function K(n,e){e=="pilihan_ganda"?l.value.pg_rumus=!0:l.value.ur_rumus=!0;const i=new FormData;i.append("rumus",n);try{let m=(await h({method:"post",url:"/rumus-tes",data:i})).data;return e=="pilihan_ganda"?(p.value.pg_rumus=m.status,l.value.pg_rumus=!1):(p.value.ur_rumus=m.status,l.value.ur_rumus=!1),m.status}catch(o){console.error(o.response?.data||o.message),l.value.pg_rumus=!1,l.value.ur_rumus=!1}}const F=k([]);async function Q(){l.value.kategori=!0;try{let n=await h({method:"post",url:"/other/group"});F.value=n?.data?.data?.kategori,l.value.kategori=!1}catch(n){console.error(n.response?.data||n.message),l.value.kategori=!1}}async function Y(n){const e=n.target.value,i=F.value.find(o=>o?.id===e);i&&!t.value.kategori.some(o=>o?.id===i?.id)&&t.value.kategori.push(i),n.target.value=""}async function X(n){const e=t.value.kategori.indexOf(n);e!==-1&&await t.value.kategori.splice(e,1)}async function B(n){l.value.show=!0,O.start();const e=new FormData;e.append("unggahan_id",n);try{let o=(await h({method:"post",url:"/unggahan/kuis/pengaturan/show",data:e})).data,m=o?.data;o?.status==!0?(m.petunjuk||(m.petunjuk=t.value.petunjuk),t.value=m):t.value={},l.value.show=!1,O.finish()}catch(i){console.error(i.response?.data||i.message),l.value.show=!1,O.finish()}}async function $(){l.value.show=!0,A.value={};let n=t.value.pg_rumus;if(n=await K(n,"pilihan_ganda"),n!=!0){l.value.show=!1;return}let e=t.value.ur_rumus;if(e=await K(e,"uraian"),e!=!0){l.value.show=!1;return}const i=new FormData,o=t.value;for(var m in o)if(m=="kategori"){var f=o[m];i.append(m,JSON.stringify(f))}else i.append(m,o[m]);w?i.append("unggahan_id",w):i.append("unggahan_id",N.data.id);try{let c=await h({method:"post",url:"/unggahan/kuis/pengaturan",data:i});l.value.show=!1;let x=c.data;if(console.log(x),x.status!=!0){A.value=x.errors,D.fire({icon:"error",title:"belum disimpan, periksa isian anda"});return}D.fire({icon:"success",title:"Tersimpan"}),w?ce({name:"home"}):document.getElementById("btn_close")?.click()}catch(c){D.fire({icon:"error",title:"belum disimpan, periksa isian anda"}),console.error(c.response?.data||c.message),l.value.show=!1}}ie(async()=>{w&&await B(w)});async function P(){if(!t.value.waktu_mulai)return;let n=t.value.mode,e;n=="statis"?(l.value.waktu_selesai=!0,e=t.value.durasi):(l.value.waktu_selesai=!0,e=30);const i=new FormData;i.append("waktu_mulai",t.value.waktu_mulai),i.append("durasi",e);try{const o=await h({method:"post",url:"/tambah-menit",data:i});t.value.waktu_selesai=await o.data.waktu_selesai,l.value.waktu_selesai=!1}catch(o){console.error(o.response?.data||o.message),l.value.waktu_selesai=!1}}return M(re(N,"data"),async(n,e)=>{JSON.stringify(n)!==JSON.stringify(e)&&n?.id&&await B(n.id)},{deep:!0}),M(()=>t.value.durasi,async(n,e)=>{n!==e&&await P()}),M(()=>t.value.waktu_mulai,async(n,e)=>{n!==e&&await P()}),(n,e)=>{const i=Z,o=U("font-awesome-icon"),m=U("FlatPickr"),f=ee,c=U("FontAwesomeIcon"),x=ae;return u(),r("div",ve,[a("div",ge,[(u(!0),r(C,null,R(A.value,(s,g)=>(u(),r("div",{key:g},[(u(!0),r(C,null,R(s,(J,pa)=>(u(),r("p",{key:g,class:"text-danger"},j(J),1))),128))]))),128)),a("form",null,[a("div",fe,[a("div",ke,[a("div",be,[e[21]||(e[21]=a("strong",null,[a("label",{class:"form-label"},"Dibagikan kepada kategori")],-1)),a("div",_e,[a("div",we,[a("select",{class:"form-select",onChange:e[0]||(e[0]=s=>Y(s)),onFocus:e[1]||(e[1]=s=>Q())},[e[19]||(e[19]=a("option",{value:""},null,-1)),(u(!0),r(C,null,R(F.value,(s,g)=>(u(),r("option",{key:g,value:s.id,textContent:j(s.text)},null,8,ye))),128))],32),d(i,{class:"btn btn-light border border-1",to:{name:"home-setting"}},{default:y(()=>[...e[20]||(e[20]=[_("+ K",-1)])]),_:1}),l.value.kategori?(u(),S(V,{key:0,class:"position-center"})):v("",!0)]),a("div",he,[a("div",xe,[(u(!0),r(C,null,R(t.value.kategori,(s,g)=>(u(),r("span",{key:g,class:"border border-1 border-secondary rounded d-inline-flex align-items-center px-2 py-1",style:{"font-size":"0.875rem","line-height":"1"}},[_(j(s.text)+" ",1),a("button",{type:"button",class:"btn btn-sm btn-light ms-2 p-0 d-flex align-items-center justify-content-center",style:{width:"20px",height:"20px"},onClick:J=>X(s)},[d(o,{icon:["fas","circle-xmark"],class:"text-secondary"})],8,Se)]))),128))])])])]),a("div",Ce,[a("div",Re,[e[22]||(e[22]=a("strong",null,[a("label",{class:"form-label"},"Mata Pelajaran")],-1)),b(a("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.mata_pelajaran=s),type:"text",class:"form-control"},null,512),[[T,t.value.mata_pelajaran]])])]),a("div",je,[a("div",Ve,[e[23]||(e[23]=a("label",{class:"form-check-label m-0",for:"flexSwitchCheckChecked"},[a("strong",null," Layar penuh ")],-1)),b(a("input",{class:"form-check-input m-0","onUpdate:modelValue":e[3]||(e[3]=s=>t.value.layar_penuh=s),type:"checkbox",id:"flexSwitchCheckChecked",checked:""},null,512),[[de,t.value.layar_penuh]])])]),a("div",Ke,[a("div",Pe,[e[25]||(e[25]=a("strong",null,[a("label",{class:"form-label"},"Swafoto")],-1)),b(a("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>t.value.swafoto_aksi=s),class:"form-control"},[...e[24]||(e[24]=[a("option",{value:"off"},"Mati",-1),a("option",{value:"random"},"Random",-1),a("option",{value:"interval",disabled:""},"Interval 10 menit",-1)])],512),[[L,t.value.swafoto_aksi]])])]),a("div",Te,[e[33]||(e[33]=a("strong",null,[a("label",{class:"form-label"},"Aktifasi")],-1)),a("div",Oe,[e[26]||(e[26]=a("label",{class:"form-label"},"Waktu Mulai",-1)),a("div",Ae,[d(f,null,{default:y(()=>[d(m,{ref:"pickerRef",modelValue:t.value.waktu_mulai,"onUpdate:modelValue":e[5]||(e[5]=s=>t.value.waktu_mulai=s),onOnChange:e[6]||(e[6]=s=>P()),config:{enableTime:!0,time_24hr:!0,dateFormat:"Y-m-d H:i:S"},placeholder:"Pilih tanggal & waktu",class:"form-control"},null,8,["modelValue"])]),_:1}),d(c,{icon:["far","calendar"],class:"right-center",style:{"pointer-events":"none"}})])]),a("div",De,[e[28]||(e[28]=a("label",{class:"form-label"},"Durasi",-1)),a("div",Fe,[b(a("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>t.value.durasi=s),type:"number",class:"form-control"},null,512),[[T,t.value.durasi]]),e[27]||(e[27]=a("span",{class:"input-group-text"},"menit",-1))])]),a("div",Ie,[e[30]||(e[30]=a("label",{class:"form-label"},"Mode",-1)),a("div",Me,[b(a("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>t.value.mode=s),onChange:e[9]||(e[9]=s=>P()),class:"form-control"},[...e[29]||(e[29]=[a("option",{value:"statis"},'Waktu mengikuti "waktu selesai"',-1),a("option",{value:"dinamis"},"Waktu mengikuti durasi",-1)])],544),[[L,t.value.mode]])])]),t.value.mode=="statis"?(u(),r("div",Ue,[e[31]||(e[31]=a("label",{class:"form-label"},"Waktu selesai",-1)),a("div",Ne,[d(f,null,{default:y(()=>[d(m,{modelValue:t.value.waktu_selesai,"onUpdate:modelValue":e[10]||(e[10]=s=>t.value.waktu_selesai=s),config:{enableTime:!0,time_24hr:!0,dateFormat:"Y-m-d H:i:S"},disabled:"",placeholder:"Pilih tanggal & waktu",class:"form-control"},null,8,["modelValue"])]),_:1}),d(c,{class:"right-center",icon:["far","calendar"]}),l.value.waktu_selesai?(u(),S(V,{key:0,class:"position-center"})):v("",!0)])])):(u(),r("div",Be,[e[32]||(e[32]=a("label",{class:"form-label"},"Waktu ditutup",-1)),a("div",$e,[d(f,null,{default:y(()=>[d(m,{modelValue:t.value.waktu_selesai,"onUpdate:modelValue":e[11]||(e[11]=s=>t.value.waktu_selesai=s),config:{enableTime:!0,time_24hr:!0,dateFormat:"Y-m-d H:i:S"},placeholder:"Pilih tanggal & waktu",class:"form-control"},null,8,["modelValue"])]),_:1}),d(c,{icon:["far","calendar"],class:"right-center",style:{"pointer-events":"none"}})])]))])]),a("div",Je,[a("div",Le,[e[44]||(e[44]=a("strong",null,[a("label",{class:"form-label"},"Rumus Penilaian ")],-1)),a("div",null,[a("div",We,[a("div",null,[e[34]||(e[34]=a("label",{class:"form-label"},"Pilihan Ganda",-1)),a("div",Ee,[b(a("textarea",{"onUpdate:modelValue":e[12]||(e[12]=s=>t.value.pg_rumus=s),class:W(["form-control",p.value.pg_rumus===!0?"border-success":p.value.pg_rumus===!1?"border-danger":""]),style:{"font-style":"italic"},rows:"3",placeholder:"Contoh: (NILAI * 2) + 5"},null,2),[[T,t.value.pg_rumus]]),l.value.pg_rumus?(u(),S(V,{key:0,class:"position-center"})):v("",!0)])]),p.value.pg_rumus===!0?(u(),r("div",He,[d(o,{icon:["fas","circle-check"],class:"text-success me-1"}),e[35]||(e[35]=_(" Rumus dapat digunakan ",-1))])):v("",!0),p.value.pg_rumus===!1?(u(),r("div",qe,[d(o,{icon:["fas","circle-xmark"],class:"text-danger me-1"}),e[36]||(e[36]=_(" Rumus tidak dapat dugunakan ",-1))])):v("",!0)]),a("div",ze,[a("div",null,[e[37]||(e[37]=a("label",{class:"form-label"},"Uraian",-1)),a("div",Ge,[b(a("textarea",{"onUpdate:modelValue":e[13]||(e[13]=s=>t.value.ur_rumus=s),class:W(["form-control",p.value.ur_rumus===!0?"border-success":p.value.ur_rumus===!1?"border-danger":""]),style:{"font-style":"italic"},rows:"3",placeholder:"Contoh: (NILAI * 2) + 5"},null,2),[[T,t.value.ur_rumus]]),l.value.ur_rumus?(u(),S(V,{key:0,class:"position-center"})):v("",!0)])]),p.value.ur_rumus===!0?(u(),r("div",Qe,[d(o,{icon:["fas","circle-check"],class:"text-success me-1"}),e[38]||(e[38]=_(" Rumus dapat digunakan ",-1))])):v("",!0),p.value.ur_rumus===!1?(u(),r("div",Ye,[d(o,{icon:["fas","circle-xmark"],class:"text-danger me-1"}),e[39]||(e[39]=_(" Rumus tidak dapat dugunakan ",-1))])):v("",!0)]),a("label",Xe,[d(o,{icon:["fas","circle"],style:{color:"gray",height:"10px"}}),e[40]||(e[40]=a("span",null,"Nilai total = nilai pilihan ganda + nilai uraian",-1))]),a("div",Ze,[a("div",ea,[e[43]||(e[43]=a("button",{class:"btn btn-sm btn-outline-success mr-3","data-bs-toggle":"dropdown","aria-expanded":"false"},"Petunjuk rumus ",-1)),a("div",aa,[a("div",{onClick:e[14]||(e[14]=me(()=>{},["stop"]))},[a("div",ta,[a("div",sa,[e[42]||(e[42]=a("strong",{class:"mb-2"},"Petunjuk Penerapan Rumus",-1)),a("table",na,[e[41]||(e[41]=a("thead",{class:"table-light text-center"},[a("tr",null,[a("th",{style:{width:"200px"}},"Simbol"),a("th",null,"Keterangan")])],-1)),a("tbody",null,[(u(!0),r(C,null,R(z.value,(s,g)=>(u(),r("tr",{key:g},[a("td",la,j(s.nama),1),a("td",oa,j(s.keterangan),1)]))),128))])])])])])])]),a("button",{type:"button",class:"btn btn-sm btn-outline-success mr-3",onClick:e[15]||(e[15]=s=>G())},"Tes Rumus")])])]),a("div",ua,[e[45]||(e[45]=a("strong",null,[a("label",{class:"form-label"},"Petunjuk")],-1)),d(f,null,{default:y(()=>[d(x,{modelValue:t.value.petunjuk,"onUpdate:modelValue":e[16]||(e[16]=s=>t.value.petunjuk=s),style:{minHeight:"250px",backgroundColor:"white"}},null,8,["modelValue"])]),_:1})])])])]),l.value.show?(u(),S(V,{key:0,class:"position-center"})):v("",!0),pe(w)?(u(),r("div",ia,[d(i,{to:{name:"home"},class:"btn btn-outline-secondary m-2"},{default:y(()=>[...e[46]||(e[46]=[_("Tutup",-1)])]),_:1}),a("button",{type:"button",class:"btn btn-primary m-2",onClick:e[17]||(e[17]=s=>$())},"Simpan")])):(u(),r("div",ra,[e[47]||(e[47]=a("button",{type:"button",id:"btn_close",class:"btn btn-outline-secondary m-2","data-bs-dismiss":"modal"},"Tutup",-1)),a("button",{type:"button",class:"btn btn-primary m-2",onClick:e[18]||(e[18]=s=>$())},"Simpan")]))])])}}}),ba=Object.assign(da,{__name:"KuisPengaturan"});export{ba as P};
