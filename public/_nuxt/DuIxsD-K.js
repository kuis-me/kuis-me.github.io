import{_ as L}from"./CwQB-XB4.js";import{_ as R}from"./QraDVNg7.js";import{f as K,i as M,h as U,j as q,u as E,r as p,G,e as P,c as d,o,a,l as m,k as h,H as N,t as i,d as w,b as u,w as F,I as b,A as J,m as O,z as Q,C as X,F as v,q as Y}from"#entry";import{_ as y}from"./DmRUS9VP.js";import{u as Z}from"./CUA_6ykz.js";import{_ as C}from"./BFU05jqY.js";import{_ as aa}from"./DlAUqK2U.js";const sa={key:0},ta={class:"list-group-item position-relative mb-3"},ea={class:"card shadow-sm"},na={class:"card-body position-relative"},oa={class:"d-flex justify-content-between align-items-start"},la={class:"row align-items-start"},ia={class:"col-auto"},ra=["src"],da={class:"col"},ua={class:"small-custom text-start"},ca={class:"small-custom text-start"},pa={class:"mb-2"},ma={class:"small-custom text-end d-none d-md-block"},va={class:"mapel-kuis"},_a={class:"small-custom d-md-none d-block"},ga={class:"text-center mapel-kuis"},ka={class:"text-center"},fa={class:"row"},ha={class:"col-sm-12 p-2"},xa={class:"notebook position-relative"},wa={class:"d-flex justify-content-between align-items-center mt-3"},ba={class:"d-flex gap-3 flex-wrap text-secondary position-relative"},ya={class:"ms-1"},Ca={class:"ms-1"},Da={class:"ms-1"},ja={key:0,class:"position-absolute top-0 end-0 m-4"},$a={class:"dropdown"},Sa={role:"button","data-bs-toggle":"dropdown"},Ba={key:0,class:"dropdown-menu"},Fa={class:"card comments-card border-0 shadow-sm"},Ia={class:"card-body"},Ta={class:"mb-3"},Na={class:"position-relative"},Va={class:"upload-footer d-flex justify-content-between align-items-center mt-2"},Wa={class:"d-flex gap-2"},Aa=["disabled"],Ha={class:"comments-list position-relative"},za={class:"d-flex"},La={class:"flex-shrink-0 me-3"},Ra=["onClick"],Ka=["src"],Ma={class:"flex-grow-1"},Ua={class:"d-flex justify-content-between align-items-start mb-1"},qa={class:"fw-bold mb-0"},Ea={class:"text-muted"},Ga={class:"dropdown"},Pa={class:"btn btn-link text-muted p-0",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Ja={class:"dropdown-menu dropdown-menu-end"},Oa=["onClick"],Qa={class:"mb-0"},Xa={key:1,class:"list-group-item mb-3"},Ya={class:"card shadow-sm"},Za={class:"card-body position-relative",style:{"min-height":"150px"}},as=K({__name:"[id]",setup(ss){const D=M();Z({title:"Unggahan - "+D.params.user});const V=U();q();const{$axiosAuth:x}=E(),j=p({}),I=D.params.id,$=D.params.user,t=p({profil:{}}),T=p([]),_=p({}),g=p({}),c=p({tanggapan:!0,tanggapan_input:!1});async function S(){c.value.tanggapan=!0;const l=new FormData;l.append("unggahan_id",I),l.append("username",$);try{const e=(await x({method:"post",url:"/unggahan/show",data:l})).data;t.value=e.data,T.value=e.tanggapan,c.value.tanggapan=!1}catch(s){console.error(s.response?.data||s.message),c.value.tanggapan=!1}}async function W(){c.value.tanggapan_input=!0;const l=new FormData;l.append("unggahan_id",I),l.append("username",$);const s=_.value;for(var e in s)l.append(e,s[e]);try{const r=await x({method:"post",url:"/unggahan/tanggapan/store",data:l});j.value=r.data.data,_.value.text="",S(),c.value.tanggapan_input=!1}catch(r){console.error(r.response?.data||r.message),c.value.tanggapan_input=!1}}async function A(l){const s=new FormData;s.append("tanggapan_id",l);try{const e=await x({method:"delete",url:"/unggahan/tanggapan/"+l+"/destroy",data:s});j.value=e.data,console.log(j.value),S()}catch(e){console.error(e.response?.data||e.message)}}async function B(l,s,e){let r=t.value;r.loading=!0;const f=new FormData;f.append("unggahan_id",s),f.append("reaksi",e);try{const n=await x({method:"post",url:"/unggahan/reaksi/store",data:f});g.value=n.data,r.tidak_suka_count=g.value.tidak_suka,r.suka_count=g.value.suka,r.reaksi_ku=g.value.reaksi,r.mark=g.value.mark,r.loading=!1,e=="mark"&&V.set("tanda",g.value.mark)}catch(n){console.error(n.response?.data||n.message),r.loading=!1}}const k=p({max_text:200,remaining_text:200});return G(()=>_.value.text,l=>{const s=k.value.max_text||200,e=l?.length||0,r=s-e;e>s&&(_.value.text=l.slice(0,s)),k.value.remaining_text=r>=0?r:0}),P(()=>{S()}),(l,s)=>{const e=J("font-awesome-icon"),r=L,f=R;return o(),d("div",null,[t.value?.profil?.nama_lengkap?(o(),d("div",sa,[a("div",ta,[a("div",ea,[a("div",na,[c.value.tanggapan?(o(),h(C,{key:0,class:"position-center"})):m("",!0),a("div",null,[a("div",oa,[a("div",la,[a("div",ia,[t.value.profil.image_show?(o(),d("img",{key:0,src:t.value.profil.image_show,class:"profil-img avatar-50",onClick:s[0]||(s[0]=n=>l.redirect(t.value.profil.username))},null,8,ra)):(o(),d("div",{key:1,style:N({backgroundColor:t.value.profil.color}),class:"avatar-50 profile-img",onClick:s[1]||(s[1]=n=>l.redirect(t.value.profil.username))},i(t.value.profil.nama_inisial),5))]),a("div",da,[a("div",{class:"fw-bold cursor-pointer",onClick:s[2]||(s[2]=n=>l.redirect(t.value.profil.username))},i(t.value.profil.nama_lengkap),1),a("div",ua," ID: "+i(t.value.id_ref),1),a("div",ca,i(t.value.created_at_for_humans),1)]),s[9]||(s[9]=a("div",{class:"text-muted small"},null,-1))]),s[10]||(s[10]=a("div",{class:"col-sm-6 text-muted small",style:{"margin-top":"-10px","padding-top":"-10px !important"}},null,-1))]),s[21]||(s[21]=a("hr",{class:"my-2"},null,-1)),a("div",pa,[a("div",ma,[a("span",va,i(t.value.kuis?.mata_pelajaran),1),w(" ⏰ "+i(t.value.waktu_mulai)+" WIB – "+i(t.value.waktu_selesai)+" WIB ",1)]),a("div",_a,[a("div",ga,i(t.value.kuis?.mata_pelajaran),1),a("div",ka," ⏰ "+i(t.value.waktu_mulai)+" WIB – "+i(t.value.waktu_selesai)+" WIB ",1)]),a("div",fa,[a("div",ha,[a("div",xa,[a("div",null,i(t.value.text||""),1)])])])]),a("div",wa,[a("div",null,[a("div",null,[u(r,{to:{name:"kuis-persiapan",params:{user:t.value.profil.username,id:t.value.id}},class:"btn-outline-custom",style:{gap:"0.5rem"}},{default:F(()=>[t.value?.status_jawab=="selesai"?(o(),d(v,{key:0},[u(e,{icon:["fas","check"],width:"20",height:"20"}),s[11]||(s[11]=a("span",{class:"text-success"}," Selesai",-1))],64)):t.value?.status_jawab=="dijawab"?(o(),d(v,{key:1},[u(e,{icon:["fas","check"],width:"20",height:"20"}),s[12]||(s[12]=a("span",{class:"text-success"},"Telah Dijawab",-1))],64)):t.value?.status_kuis=="tutup"?(o(),d(v,{key:2},[s[13]||(s[13]=a("img",{src:y,width:"20",height:"20"},null,-1)),s[14]||(s[14]=a("span",null," Tutup",-1))],64)):t.value?.status_kuis=="berlangsung"?(o(),d(v,{key:3},[s[15]||(s[15]=a("img",{src:y,width:"20",height:"20"},null,-1)),s[16]||(s[16]=a("span",null," Berlangsung",-1))],64)):t.value?.status_kuis=="dijawab"?(o(),d(v,{key:4},[s[17]||(s[17]=a("img",{src:y,width:"20",height:"20"},null,-1)),s[18]||(s[18]=a("span",null,"Telah Dijawab",-1))],64)):(o(),d(v,{key:5},[s[19]||(s[19]=a("img",{src:y,width:"20",height:"20"},null,-1)),s[20]||(s[20]=a("span",null," Belum dimulai",-1))],64))]),_:1},8,["to"])])]),a("div",ba,[a("button",{class:"btn p-0 text-secondary",onClick:s[3]||(s[3]=n=>B(null,t.value.id,"suka")),title:"Suka"},[u(e,{icon:["fas","heart"],class:b({"text-danger":t.value.reaksi_ku==="suka"})},null,8,["class"]),a("span",ya,i(t.value.suka_count),1)]),a("button",{class:"btn p-0 text-secondary",onClick:s[4]||(s[4]=n=>B(null,t.value.id,"tidak suka")),title:"Tidak Suka"},[u(e,{icon:["fas","heart-crack"],class:b({"text-danger":t.value.reaksi_ku==="tidak suka"})},null,8,["class"]),a("span",Ca,i(t.value.tidak_suka_count),1)]),a("button",{class:"btn p-0 text-secondary",onClick:s[5]||(s[5]=n=>B(null,t.value.id,"mark")),title:"Favorit"},[u(e,{icon:["fas","bookmark"],class:b({"text-danger":t.value.mark})},null,8,["class"])]),u(r,{to:{name:"tanggapan",params:{user:t.value.profil.username,id:t.value.id}},class:"text-secondary text-decoration-none small",title:"Komentar"},{default:F(()=>[u(e,{icon:["fas","comments"]}),a("span",Da,i(t.value.tanggapan_all_count??0),1)]),_:1},8,["to"]),t.value.loading?(o(),h(f,{key:0,class:"position-center"})):m("",!0)])])])]),O($)?m("",!0):(o(),d("div",ja,[a("div",$a,[a("a",Sa,[u(e,{icon:["fas","ellipsis-vertical"],class:"text-secondary"})]),t.value.miliku?(o(),d("ul",Ba,[a("li",null,[u(r,{to:{name:"kuis-laporan",params:{id:t.value.id}},class:"dropdown-item"},{default:F(()=>[...s[22]||(s[22]=[w(" Laporan",-1)])]),_:1},8,["to"])]),a("li",null,[a("a",{href:"#",class:"dropdown-item text-danger",onClick:s[6]||(s[6]=n=>l.unggahanDelete(t.value.id))},"Hapus")])])):m("",!0)])]))])]),a("div",Fa,[a("div",Ia,[a("div",Ta,[a("div",Na,[Q(a("textarea",{"onUpdate:modelValue":s[7]||(s[7]=n=>_.value.text=n),class:"upload-textarea",rows:"3",placeholder:"Apa tanggapan anda?"},null,512),[[X,_.value.text]]),c.value.tanggapan_input?(o(),h(C,{key:0,class:"spinner-overlay"})):m("",!0)]),a("div",Va,[a("small",{class:b(["char-counter",{warning:k.value.remaining_text<20}])},i(k.value.max_text-k.value.remaining_text)+"/"+i(k.value.max_text),3),a("div",Wa,[a("button",{type:"button",class:"upload-btn btn-send",disabled:c.value.tanggapan_input,onClick:s[8]||(s[8]=n=>W())},[u(e,{icon:["fas","plus"],class:"me-1"}),s[23]||(s[23]=w(" Kirim ",-1))],8,Aa)])])]),a("div",Ha,[(o(!0),d(v,null,Y(T.value,(n,H)=>(o(),d("div",{key:H,class:"comment-item mb-3"},[a("div",za,[a("div",La,[a("div",{class:"profile-picture-container cursor-pointer",onClick:z=>l.redirect(n.profil.username)},[n.profil.image_show?(o(),d("img",{key:0,src:n.profil.image_show,class:"rounded-circle object-fit-cover",width:"40",height:"40",alt:"Profile picture"},null,8,Ka)):(o(),d("div",{key:1,class:"rounded-circle d-flex align-items-center justify-content-center",style:N({backgroundColor:n.profil.color,width:"40px",height:"40px",color:"white",fontWeight:"bold"})},i(n.profil.nama_inisial),5))],8,Ra)]),a("div",Ma,[a("div",Ua,[a("div",null,[a("h6",qa,i(n.profil.nama_lengkap),1),a("small",Ea,i(n.created_at_for_humans),1)]),a("div",Ga,[a("button",Pa,[u(e,{icon:["fas","fa-ellipsis-v"]})]),a("ul",Ja,[a("li",null,[a("button",{class:"dropdown-item text-danger",onClick:z=>A(n.id)},[...s[24]||(s[24]=[a("i",{class:"fas fa-trash me-2"},null,-1),w("Hapus ",-1)])],8,Oa)])])])]),a("p",Qa,i(n.text||""),1)])])]))),128)),c.value.tanggapan?(o(),h(C,{key:0,class:"position-center"})):m("",!0)])])])])):(o(),d("div",Xa,[a("div",Ya,[a("div",Za,[c.value.tanggapan?(o(),h(C,{key:0,class:"position-center"})):m("",!0),s[25]||(s[25]=a("div",{class:"position-center"}," Tidak ada data atau sedang diarsipkan ",-1))])])]))])}}}),ds=aa(as,[["__scopeId","data-v-a448655a"]]);export{ds as default};
