import{_ as K}from"./BFU05jqY.js";import{_ as O}from"./DTCu01cd.js";import{_ as P}from"./BwT3rymJ.js";import{B as G,r as m,h as I,D as U,u as C,c as r,o as a,a as t,l as k,m as d,t as y,F as L,q as M,k as H,x as S,b as u,w as f,d as p,v as V,n as A,E as z,y as B}from"#entry";import{u as J}from"./CUA_6ykz.js";import{u as Q}from"./DH0XEKnV.js";const W={class:"row justify-content-center"},X={class:"col-sm-12 container-fluid"},Y={class:"card card-body form-400-center"},Z={key:0,class:"alert alert-danger"},ee={key:1,class:"text-success"},te={class:"position-relative"},oe={class:"mb-3"},se={class:"mb-3"},ae={class:"mb-3 text-center"},ne={class:"card card-body mb-3 text-center"},re={class:"d-flex justify-content-center"},le={class:"text-center d-block mt-2"},ie={class:"mt-3 d-flex justify-content-between"},we={__name:"login",setup(ce){const b=G(),T=b.public.AppName;J({title:"Login - "+T});const{deviceId:x}=Q(),_=m({}),n=m({}),g=I(),w=g.get("register");g.clear(),z();const l={email:"",password:""},v=m("");_.value={};const h=U("auth_token"),D=C().$axios,{$messaging:de,$getToken:ue,$deleteToken:pe,$onMessage:me,$isSupported:fe}=C();b.public.google.vapidKey,m(""),m("");async function F(){n.value.login=!0;const i=new FormData;for(var e in l)i.append(e,l[e]);i.append("device_id",x.value);try{let o=(await D({method:"post",url:"/login",data:i,headers:{Accept:"application/json, text/plain, */*"}})).data;o.token&&(h.value=o.token,g.set("profil",o.profil),await A("/home")),v.value=o.message,n.value.login=!1}catch(s){console.error(s.response?.data),_.value=s.response?.data?.errors,n.value.login=!1}}const R=async i=>{n.value.login=!0;const e=new FormData;e.append("token",i.credential),e.append("device_id",x.value);try{let o=(await D({method:"post",url:"/auth/google/callback",data:e})).data;o.token&&(h.value=o.token,g.set("profil",o.profil),await A("/home")),v.value=o.message,n.value.login=!1}catch(s){_.value=s.response?.data,n.value.login=!1}};return(i,e)=>{const s=K,o=V("GoogleLogin"),q=O,N=P,$=V("router-link");return a(),r("div",W,[t("div",X,[t("div",Y,[e[10]||(e[10]=t("h2",null,"Masuk",-1)),d(v)?(a(),r("p",Z,y(d(v)),1)):k("",!0),(a(!0),r(L,null,M(d(_),(c,j)=>(a(),r("div",{key:j},[(a(!0),r(L,null,M(c,(E,_e)=>(a(),r("p",{key:j,class:"alert alert-danger"},y(E),1))),128))]))),128)),d(w)?(a(),r("p",ee,y(d(w)),1)):k("",!0),t("form",te,[d(n).login?(a(),H(s,{key:0,class:"position-center"})):k("",!0),t("div",oe,[S(t("input",{type:"email",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=c=>l.email=c),placeholder:"Email",required:""},null,512),[[B,l.email]])]),t("div",se,[S(t("input",{type:"password",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=c=>l.password=c),placeholder:"Password",required:""},null,512),[[B,l.password]])]),e[9]||(e[9]=t("div",{class:"mb-3 form-check"},[t("input",{type:"checkbox",class:"form-check-input",id:"checkMeOut"}),t("label",{class:"form-check-label",for:"checkMeOut"},"Remember me")],-1)),t("div",ae,[t("button",{type:"button",onClick:e[2]||(e[2]=c=>F()),class:"btn btn-primary w-100"}," Submit ")]),t("div",ne,[u(q,null,{default:f(()=>[t("div",re,[u(o,{callback:R})])]),_:1}),t("small",le,[e[5]||(e[5]=p(" Dengan masuk, Anda setuju dengan ",-1)),u(N,{class:"text-primary",to:{name:"kebijakan-privasi"}},{default:f(()=>[...e[3]||(e[3]=[p(" Kebijakan Privasi ",-1)])]),_:1}),e[6]||(e[6]=p(" dan ",-1)),u(N,{class:"text-primary",to:{name:"syarat-dan-ketentuan"}},{default:f(()=>[...e[4]||(e[4]=[p(" Syarat & Ketentuan ",-1)])]),_:1})])]),t("div",ie,[u($,{to:{name:"forgot-password"}},{default:f(()=>[...e[7]||(e[7]=[p("Lupa Password?",-1)])]),_:1}),u($,{to:{name:"register"}},{default:f(()=>[...e[8]||(e[8]=[p("Registrasi",-1)])]),_:1})])])])])])}}};export{we as default};
