import{_ as Qa}from"./CptwQQoJ.js";import{_ as Za}from"./BTT6KBUK.js";import{_ as ka}from"./BFU05jqY.js";import{_ as ae}from"./QraDVNg7.js";import{_ as ee}from"./DBDT5h3r.js";import xa from"./WZwloc0T.js";import wa from"./ZiLk4lra.js";import{bA as Q,bB as q,bC as te,bD as ne,bE as Ca,bF as w,bG as oe,bH as se,bI as re,bJ as ie,bK as Ma,bL as le,bM as de,f as Da,s as fa,bN as ue,bO as ce,bP as pe,bQ as fe,u as $a,i as Sa,r as $,e as Pa,c as S,o as k,a as i,b as _,t as D,k as I,l as T,m as na,bR as ve,v as ja,I as oa,w as x,T as me,h as _e,j as he,a8 as be,M as ye,x as G,y as da,d as F,aj as ge,F as ua,q as ke,N as xe,z as ha,S as ca}from"#entry";import{_ as we}from"./DlAUqK2U.js";import Ce from"./W3EY5j9d.js";import Me from"./DS2vF2GC.js";import{u as De}from"./CUA_6ykz.js";import{s as $e}from"./BzLCLO6P.js";import{d as ba}from"./DoL2xymK.js";/* empty css        */import"./DZc5BzD_.js";import"./BWvFuTba.js";import"./C_eBRcTf.js";import"./DmzSdYQA.js";import"./CPlO9DUf.js";import"./ecGWoZ4Q.js";import"./BHWX8u6U.js";import"./B7LfFs11.js";import"./jc0MLXVe.js";import"./B4iXuu46.js";import"./CLs7nh7g.js";import"./DRsPoi7a.js";import"./Db4K0la1.js";import"./DWlM1jn-.js";import"./q5qRWjfX.js";import"./D44Yf3QM.js";import"./fs6baYA6.js";import"./CWybxcEt.js";import"./Bug4FVMO.js";import"./BTRELKMG.js";import"./CAzzG9wP.js";import"./ZhWAdK_X.js";import"./kCNMqWzW.js";import"./TrWR14PH.js";import"./BRlVjEi6.js";import"./BJ_RKzcj.js";import"./0BfNHR4B.js";import"./TFTh-Rt9.js";import"./Bfhb82ua.js";import"./BbPWr3wD.js";import"./kvmXFRvq.js";import"./BdZUV7Ng.js";import"./Dv2PrIyq.js";import"./Cvm_7BmW.js";import"./DY0j9i7W.js";import"./tK1yKuoH.js";import"./UGo1Dn0E.js";import"./Bkx-VIdb.js";import"./M5H1MJdm.js";/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var ya=(function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var a=window.screen;if(a)return(a.deviceXDPI||1)/(a.logicalXDPI||1)}return 1})(),X={toTextLines:function(a){var n=[],e;for(a=[].concat(a);a.length;)e=a.pop(),typeof e=="string"?n.unshift.apply(n,e.split(`
`)):Array.isArray(e)?a.push.apply(a,e):q(a)||n.unshift(""+e);return n},textSize:function(a,n,e){var t=[].concat(n),o=t.length,s=a.font,r=0,d;for(a.font=e.string,d=0;d<o;++d)r=Math.max(a.measureText(t[d]).width,r);return a.font=s,{height:o*e.lineHeight,width:r}},bound:function(a,n,e){return Math.max(a,Math.min(n,e))},arrayDiff:function(a,n){var e=a.slice(),t=[],o,s,r,d;for(o=0,r=n.length;o<r;++o)d=n[o],s=e.indexOf(d),s===-1?t.push([d,1]):e.splice(s,1);for(o=0,r=e.length;o<r;++o)t.push([e[o],-1]);return t},rasterize:function(a){return Math.round(a*ya)/ya}};function pa(a,n){var e=n.x,t=n.y;if(e===null)return{x:0,y:-1};if(t===null)return{x:1,y:0};var o=a.x-e,s=a.y-t,r=Math.sqrt(o*o+s*s);return{x:r?o/r:0,y:r?s/r:-1}}function Se(a,n,e,t,o){switch(o){case"center":e=t=0;break;case"bottom":e=0,t=1;break;case"right":e=1,t=0;break;case"left":e=-1,t=0;break;case"top":e=0,t=-1;break;case"start":e=-e,t=-t;break;case"end":break;default:o*=Math.PI/180,e=Math.cos(o),t=Math.sin(o);break}return{x:a,y:n,vx:e,vy:t}}var Pe=0,Ba=1,Aa=2,Ta=4,Ia=8;function Z(a,n,e){var t=Pe;return a<e.left?t|=Ba:a>e.right&&(t|=Aa),n<e.top?t|=Ia:n>e.bottom&&(t|=Ta),t}function je(a,n){for(var e=a.x0,t=a.y0,o=a.x1,s=a.y1,r=Z(e,t,n),d=Z(o,s,n),u,p,f;!(!(r|d)||r&d);)u=r||d,u&Ia?(p=e+(o-e)*(n.top-t)/(s-t),f=n.top):u&Ta?(p=e+(o-e)*(n.bottom-t)/(s-t),f=n.bottom):u&Aa?(f=t+(s-t)*(n.right-e)/(o-e),p=n.right):u&Ba&&(f=t+(s-t)*(n.left-e)/(o-e),p=n.left),u===r?(e=p,t=f,r=Z(e,t,n)):(o=p,s=f,d=Z(o,s,n));return{x0:e,x1:o,y0:t,y1:s}}function aa(a,n){var e=n.anchor,t=a,o,s;return n.clamp&&(t=je(t,n.area)),e==="start"?(o=t.x0,s=t.y0):e==="end"?(o=t.x1,s=t.y1):(o=(t.x0+t.x1)/2,s=(t.y0+t.y1)/2),Se(o,s,a.vx,a.vy,n.align)}var ea={arc:function(a,n){var e=(a.startAngle+a.endAngle)/2,t=Math.cos(e),o=Math.sin(e),s=a.innerRadius,r=a.outerRadius;return aa({x0:a.x+t*s,y0:a.y+o*s,x1:a.x+t*r,y1:a.y+o*r,vx:t,vy:o},n)},point:function(a,n){var e=pa(a,n.origin),t=e.x*a.options.radius,o=e.y*a.options.radius;return aa({x0:a.x-t,y0:a.y-o,x1:a.x+t,y1:a.y+o,vx:e.x,vy:e.y},n)},bar:function(a,n){var e=pa(a,n.origin),t=a.x,o=a.y,s=0,r=0;return a.horizontal?(t=Math.min(a.x,a.base),s=Math.abs(a.base-a.x)):(o=Math.min(a.y,a.base),r=Math.abs(a.base-a.y)),aa({x0:t,y0:o+r,x1:t+s,y1:o,vx:e.x,vy:e.y},n)},fallback:function(a,n){var e=pa(a,n.origin);return aa({x0:a.x,y0:a.y,x1:a.x+(a.width||0),y1:a.y+(a.height||0),vx:e.x,vy:e.y},n)}},U=X.rasterize;function Be(a){var n=a.borderWidth||0,e=a.padding,t=a.size.height,o=a.size.width,s=-o/2,r=-t/2;return{frame:{x:s-e.left-n,y:r-e.top-n,w:o+e.width+n*2,h:t+e.height+n*2},text:{x:s,y:r,w:o,h:t}}}function Ae(a,n){var e=n.chart.getDatasetMeta(n.datasetIndex).vScale;if(!e)return null;if(e.xCenter!==void 0&&e.yCenter!==void 0)return{x:e.xCenter,y:e.yCenter};var t=e.getBasePixel();return a.horizontal?{x:t,y:null}:{x:null,y:t}}function Te(a){return a instanceof Ma?ea.arc:a instanceof le?ea.point:a instanceof de?ea.bar:ea.fallback}function Ie(a,n,e,t,o,s){var r=Math.PI/2;if(s){var d=Math.min(s,o/2,t/2),u=n+d,p=e+d,f=n+t-d,v=e+o-d;a.moveTo(n,p),u<f&&p<v?(a.arc(u,p,d,-Math.PI,-r),a.arc(f,p,d,-r,0),a.arc(f,v,d,0,r),a.arc(u,v,d,r,Math.PI)):u<f?(a.moveTo(u,e),a.arc(f,p,d,-r,r),a.arc(u,p,d,r,Math.PI+r)):p<v?(a.arc(u,p,d,-Math.PI,0),a.arc(u,v,d,0,Math.PI)):a.arc(u,p,d,-Math.PI,Math.PI),a.closePath(),a.moveTo(n,e)}else a.rect(n,e,t,o)}function Re(a,n,e){var t=e.backgroundColor,o=e.borderColor,s=e.borderWidth;!t&&(!o||!s)||(a.beginPath(),Ie(a,U(n.x)+s/2,U(n.y)+s/2,U(n.w)-s,U(n.h)-s,e.borderRadius),a.closePath(),t&&(a.fillStyle=t,a.fill()),o&&s&&(a.strokeStyle=o,a.lineWidth=s,a.lineJoin="miter",a.stroke()))}function Ee(a,n,e){var t=e.lineHeight,o=a.w,s=a.x,r=a.y+t/2;return n==="center"?s+=o/2:(n==="end"||n==="right")&&(s+=o),{h:t,w:o,x:s,y:r}}function Ne(a,n,e){var t=a.shadowBlur,o=e.stroked,s=U(e.x),r=U(e.y),d=U(e.w);o&&a.strokeText(n,s,r,d),e.filled&&(t&&o&&(a.shadowBlur=0),a.fillText(n,s,r,d),t&&o&&(a.shadowBlur=t))}function Le(a,n,e,t){var o=t.textAlign,s=t.color,r=!!s,d=t.font,u=n.length,p=t.textStrokeColor,f=t.textStrokeWidth,v=p&&f,h;if(!(!u||!r&&!v))for(e=Ee(e,o,d),a.font=d.string,a.textAlign=o,a.textBaseline="middle",a.shadowBlur=t.textShadowBlur,a.shadowColor=t.textShadowColor,r&&(a.fillStyle=s),v&&(a.lineJoin="round",a.lineWidth=f,a.strokeStyle=p),h=0,u=n.length;h<u;++h)Ne(a,n[h],{stroked:v,filled:r,w:e.w,x:e.x,y:e.y+e.h*h})}var Ra=function(a,n,e,t){var o=this;o._config=a,o._index=t,o._model=null,o._rects=null,o._ctx=n,o._el=e};Q(Ra.prototype,{_modelize:function(a,n,e,t){var o=this,s=o._index,r=se(w([e.font,{}],t,s)),d=w([e.color,re.color],t,s);return{align:w([e.align,"center"],t,s),anchor:w([e.anchor,"center"],t,s),area:t.chart.chartArea,backgroundColor:w([e.backgroundColor,null],t,s),borderColor:w([e.borderColor,null],t,s),borderRadius:w([e.borderRadius,0],t,s),borderWidth:w([e.borderWidth,0],t,s),clamp:w([e.clamp,!1],t,s),clip:w([e.clip,!1],t,s),color:d,display:a,font:r,lines:n,offset:w([e.offset,4],t,s),opacity:w([e.opacity,1],t,s),origin:Ae(o._el,t),padding:ie(w([e.padding,4],t,s)),positioner:Te(o._el),rotation:w([e.rotation,0],t,s)*(Math.PI/180),size:X.textSize(o._ctx,n,r),textAlign:w([e.textAlign,"start"],t,s),textShadowBlur:w([e.textShadowBlur,0],t,s),textShadowColor:w([e.textShadowColor,d],t,s),textStrokeColor:w([e.textStrokeColor,d],t,s),textStrokeWidth:w([e.textStrokeWidth,0],t,s)}},update:function(a){var n=this,e=null,t=null,o=n._index,s=n._config,r,d,u,p=w([s.display,!0],a,o);p&&(r=a.dataset.data[o],d=oe(Ca(s.formatter,[r,a]),r),u=q(d)?[]:X.toTextLines(d),u.length&&(e=n._modelize(p,u,s,a),t=Be(e))),n._model=e,n._rects=t},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(a,n){var e=this,t=a.ctx,o=e._model,s=e._rects,r;this.visible()&&(t.save(),o.clip&&(r=o.area,t.beginPath(),t.rect(r.left,r.top,r.right-r.left,r.bottom-r.top),t.clip()),t.globalAlpha=X.bound(0,o.opacity,1),t.translate(U(n.x),U(n.y)),t.rotate(o.rotation),Re(t,s.frame,o),Le(t,o.lines,s.text,o),t.restore())}});var ze=Number.MIN_SAFE_INTEGER||-9007199254740991,Fe=Number.MAX_SAFE_INTEGER||9007199254740991;function J(a,n,e){var t=Math.cos(e),o=Math.sin(e),s=n.x,r=n.y;return{x:s+t*(a.x-s)-o*(a.y-r),y:r+o*(a.x-s)+t*(a.y-r)}}function ga(a,n){var e=Fe,t=ze,o=n.origin,s,r,d,u,p;for(s=0;s<a.length;++s)r=a[s],d=r.x-o.x,u=r.y-o.y,p=n.vx*d+n.vy*u,e=Math.min(e,p),t=Math.max(t,p);return{min:e,max:t}}function ta(a,n){var e=n.x-a.x,t=n.y-a.y,o=Math.sqrt(e*e+t*t);return{vx:(n.x-a.x)/o,vy:(n.y-a.y)/o,origin:a,ln:o}}var Ea=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};Q(Ea.prototype,{center:function(){var a=this._rect;return{x:a.x+a.w/2,y:a.y+a.h/2}},update:function(a,n,e){this._rotation=e,this._rect={x:n.x+a.x,y:n.y+a.y,w:n.w,h:n.h}},contains:function(a){var n=this,e=1,t=n._rect;return a=J(a,n.center(),-n._rotation),!(a.x<t.x-e||a.y<t.y-e||a.x>t.x+t.w+e*2||a.y>t.y+t.h+e*2)},intersects:function(a){var n=this._points(),e=a._points(),t=[ta(n[0],n[1]),ta(n[0],n[3])],o,s,r;for(this._rotation!==a._rotation&&t.push(ta(e[0],e[1]),ta(e[0],e[3])),o=0;o<t.length;++o)if(s=ga(n,t[o]),r=ga(e,t[o]),s.max<r.min||r.max<s.min)return!1;return!0},_points:function(){var a=this,n=a._rect,e=a._rotation,t=a.center();return[J({x:n.x,y:n.y},t,e),J({x:n.x+n.w,y:n.y},t,e),J({x:n.x+n.w,y:n.y+n.h},t,e),J({x:n.x,y:n.y+n.h},t,e)]}});function Na(a,n,e){var t=n.positioner(a,n),o=t.vx,s=t.vy;if(!o&&!s)return{x:t.x,y:t.y};var r=e.w,d=e.h,u=n.rotation,p=Math.abs(r/2*Math.cos(u))+Math.abs(d/2*Math.sin(u)),f=Math.abs(r/2*Math.sin(u))+Math.abs(d/2*Math.cos(u)),v=1/Math.max(Math.abs(o),Math.abs(s));return p*=o*v,f*=s*v,p+=n.offset*o,f+=n.offset*s,{x:t.x+p,y:t.y+f}}function Ue(a,n){var e,t,o,s;for(e=a.length-1;e>=0;--e)for(o=a[e].$layout,t=e-1;t>=0&&o._visible;--t)s=a[t].$layout,s._visible&&o._box.intersects(s._box)&&n(o,s);return a}function Oe(a){var n,e,t,o,s,r,d;for(n=0,e=a.length;n<e;++n)t=a[n],o=t.$layout,o._visible&&(d=new Proxy(t._el,{get:(u,p)=>u.getProps([p],!0)[p]}),s=t.geometry(),r=Na(d,t.model(),s),o._box.update(r,s,t.rotation()));return Ue(a,function(u,p){var f=u._hidable,v=p._hidable;f&&v||v?p._visible=!1:f&&(u._visible=!1)})}var Y={prepare:function(a){var n=[],e,t,o,s,r;for(e=0,o=a.length;e<o;++e)for(t=0,s=a[e].length;t<s;++t)r=a[e][t],n.push(r),r.$layout={_box:new Ea,_hidable:!1,_visible:!0,_set:e,_idx:r._index};return n.sort(function(d,u){var p=d.$layout,f=u.$layout;return p._idx===f._idx?f._set-p._set:f._idx-p._idx}),this.update(n),n},update:function(a){var n=!1,e,t,o,s,r;for(e=0,t=a.length;e<t;++e)o=a[e],s=o.model(),r=o.$layout,r._hidable=s&&s.display==="auto",r._visible=o.visible(),n|=r._hidable;n&&Oe(a)},lookup:function(a,n){var e,t;for(e=a.length-1;e>=0;--e)if(t=a[e].$layout,t&&t._visible&&t._box.contains(n))return a[e];return null},draw:function(a,n){var e,t,o,s,r,d;for(e=0,t=n.length;e<t;++e)o=n[e],s=o.$layout,s._visible&&(r=o.geometry(),d=Na(o._el,o.model(),r),s._box.update(d,r,o.rotation()),o.draw(a,d))}},We=function(a){if(q(a))return null;var n=a,e,t,o;if(te(a))if(!q(a.label))n=a.label;else if(!q(a.r))n=a.r;else for(n="",e=Object.keys(a),o=0,t=e.length;o<t;++o)n+=(o!==0?", ":"")+e[o]+": "+a[e[o]];return""+n},Ve={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:We,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},A="$datalabels",La="$default";function Ge(a,n){var e=a.datalabels,t={},o=[],s,r;return e===!1?null:(e===!0&&(e={}),n=Q({},[n,e]),s=n.labels||{},r=Object.keys(s),delete n.labels,r.length?r.forEach(function(d){s[d]&&o.push(Q({},[n,s[d],{_key:d}]))}):o.push(n),t=o.reduce(function(d,u){return ne(u.listeners||{},function(p,f){d[f]=d[f]||{},d[f][u._key||La]=p}),delete u.listeners,d},{}),{labels:o,listeners:t})}function va(a,n,e,t){if(n){var o=e.$context,s=e.$groups,r;n[s._set]&&(r=n[s._set][s._key],r&&Ca(r,[o,t])===!0&&(a[A]._dirty=!0,e.update(o)))}}function He(a,n,e,t,o){var s,r;!e&&!t||(e?t?e!==t&&(r=s=!0):r=!0:s=!0,r&&va(a,n.leave,e,o),s&&va(a,n.enter,t,o))}function Ke(a,n){var e=a[A],t=e._listeners,o,s;if(!(!t.enter&&!t.leave)){if(n.type==="mousemove")s=Y.lookup(e._labels,n);else if(n.type!=="mouseout")return;o=e._hovered,e._hovered=s,He(a,t,o,s,n)}}function Je(a,n){var e=a[A],t=e._listeners.click,o=t&&Y.lookup(e._labels,n);o&&va(a,t,o,n)}var qe={id:"datalabels",defaults:Ve,beforeInit:function(a){a[A]={_actives:[]}},beforeUpdate:function(a){var n=a[A];n._listened=!1,n._listeners={},n._datasets=[],n._labels=[]},afterDatasetUpdate:function(a,n,e){var t=n.index,o=a[A],s=o._datasets[t]=[],r=a.isDatasetVisible(t),d=a.data.datasets[t],u=Ge(d,e),p=n.meta.data||[],f=a.ctx,v,h,C,M,R,N,P,z;for(f.save(),v=0,C=p.length;v<C;++v)if(P=p[v],P[A]=[],r&&P&&a.getDataVisibility(v)&&!P.skip)for(h=0,M=u.labels.length;h<M;++h)R=u.labels[h],N=R._key,z=new Ra(R,f,P,v),z.$groups={_set:t,_key:N||La},z.$context={active:!1,chart:a,dataIndex:v,dataset:d,datasetIndex:t},z.update(z.$context),P[A].push(z),s.push(z);f.restore(),Q(o._listeners,u.listeners,{merger:function(O,H,sa){H[O]=H[O]||{},H[O][n.index]=sa[O],o._listened=!0}})},afterUpdate:function(a){a[A]._labels=Y.prepare(a[A]._datasets)},afterDatasetsDraw:function(a){Y.draw(a,a[A]._labels)},beforeEvent:function(a,n){if(a[A]._listened){var e=n.event;switch(e.type){case"mousemove":case"mouseout":Ke(a,e);break;case"click":Je(a,e);break}}},afterEvent:function(a){var n=a[A],e=n._actives,t=n._actives=a.getActiveElements(),o=X.arrayDiff(e,t),s,r,d,u,p,f,v;for(s=0,r=o.length;s<r;++s)if(p=o[s],p[1])for(v=p[0].element[A]||[],d=0,u=v.length;d<u;++d)f=v[d],f.$context.active=p[1]===1,f.update(f.$context);(n._dirty||o.length)&&(Y.update(n._labels),a.render()),delete n._dirty}};const Xe={class:"chart-container position-relative p-2"},Ye={class:"chart-title text-center mb-2"},Qe={class:"chart-wrapper"},Ze={class:"text-center"},at={key:0,class:"d-flex justify-content-center mt-4"},et=["innerHTML"],tt=["innerHTML"],nt=Da({__name:"ChartKoreksi",props:{data:{type:Object,required:!1}},setup(a){const n=a;fa(()=>n.data,v=>{f()},{deep:!0}),ue.register(ce,pe,fe,Ma,qe);const{$axiosAuth:e}=$a(),o=Sa()?.params?.id,s=$(!0),r=$(null),d=$({show:!1}),u=$([]),p={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{size:13}}},datalabels:{color:"#fff",font:{weight:"bold",size:14},formatter:(v,h)=>{h.chart.data.labels[h.dataIndex];const M=h.chart.data.datasets[0].data.reduce((N,P)=>N+P,0);return`${(v/M*100).toFixed(1)}%`}},tooltip:{callbacks:{label:v=>{const h=v.label||"",C=v.formattedValue||"";return`${h}: ${C}%`}}}}};async function f(){s.value=!0;const v=new FormData;v.append("unggahan_id",o),v.append("metode",n.data?.type?n.data?.type:"pan"),v.append("nilai_maks",n.data?.nilai_maks);try{const h=await e.post("/analisis/kuis/interprestasi-nilai",v);u.value=h.data?.data||[];const C=h.data?.persentase||{},M=["Sangat Baik","Baik","Cukup","Kurang","Sangat Kurang"],R=M.map(N=>C[N]||0);r.value={labels:M,datasets:[{label:"Persentase Nilai",data:R,backgroundColor:["#16a34a","#22c55e","#facc15","#f97316","#ef4444"],borderColor:"#fff",borderWidth:2}]}}catch(h){console.error(h.response?.data||h.message)}finally{s.value=!1}}return Pa(()=>{f()}),(v,h)=>{const C=ka,M=ja("font-awesome-icon"),R=wa,N=xa;return k(),S("div",null,[i("div",Xe,[i("div",Ye,[i("strong",null,D(n.data?.type?.toUpperCase()),1)]),i("div",Qe,[r.value?(k(),I(na(ve),{key:0,data:r.value,options:p},null,8,["data"])):T("",!0),s.value?(k(),I(C,{key:1,class:"position-center"})):T("",!0)])]),i("div",Ze,[i("button",{type:"button",class:"btn p-0 m-0",onClick:h[0]||(h[0]=P=>d.value.show=!d.value.show)},[d.value.show?(k(),I(M,{key:1,icon:["fas","angles-up"],class:oa(["text-secondary bounce",{active:d.value.show}])},null,8,["class"])):(k(),I(M,{key:0,icon:["fas","angles-down"],class:oa(["text-secondary bounce",{active:d.value.show}])},null,8,["class"]))])]),_(me,{name:"fade"},{default:x(()=>[d.value.show?(k(),S("div",at,[_(N,{value:u.value,sortMode:"single",customSort:!0,responsiveLayout:"scroll",class:"bordered-table w-90"},{empty:x(()=>[...h[1]||(h[1]=[i("div",{class:"text-center text-muted p-4"},"Belum ada data",-1)])]),default:x(()=>[_(R,{field:"nama_lengkap",header:"Nama",sortable:""},{body:x(({data:P})=>[i("span",{innerHTML:P.nama_lengkap},null,8,et)]),_:1}),_(R,{field:"kategori",header:"Kategori",sortable:""},{body:x(({data:P})=>[i("span",{innerHTML:P.kategori},null,8,tt)]),_:1})]),_:1},8,["value"])])):T("",!0)]),_:1})])}}}),ot=Object.assign(we(nt,[["__scopeId","data-v-fbb8d182"]]),{__name:"ChartKoreksi"}),st={class:"pb-5 pt-3 pt-sm-3"},rt={class:"position-relative"},it={class:"row justify-content-between mb-3"},lt={class:"col-12 col-sm-4"},dt={class:"search-bar-sm mb-3"},ut={class:"col-auto"},ct={key:0},pt={key:1},ft=["disabled"],vt={style:{"min-height":"500px !important"}},mt=["href"],_t=["href"],ht={class:"col-auto"},bt={key:0,class:"profil-img avatar-50 lazy-img"},yt=["onClick"],gt={class:"col-auto"},kt={key:0,class:"profil-img avatar-50 lazy-img"},xt={class:"position-relative"},wt=["value","onInput"],Ct={class:"position-relative m-0 p-0"},Mt={class:"btn-group me-3",role:"group","aria-label":"Aksi Laporan"},Dt=["onClick"],$t={class:"text-center"},St={class:"text-muted"},Pt=["onClick"],jt=["onClick"],Bt={class:"right-top m-0 p-0"},At={class:"dropdown"},Tt={role:"button","data-bs-toggle":"dropdown"},It={class:"dropdown-menu shadow-sm"},Rt=["onClick"],Et={class:"mt-2"},Nt={class:"row justify-content-between"},Lt={class:"col-4 mb-2"},zt={class:"col-auto"},Ft={class:"col-auto"},Ut={class:"modal fade",id:"PelanggaranModal",tabindex:"-1"},Ot={class:"modal-dialog modal-lg"},Wt={class:"modal-content"},Vt={class:"modal-header"},Gt={class:"modal-title",id:"exampleModalLabel"},Ht={class:"modal-body position-relative",style:{"min-height":"300px"}},Kt={key:0},Jt=["src"],qt={key:1,class:"table-head-sticky"},Xt={class:"table table-bordered"},Yt={class:"text-success"},Qt={class:"text-success"},Zt={class:"text-success"},an=["onClick"],en={class:"modal fade",id:"ModalCatatan",tabindex:"-1"},tn={class:"modal-dialog"},nn={class:"modal-content position-relative"},on={class:"modal-body"},sn={class:"modal-footer"},rn={class:"modal fade",id:"ModalChart",tabindex:"-1"},ln={class:"modal-dialog"},dn={class:"modal-content position-relative"},un={class:"modal-body",style:{"min-height":"100px"}},cn={type:"button",class:"btn right-top","data-bs-dismiss":"modal","aria-label":"Close"},pn={key:0},vo=Da({__name:"index",setup(a){De({title:"Koreksi - Kuis"});const n=ba(()=>{R()},1e3),e=_e(),t=Sa();he();const o=$({}),s=t?.params?.id,r=$({pelanggaran:!1,show:!1,catatan:!1,nilai:!1}),d=$(""),u=$({search:"",page:1,page_list:100,sort_by:"desc",sort_name:"id"}),p=$({laporan_masalah_count:0}),f=$({});$({name:"",sort:"desc"});const v=$({aksi:"",foto:"",pelanggaran:[],nilai:!1}),h=$({}),{$axiosAuth:C}=$a(),M=$({show:!1,type:"pan",table:!1,nilai_maks:100});async function R(){r.value.show=!0;const m=new FormData;m.append("page",u.value.page),m.append("page_list",u.value.page_list),m.append("search",u.value.search),m.append("sort_by",u.value.sort_by),m.append("sort_name",u.value.sort_name),m.append("unggahan_id",s),d.value="/unggahan/kuis/koreksi";try{const b=(await C({method:"post",url:d.value,data:m})).data;p.value=b.kuis,v.value.nilai=p.value.nilai,f.value=b.data,r.value.show=!1,M.value.show=!0}catch(l){console.error(l.response?.data||l.message),r.value.show=!1}}fa(u,()=>{n()},{deep:!0});function N(m,l){P({jawab_id:m?.id}),v.value={index:l,aksi:"pelanggaran"}}async function P(m){r.value.pelanggaran=!0;const l=new FormData;l.append("unggahan_id",s),l.append("jawab_id",m?.jawab_id);try{let y=(await C({method:"post",url:"/unggahan/kuis/koreksi/pelanggaran",data:l})).data;v.value.aksi="pelanggaran",v.value.pelanggaran=y?.data;let B=v.value.index;f.value?.data?.[B]&&(f.value.data[B].pelanggaran_jumlah=y?.count??0)}catch(b){console.error(b.response?.data||b.message)}r.value.pelanggaran=!1}async function z(m){if((await ca.fire({title:"Apakah Anda yakin?",text:"Data ini tidak dapat dikembalikan setelah dihapus.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"})).isConfirmed){r.value.pelanggaran=!0;const b=new FormData;b.append("unggahan_id",s),b.append("jawab_id",m?.jawab_id),b.append("pelanggaran_id",m?.id),b.append("_method","Delete");try{(await C({method:"post",url:"/unggahan/kuis/koreksi/pelanggaran/delete",data:b})).data?.status==!0&&await P({jawab_id:m?.jawab_id})}catch(y){console.error(y.response?.data||y.message)}r.value.pelanggaran=!1}}function O(m){v.value={aksi:"swafoto",image:m}}async function H(m){r.value.laporan=!0;const l=new FormData;l.append("id",m);try{const b=await C({method:"post",url:"/excel/laporan/kuis",data:l,responseType:"blob"});let y="laporan.xlsx";const B=b.headers["content-disposition"];if(B&&B.includes("filename=")){const W=B.match(/filename="?(.+?)"?$/);W&&W[1]&&(y=W[1])}const j=new Blob([b.data]),g=window.URL.createObjectURL(j),E=document.createElement("a");E.href=g,E.download=y,E.click(),window.URL.revokeObjectURL(g),r.value.laporan=!1}catch(b){console.error("Gagal download:",b.response),r.value.laporan=!1}}async function sa(m){h.value=m}async function za(m,l,b,y){if((await ca.fire({title:"Apakah Anda yakin ingin mengganti menjadi Mulai ?",text:"Proses tidak dapat dibatalkan.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Ganti!",cancelButtonText:"Batal"})).isConfirmed)try{let j=f.value.data[y];j&&(j.loading=!0);let g=m.target.value;const E=new FormData;E.append("value",g),E.append("kuis_id",l),E.append("jawab_id",b);let la=(await C({method:"post",url:"/unggahan/kuis/koreksi/status/update",data:E})).data;j&&(j.loading=!1),la?.status==!0&&(j.status=g)}catch(j){item&&(item.loading=!1),console.error(j.response?.data||j.message)}}async function Fa(){r.value.catatan=!0;const m=new FormData;m.append("kuis_id",h.value.kuis_id),m.append("jawab_id",h.value.id),m.append("catatan",h.value.catatan);try{const l=await C({method:"post",url:"/unggahan/kuis/koreksi/catatan/store",data:m});r.value.catatan=!1,Va()}catch(l){console.error(l.response?.data||l.message),r.value.catatan=!1}}async function Ua(m){r.value.nilai=!0;const l=new FormData;l.append("kuis_id",m);try{let y=(await C({method:"post",url:"/unggahan/kuis/nilai",data:l})).data;v.value.nilai=y.data,r.value.nilai=!1}catch(b){console.error(b.response?.data||b.message),r.value.nilai=!1}}$(null);const ra=$(!1),K=$({from:"admin",show:!1,loading:!1,nama:"",jawab_id:"",pesan:"",list:[]});$("");async function Oa(m){ra.value=!0,K.value={from:"admin",show:!0,loading:!0,profil_id:m.profil?.id,nama:m.profil?.nama_lengkap,image_show:m.profil?.image_show,nama_inisial:m.profil?.nama_inisial,color:m.profil?.color,jawab_id:m.id,pesan:"",list:[]};const l=new FormData;l.append("jawab_id",m.id);try{let y=(await C({method:"post",url:"/pesan/index",data:l})).data;K.value.loading=!1,K.value.list=y.data}catch(b){console.error(b.response?.data||b.message),r.value.pesan=!1}K.value.loading=!1}function Wa(m){return m?m.charAt(0).toUpperCase()+m.slice(1):""}async function Va(){await document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(m=>m.click())}const Ga=ba(async()=>{o.value=await e.get("profil")?.data},300);fa(()=>na(e.get("profil")),(m,l)=>{o.value=m?.data},{deep:!0});let ia=null;Pa(()=>{Ga(),n(),ia=$e(()=>{n()},3e5)}),be(()=>{}),ye(()=>{ia&&clearInterval(ia)});function Ha(){M.value.nilai_maks=100}function Ka(){ra.value=!1}function ma(m){M.value.type=m}async function Ja(m){if((await ca.fire({title:"Apakah Anda yakin?",text:"Data ini tidak dapat dikembalikan setelah dihapus.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"})).isConfirmed){r.value.show=!0;const b=new FormData;b.append("jawab_id",m),b.append("_method","delete");try{let B=(await C({method:"post",url:"/unggahan/kuis/koreksi/jawab/delete",data:b})).data;console.log(B),n(),r.value.show=!1}catch(y){console.error(y.response?.data||y.message),r.value.show=!1}}}return(m,l)=>{const b=Qa,y=ja("font-awesome-icon"),B=Za,j=ka,g=wa,E=Me,W=Ce,la=ae,qa=xa,Xa=ee,Ya=ot,_a=xe("lazy");return k(),S("div",null,[ra.value?(k(),I(b,{key:0,data:K.value,onModal_close:Ka},null,8,["data"])):T("",!0),l[29]||(l[29]=i("h2",{class:"pb-2 mb-4"}," Laporan ",-1)),i("div",st,[i("div",rt,[i("div",it,[i("div",lt,[i("div",dt,[G(i("input",{type:"text",placeholder:"cari","onUpdate:modelValue":l[0]||(l[0]=c=>u.value.search=c),style:{"max-width":"300px"}},null,512),[[da,u.value.search]])])]),i("div",ut,[i("button",{type:"button",onClick:l[1]||(l[1]=c=>Ha()),class:"btn-outline-purple rounded-pill position-relative me-1","data-bs-toggle":"modal","data-bs-target":"#ModalChart"},[_(y,{icon:["fa","chart-pie"]}),l[11]||(l[11]=F(" Analisa ",-1))]),_(B,{class:"btn-outline-purple rounded-pill position-relative p-2 me-1",to:{name:"kuis-laporan-masalah",params:{id:na(s)}}},{default:x(()=>[_(y,{icon:["fa","circle-exclamation"],class:"text-purple-pink"}),F(" Masalah ("+D(p.value.laporan_masalah_count)+") ",1)]),_:1},8,["to"]),i("button",{type:"button",class:oa([v.value.nilai?"btn-success":"","btn-outline-purple rounded-pill position-relative me-1"]),onClick:l[2]||(l[2]=c=>Ua(p.value.id))},[v.value.nilai?(k(),S("span",ct,[_(y,{icon:["fa","eye"]}),l[12]||(l[12]=F(" Nilai tampil ",-1))])):(k(),S("span",pt,[_(y,{icon:["fa","eye-slash"]}),l[13]||(l[13]=F(" Nilai sembunyi ",-1))])),r.value.nilai?(k(),I(j,{key:2,message:"",class:"position-center"})):T("",!0)],2),i("button",{type:"button",class:"btn-outline-purple rounded-pill position-relative",onClick:l[3]||(l[3]=c=>H(p.value.id)),disabled:!p.value.id},[l[14]||(l[14]=F("Unduh laporan ",-1)),r.value.laporan?(k(),I(j,{key:0,message:"",class:"position-center"})):T("",!0)],8,ft)])]),i("div",vt,[r.value.show?(k(),I(j,{key:0,class:"position-center"})):T("",!0),_(qa,{value:f.value.data,responsiveLayout:"scroll",class:"bordered-table",layout:"fixed"},{empty:x(()=>[...l[15]||(l[15]=[i("div",{class:"text-center text-muted p-4"},"Belum ada data",-1)])]),default:x(()=>[_(W,{type:"header"},{default:x(()=>[_(E,null,{default:x(()=>[_(g,{header:"Nama",rowspan:2,style:{width:"25%"}}),_(g,{header:"Profil",rowspan:2,style:{width:"25%"}}),_(g,{header:"Swafoto",rowspan:2}),_(g,{header:"Status",rowspan:2,style:{width:"50px"}}),_(g,{header:"Jumlah Pilihan Ganda Jawab Benar",colspan:3,style:{"text-align":"center !important"}}),_(g,{header:"Skor Pilihan Ganda",rowspan:2}),_(g,{header:"Skor Uraian",rowspan:2}),_(g,{header:"Nilai",rowspan:2}),_(g,{header:"Action",rowspan:2,style:{width:"450px"}})]),_:1}),_(E,null,{default:x(()=>[_(g,{header:"Rendah"}),_(g,{header:"Sedang"}),_(g,{header:"Tinggi"})]),_:1})]),_:1}),_(g,null,{body:x(({data:c})=>[_(B,{to:{name:"profil",params:{user:c.profil.username}},custom:""},{default:x(({href:L})=>[i("a",{href:L,target:"_blank",rel:"noopener noreferrer",class:"row align-items-start"},[i("strong",null,D(c.profil?.nama_lengkap),1)],8,mt)]),_:2},1032,["to"])]),_:1}),_(g,null,{body:x(({data:c})=>[_(B,{to:{name:"profil",params:{user:c.profil.username}},custom:""},{default:x(({href:L})=>[i("a",{href:L,target:"_blank",rel:"noopener noreferrer",class:"row align-items-start"},[i("div",ht,[c.profil?.image_show?G((k(),S("img",bt,null,512)),[[_a,c.profil?.image_show]]):(k(),S("div",{key:1,style:ha({backgroundColor:c.profil.color}),class:"avatar-50 profile-img"},D(c.profil?.nama_inisial),5))])],8,_t)]),_:2},1032,["to"])]),_:1}),_(g,null,{body:x(({data:c})=>[i("div",{class:"row align-items-start",onClick:L=>O(c.swafoto_show),"data-bs-toggle":"modal","data-bs-target":"#PelanggaranModal"},[i("div",gt,[c.swafoto_show?G((k(),S("img",kt,null,512)),[[_a,c.swafoto_show]]):(k(),S("div",{key:1,style:ha({backgroundColor:c.profil.color}),class:"avatar-50 profile-img"},null,4))])],8,yt)]),_:1}),_(g,null,{body:x(({data:c,index:L})=>[i("div",xt,[i("select",{class:oa([c.status=="selesai"?"border-success":"border-danger","rounded-pill border border-success form-control form-control-sm m-0 text-center"]),value:c.status,style:{width:"80px"},onInput:V=>za(V,c.kuis_id,c.id,L)},[...l[16]||(l[16]=[i("option",{value:""},null,-1),i("option",{value:"mulai"},"Mulai",-1),i("option",{value:"selesai"},"Selesai",-1)])],42,wt),c?.loading?(k(),I(la,{key:0,class:"position-center"})):T("",!0)])]),_:1}),_(g,{field:"rendah"},{body:x(({data:c})=>[F(D(c.jawaban_rendah_count),1)]),_:1}),_(g,{field:"sedang"},{body:x(({data:c})=>[F(D(c.jawaban_sedang_count),1)]),_:1}),_(g,{field:"tinggi"},{body:x(({data:c})=>[F(D(c.jawaban_tinggi_count),1)]),_:1}),_(g,null,{body:x(({data:c})=>[i("pre",null,D(c.nilai_pilihan_ganda),1)]),_:1}),_(g,null,{body:x(({data:c})=>[i("pre",null,D(c.nilai_uraian),1)]),_:1}),_(g,null,{body:x(({data:c})=>[i("pre",null,D(c.nilai_total),1)]),_:1}),_(g,null,{body:x(({data:c,index:L})=>[i("div",Ct,[i("div",Mt,[i("button",{type:"button",class:"btn btn-outline-custom me-1 d-flex flex-column align-items-center justify-content-center",onClick:V=>N(c,L),"data-bs-toggle":"modal","data-bs-target":"#PelanggaranModal"},[_(y,{icon:["fa","triangle-exclamation"],class:"text-purple-pink mb-1"}),i("div",$t,[l[17]||(l[17]=i("span",null,"Pelanggaran",-1)),i("span",St,"("+D(c?.pelanggaran_jumlah)+")",1)])],8,Dt),i("button",{type:"button",class:"btn btn-outline-custom me-1 d-flex flex-column align-items-center justify-content-center",onClick:V=>Oa(c)},[_(y,{icon:["fa","comments"],class:"text-purple-pink mb-1"}),l[18]||(l[18]=i("div",null,"Obrolan",-1))],8,Pt),_(B,{to:"/home/kuis/"+na(s)+"/koreksi/"+c.id,class:"btn btn-outline-custom me-1 d-flex flex-column align-items-center justify-content-center"},{default:x(()=>[_(y,{icon:["fa","file-pen"],class:"text-purple-pink mb-1"}),l[19]||(l[19]=i("div",null,"Koreksi",-1))]),_:1},8,["to"]),i("button",{type:"button",class:"btn btn-outline-custom me-1 d-flex flex-column align-items-center justify-content-center","data-bs-toggle":"modal",onClick:V=>sa(c),"data-bs-target":"#ModalCatatan"},[_(y,{icon:["fa","note-sticky"],class:"text-purple-pink mb-1"}),l[20]||(l[20]=i("div",null,"Catatan",-1))],8,jt)]),i("div",Bt,[i("div",At,[i("a",Tt,[_(y,{icon:["fas","ellipsis-vertical"],class:"text-secondary"})]),i("ul",It,[i("li",null,[i("a",{href:"#",class:"dropdown-item text-danger d-flex align-items-center gap-2",onClick:V=>Ja(c.id)},[_(y,{icon:["fas","trash"]}),l[21]||(l[21]=i("span",null,"Hapus",-1))],8,Rt)])])])])])]),_:1})]),_:1},8,["value"])]),i("div",Et,[i("div",Nt,[i("div",Lt,[G(i("select",{"onUpdate:modelValue":l[4]||(l[4]=c=>u.value.page_list=c),style:{"border-radius":"5px"}},[...l[22]||(l[22]=[i("option",{value:"5"}," 5",-1),i("option",{value:"10"}," 10",-1),i("option",{value:"50"}," 50",-1),i("option",{value:"100"}," 100",-1)])],512),[[ge,u.value.page_list]])]),i("div",zt,D(f.value.to)+" dari "+D(f.value.total),1),i("div",Ft,[_(Xa,{modelValue:u.value.page,"onUpdate:modelValue":l[5]||(l[5]=c=>u.value.page=c),"total-items":f.value.total?f.value.total:1,"items-per-page":f.value.per_page?f.value.per_page:1},null,8,["modelValue","total-items","items-per-page"])])])])])]),i("div",Ut,[i("div",Ot,[i("div",Wt,[i("div",Vt,[i("h5",Gt,D(Wa(v.value.aksi)),1),l[23]||(l[23]=i("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),i("div",Ht,[v.value.aksi=="swafoto"?(k(),S("div",Kt,[v.value.image?(k(),S("img",{key:0,src:v.value.image,style:{width:"100%"}},null,8,Jt)):T("",!0)])):(k(),S("div",qt,[i("table",Xt,[l[24]||(l[24]=i("thead",null,[i("tr",null,[i("th",null,"No"),i("th",null,"Waktu"),i("th",null,"Jenis"),i("th",null,"Aksi")])],-1)),i("tbody",null,[(k(!0),S(ua,null,ke(v.value.pelanggaran,(c,L)=>(k(),S("tr",{key:L},[c.aksi=="Masuk"?(k(),S(ua,{key:0},[i("td",Yt,[_(y,{icon:["fas","angles-right"]})]),i("td",Qt,D(c.waktu),1),i("td",Zt,D(c.aksi),1)],64)):(k(),S(ua,{key:1},[i("td",null,D(c.nomor),1),i("td",null,D(c.waktu),1),i("td",null,D(c.aksi),1)],64)),i("td",null,[i("button",{type:"button",class:"btn btn-sm",onClick:V=>z(c)},[_(y,{icon:["fas","circle-xmark"],class:"text-danger"})],8,an)])]))),128))])])])),r.value.pelanggaran?(k(),I(j,{key:2,class:"position-center"})):T("",!0)]),l[25]||(l[25]=i("div",{class:"modal-footer"},[i("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])]),i("div",en,[i("div",tn,[i("div",nn,[l[27]||(l[27]=i("div",{class:"modal-header"},[i("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Catatan Akhir Penilaian"),i("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),i("div",on,[G(i("textarea",{"onUpdate:modelValue":l[6]||(l[6]=c=>h.value.catatan=c),class:"form-control"}," ",512),[[da,h.value.catatan]])]),i("div",sn,[l[26]||(l[26]=i("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Batal",-1)),i("button",{type:"button",class:"btn btn-primary",onClick:l[7]||(l[7]=c=>Fa())},"Simpan")]),r.value.catatan?(k(),I(j,{key:0,class:"position-center"})):T("",!0)])])]),i("div",rn,[i("div",ln,[i("div",dn,[i("div",un,[i("button",cn,[_(y,{class:"fa-2x",icon:["fas","circle-xmark"]})]),i("button",{type:"button",class:"btn btn-sm btn-primary me-2 rounded-pill",onClick:l[8]||(l[8]=c=>ma("pan"))},"PAN"),i("button",{type:"button",class:"btn btn-sm btn-success me-3 rounded-pill",onClick:l[9]||(l[9]=c=>ma("normal"))},"Normal"),M.value.type=="normal"?(k(),S("span",pn,[l[28]||(l[28]=F(" Nilai Maks. ",-1)),G(i("input",{type:"number",class:"rounded-pill pe-2 ps-2","onUpdate:modelValue":l[10]||(l[10]=c=>M.value.nilai_maks=c)},null,512),[[da,M.value.nilai_maks]])])):T("",!0),M.value.show?(k(),I(Ya,{key:1,data:M.value},null,8,["data"])):T("",!0)])])])])])}}});export{vo as default};
