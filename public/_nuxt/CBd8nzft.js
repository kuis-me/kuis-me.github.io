import{bY as u,h as f,u as l,D as m,n as a,bZ as s}from"#entry";const h=u(async e=>{let t,i;if(e.path.match(/\.(png|jpg|jpeg|gif|svg|ico|css|js|webmanifest)$/i))return;const n=f(),o=l().$axiosAuth;if(!m("auth_token").value)return e.name!=="login"?a("/login"):void 0;try{const{data:r}=([t,i]=s(()=>o.post("/auth")),t=await t,i(),t);if(!r.auth)return n.clear("profil"),e.name!=="login"?a("/login"):void 0;if([t,i]=s(()=>n.set("profil",{status:!0,data:r.profil})),await t,i(),!r.email_verified)return e.name!=="email-verify"?a("/email-verify"):void 0;if(e.name==="email-verify")return a("/home");if(e.name!=="home")return a("/home")}catch{if(n.clear("profil"),e.name!=="login")return a("/login")}});export{h as default};
