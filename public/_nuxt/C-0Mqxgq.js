import{_ as L}from"./DBDT5h3r.js";import{f as H,h as K,j as P,i as U,r as n,u as j,s as b,e as E,c,o as r,a as t,l as C,x,y as G,k as I,F as B,q as V,b as g,t as _,d as R,v as X,L as q,aj as Y,S as z}from"#entry";import{_ as J}from"./BFU05jqY.js";import{u as O}from"./CUA_6ykz.js";import{d as Q}from"./DoL2xymK.js";/* empty css        */import"./DlAUqK2U.js";const W={style:{"min-height":"600px"}},Z={class:"search-bar-2 mb-3 position-relative"},ee={class:"form-check"},te=["checked"],ae={class:"position-relative"},oe={class:"card shadow-sm"},se={class:"card-body"},ne={class:"d-flex align-items-center gap-3"},le={class:"form-check mb-0"},ie=["onChange","checked"],re={class:"d-flex align-items-center"},ce={class:"me-2"},de=["src","onClick"],ue=["onClick"],pe=["onClick"],me={class:"text-muted small"},ve={class:"cursor-pointer"},he={class:"btn-group position-relative me-3"},_e={type:"button",class:"btn p-0","data-bs-toggle":"dropdown","aria-expanded":"false"},ge={class:"dropdown-menu dropdown-menu-end mt-2","data-bs-auto-close":"outside",style:{width:"300px","max-width":"90vw","min-height":"100px"}},ke={class:"mb-2"},fe=["value","textContent"],we=["onClick"],ye={class:"position-absolute top-0 end-0 m-4"},be={class:"dropdown"},Ce={role:"button","data-bs-toggle":"dropdown"},xe={class:"dropdown-menu"},Be=["onClick"],Ve={key:1},De={key:0,class:"m-2 float-end"},Ke=H({__name:"index",props:{loading:{type:Boolean,default:!1}},setup(Te){O({title:"Pengikut"});const D=Q(()=>{h()},300);K(),P(),U().params.user,n(1),n({page:1}),n({});const s=n({}),u=n({});n("");const{$axiosAuth:m}=j(),v=n({}),k=n(["X-TITL-1","X-TITL-2"]),p=n({page:1});async function T(){try{let a=await m({method:"post",url:"/other/group"});k.value=a.data?.data?.kategori}catch(a){console.error(a.response?.data||a.message)}}async function h(){u.value.unggahan=!0;try{const e=new FormData;let l=p.value;for(var a in l)e.append(a,l[a]);let o=(await m({method:"post",url:"/hubungan/pengikut/acc",data:e})).data;s.value=o.data,u.value.unggahan=!1}catch(e){console.log(e.response.data),u.value.unggahan=!1}}b(p.value,async(a,e)=>{D()},{deep:!0});async function $(a){const e=await z.fire({title:"Apakah Anda yakin?",text:"Proses ini tidaak dapat dibatalkan",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hentikan!",cancelButtonText:"Batal"});if(e.isConfirmed){u.value.follow=!0;const l=new FormData;l.append("username",a);try{const d=await m({method:"post",url:"/hubungan/pengikut/delete",data:l});e.value=d.data,u.value.follow=!1,h()}catch(d){console.error(d.response?.data||d.message),u.value.follow=!1}}}async function M(a){const e=new FormData;e.append("profil_id",a),e.append("kategori_id",v.value.kategori.id),e.append("kategori",v.value.kategori.text);try{let d=(await m({method:"post",url:"/hubungan/pengikut/acc/kategori/store",data:e})).data;h()}catch(l){console.log(l.response.data)}}E(()=>{h(),T()});const S=n({}),f=n(!1),w=n(0);async function F(){s.value.data.forEach(e=>e.checked=!e.checked)}async function A(a,e){s.value.data[e].checked=!s.value.data[e].checked}return b(s,()=>{const a=s.value.data.flat();w.value=a.filter(e=>e.checked).length,f.value=w.value===a.length,S.value=a.flat().filter(e=>e.checked).map(e=>e.id)},{deep:!0}),(a,e)=>{const l=X("font-awesome-icon"),d=L;return r(),c("div",W,[t("div",Z,[x(t("input",{type:"text",class:"border-0","onUpdate:modelValue":e[0]||(e[0]=o=>p.value.cari=o),placeholder:"Cari mengikuti"},null,512),[[G,p.value.cari]])]),t("div",ee,[t("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckChecked",onChange:e[1]||(e[1]=o=>F()),checked:f.value},null,40,te),e[5]||(e[5]=t("label",{class:"form-check-label",for:"flexCheckChecked"}," Semua ",-1))]),t("div",ae,[s.value.data?.length>0?(r(!0),c(B,{key:0},V(s.value.data,(o,y)=>(r(),c("div",{class:"list-group-item position-relative mb-3",key:y},[t("div",oe,[t("div",se,[t("div",ne,[t("div",le,[t("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckChecked",onChange:i=>A(i,y),checked:o.checked},null,40,ie)]),t("div",re,[t("div",ce,[o.image_show?(r(),c("img",{key:0,src:o.image_show,class:"profil-img avatar-50",onClick:i=>a.redirect(o.username)},null,8,de)):(r(),c("div",{key:1,class:"profil-img avatar-50",onClick:i=>a.redirect(o.username)},null,8,ue))]),t("div",null,[t("div",{class:"fw-bold cursor-pointer",onClick:i=>a.redirect(o.username)},_(o.nama_lengkap),9,pe),t("div",me,_(o.created_at_for_humans),1),t("div",ve,[t("div",he,[t("button",_e,[R("Kategori: "+_(o.nama_kategori)+" ",1),g(l,{icon:["fas","pencil"]})]),t("div",ge,[t("div",{onClick:e[3]||(e[3]=q(()=>{},["stop"])),class:"p-2"},[e[6]||(e[6]=t("div",{class:"text-center"},"Masukan kategori",-1)),t("div",ke,[x(t("select",{class:"form-control form-control-sm","onUpdate:modelValue":e[2]||(e[2]=i=>v.value.kategori=i)},[(r(!0),c(B,null,V(k.value,(i,N)=>(r(),c("option",{key:N,value:i,textContent:_(i.text)},null,8,fe))),128))],512),[[Y,v.value.kategori]])]),t("button",{type:"button",class:"btn-outline-custom text-end",onClick:i=>M(o.id)},"Ganti",8,we)])])])])])])])]),t("div",ye,[t("div",be,[t("a",Ce,[g(l,{icon:["fas","ellipsis-vertical"],class:"text-secondary"})]),t("ul",xe,[t("li",null,[t("a",{href:"#",class:"dropdown-item",onClick:i=>$(o.username)},"Hapus",8,Be)])])])])])]))),128)):(r(),c("div",Ve,[...e[7]||(e[7]=[t("div",{class:"card shadow-sm"},[t("div",{class:"card-body position-relative",style:{"min-height":"200px"}},[t("div",{class:"position-center"},"Belum ada data")])],-1)])])),u.value.unggahan?(r(),I(J,{key:2,class:"position-center"})):C("",!0)]),s.value.total>s.value.per_page?(r(),c("div",De,[g(d,{modelValue:p.value.page,"onUpdate:modelValue":e[4]||(e[4]=o=>p.value.page=o),"total-items":s.value.total?s.value.total:1,"items-per-page":s.value.per_page?s.value.per_page:1},null,8,["modelValue","total-items","items-per-page"])])):C("",!0)])}}});export{Ke as default};
