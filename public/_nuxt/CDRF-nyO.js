import{_ as $}from"./WcTcfmJ2.js";import{_ as O}from"./DTCu01cd.js";import{_ as Q}from"./BTT6KBUK.js";import{_ as W}from"./DlAUqK2U.js";import{c as t,o as i,d as r,a as e,F as E,f as G,u as X,i as Y,j as Z,B as ee,r as o,e as ae,b as u,w as x,t as c,l as m,v as se,q as te,m as ie,I as ne}from"#entry";import{u as le}from"./CUA_6ykz.js";import"./BzLCLO6P.js";import"./QraDVNg7.js";import"./BFU05jqY.js";import"./DoL2xymK.js";const oe={};function ue(P,k){return i(),t(E,null,[k[0]||(k[0]=r(" klik untuk mengerjakan ",-1)),k[1]||(k[1]=e("button",{type:"button",class:"btn btn-success"},"kerjakan",-1))],64)}W(oe,[["render",ue]]);const re={class:"row justify-content-center mt-1 mt-md-3"},de={class:"col-12 col-xl-11"},ce={class:"card-modern"},me={class:"header-gradient text-white d-flex align-items-center"},_e={class:"header-content"},be={class:"mb-0 opacity-90"},pe={key:0,class:"card-body body-striped d-flex justify-content-center align-items-center",style:{"min-height":"400px"}},ke={key:1,class:"card-body body-striped p-4"},ve={key:0,class:"mb-0 countdown-timer mb-3 d-flex align-items-center"},fe={class:"row equal-height-container g-2"},he={class:"col-lg-3 equal-height-col"},ge={class:"stretch-card"},we={class:"info-card p-3 mb-3"},ye={class:"d-flex align-items-center mb-2"},xe={class:"p-2 rounded-circle me-2"},Ke={key:0,class:"ms-4 ps-3 border-start border-2"},je={class:"mb-1 fw-bold"},Se={key:1,class:"ms-4 ps-3 border-start border-2"},Ie={class:"mb-1 fw-bold"},Te={class:"mb-0 fw-bold"},De={class:"info-card p-3 mb-3"},Ae={class:"d-flex align-items-center mb-2"},Me={class:"p-2 rounded-circle me-2"},Ee={class:"ms-4 ps-3 border-start border-2"},Pe={class:"mb-0 fw-bold"},Le={key:0,class:"text-muted"},Ue={key:0,class:"info-card p-3 mb-3"},ze={class:"ms-4 ps-3 border-start border-2"},Be={class:"mb-0 countdown-timer"},Fe={key:1,class:"info-card p-3 mb-3"},Ne={class:"d-flex align-items-center mb-2"},qe={class:"p-2 rounded-circle me-2"},Ce={class:"ms-4 ps-3 border-start border-2"},He={class:"mb-0 fw-bold"},Re={class:"info-card p-3"},Je={class:"d-flex align-items-center mb-2"},Ve={class:"p-2 rounded-circle me-2"},$e={class:"ms-4 ps-3 border-start border-2"},Oe={class:"mb-0 fw-bold"},Qe={class:"col-lg-6 equal-height-col"},We={class:"stretch-card h-100"},Ge={class:"row h-100 g-2"},Xe={class:"col-md-6 d-flex"},Ye={class:"tips-box p-4 w-100"},Ze={class:"tips-content"},ea={class:"list-unstyled mb-0"},aa={class:"mb-2 d-flex"},sa={class:"text-secondary d-flex align-items-center justify-content-center me-3"},ta=["innerHTML"],ia={class:"col-md-6 d-flex"},na={class:"tips-box p-4 w-100"},la={class:"tips-content"},oa=["innerHTML"],ua={class:"col-lg-3 equal-height-col"},ra={class:"card card-body stretch-card d-flex flex-column h-100"},da={class:"status-section text-center mb-4"},ca={key:0,class:"status-badge bg-opacity-10 text-success d-inline-block mb-3"},ma={key:1,class:"status-badge bg-opacity-10 text-success d-inline-block mb-3"},_a={key:2,class:"status-badge bg-opacity-10 text-danger d-inline-block mb-3"},ba={key:3,class:"status-badge bg-opacity-10 text-warning d-inline-block mb-3"},pa={key:4,class:"text-muted mb-3"},ka={key:5,class:"status-badge bg-info bg-opacity-10 text-info d-inline-block mb-3"},va={key:0,class:"ctext-center col-md-12 d-flex flex-column justify-content-between mb-3"},fa={class:"text-muted fs-6 text-center"},ha={key:0,class:"mb-3"},ga={key:1,class:"mb-3"},wa={class:"camera-section bg-light p-3 rounded-3 mb-4 text-center"},ya={class:"fw-semibold mb-3 d-flex justify-content-center align-items-center"},xa={class:"d-flex flex-column align-items-center mb-3"},Ka={key:0,class:"small text-muted mb-0"},ja={class:"action-buttons mt-auto"},Sa={key:0,disabled:"",class:"w-100 btn btn-secondary btn-modern mb-2 position-relative"},Ia={key:1,disabled:"",class:"w-100 btn btn-secondary btn-modern mb-2 position-relative"},Ta={key:3,class:"w-100 btn btn-secondary btn-modern mb-2",disabled:""},Da={key:0},Aa={key:1},Ha=G({__name:"index",setup(P){le({title:"Kuis"});const{$axiosAuth:k}=X(),I=Y(),L=Z();ee().public.baseLink;const w=I.params.id,U=I.params.user,T=o({waktu_mulai:"",waktu_selesai:""}),g=o({run:!1,mulai:"",selesai:""});o("pilihan_ganda");const K=o({}),v=o(!1),n=o({}),b=o({mulai:!0}),z=o(0),B=o(!1),l=o({pra_mulai:!1,mulai:!1,selesai:!1,tutup:!1}),F=["Pastikan kamera aktif dan diizinkan","Koneksi internet harus stabil","Waktu tidak bisa dihentikan setelah mulai","Jangan keluar dari halaman selama mengerjakan kuis karena aktivitas anda akan direkam oleh sistem","Pastikan Anda telah menyiapkan semua kebutuhan sebelum memulai ujian.","Pastikan baterai device Anda cukup untuk mengikuti seluruh sesi ujian",'Klik <strong> "Mulai Sekarang" </strong> jika sudah siap, Tombol ini hanya akan aktif ketika semua persyaratan telah terpenuhi'];o(["<div>Pilihan ganda</div> baca dengan teliti dan Tekan Tombol pilihan sesuai pilihan yang anda anggap benar. Tunggu sampai tanda tunggu berhenti. jawaban akan disimpan otomatis. <div>uraian</div> Jawab pertanyaan degan teliti. Jawab pertanyaan anda pada kolom yang disediakan. Tunggu tanda tunggu selesai. Jawaban anda akan disimpan "]);async function N(){b.value.mulai=!0;const s=new FormData;s.append("unggahan_id",w);try{let f=(await k({method:"post",url:"/unggahan/kuis/answer/check",data:s})).data;K.value=f;let h=f.data,d=h?.jawab,p=h?.kuis,S=p?.akhir,M=d?.status;n.value=p,v.value=d,M=="tutup"?l.value.tutup=!0:M=="selesai"&&(l.value.selesai=!0),b.value.mulai=!1,z.value=d?.swafoto,T.value=await{waktu_mulai:p.waktu_mulai_iso,waktu_selesai:p.waktu_selesai_iso}}catch(a){console.error(a.response?.data||a.message),b.value.mulai=!1}}async function q(){b.value.mulai=!0;const s=new FormData;s.append("unggahan_id",w),s.append("status","mulai");try{const a=await k({method:"post",url:"/unggahan/kuis/answer/mulai",data:s});if(n.value?.layar_penuh&&document?.documentElement?.requestFullscreen){const f=document.documentElement;f.requestFullscreen?f.requestFullscreen().catch(h=>{console.error("Failed to enter fullscreen:",h)}):console.log("Fullscreen API not supported")}L.push({name:"kuis-answer",params:{user:U,id:w}}),b.value.mulai=!1}catch(a){console.error(a.response?.data||a.message),b.value.mulai=!1}}function C(){const s=g.value.mulai,a=g.value.selesai;l.value={pra_mulai:!1,mulai:!1,selesai:!1,tutup:!1},s!=="00:00:00"?l.value.pra_mulai=!0:a!=="00:00:00"?l.value.mulai=!0:s==="00:00:00"&&a==="00:00:00"&&v.value?l.value.selesai=!0:s==="00:00:00"&&a==="00:00:00"&&!v.value&&(l.value.tutup=!0),s==="00:00:00"&&a==="00:00:00"&&v.value?.status=="mulai"&&(b.value.mulai=!1,B.value=!0)}ae(async()=>{await N(),j()});const H=o(!1),D=o("checking"),_=o("Memeriksa izin kamera..."),y=o("");function A(s){switch(s){case"granted":return"Diizinkan";case"denied":return"Ditolak";case"prompt":return"Menunggu Persetujuan";default:return"Tidak diketahui"}}async function j(){if(navigator.permissions)try{const s=await navigator.permissions.query({name:"camera"});D.value=s.state,_.value=A(s.state),s.onchange=()=>{D.value=s.state,_.value=A(s.state)},H.value=s.state=="granted"}catch{_.value="Browser tidak mendukung pemeriksaan izin kamera."}else _.value="Browser tidak mendukung Permission API."}async function R(){try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(a=>a.stop()),y.value="✅ Izin diberikan",j()}catch(s){y.value=J(s),j()}}function J(s){switch(s.name){case"NotAllowedError":return"❌ Akses kamera ditolak. Silakan izinkan kamera melalui ikon gembok di address bar atau pengaturan browser.";case"NotFoundError":return"❌ Kamera tidak ditemukan. Pastikan perangkat Anda memiliki kamera yang aktif.";case"NotReadableError":return"❌ Kamera tidak bisa digunakan karena sedang dipakai aplikasi lain.";case"OverconstrainedError":return"❌ Kamera yang diminta tidak tersedia. Coba gunakan kamera default.";case"SecurityError":return"❌ Akses kamera hanya bisa digunakan melalui koneksi HTTPS.";default:return"❌ Gagal mengakses kamera: "+s.message}}async function V(s){g.value=s,C()}return(s,a)=>{const f=$,h=O,d=se("font-awesome-icon"),p=Q;return i(),t("div",re,[e("div",de,[u(h,null,{default:x(()=>[u(f,{waktu:T.value,onTime_left:V},null,8,["waktu"])]),_:1}),e("div",ce,[e("div",me,[a[3]||(a[3]=e("div",{class:"icon-wrapper me-3"},null,-1)),e("div",_e,[a[2]||(a[2]=e("h3",{class:"mb-1 fw-bold"},"Siap Menguji Pengetahuanmu?",-1)),e("p",be,[a[1]||(a[1]=r("Kuis: ",-1)),e("strong",null,c(n.value.mata_pelajaran),1)])])]),b.value.mulai?(i(),t("div",pe,[...a[4]||(a[4]=[e("div",{class:"text-center"},[e("div",{class:"spinner-border text-primary",style:{width:"3rem",height:"3rem"},role:"status"}),e("p",{class:"mt-3 text-muted fw-semibold"},"Menyiapkan kuis...")],-1)])])):(i(),t("div",ke,[K.value.message?(i(),t("p",ve,[u(d,{icon:["fas","triangle-exclamation"],class:"text-warning me-2"}),r(" "+c(K.value.message),1)])):m("",!0),e("div",fe,[e("div",he,[e("div",ge,[e("div",we,[e("div",ye,[e("div",xe,[u(d,{icon:["fas","clock"],class:"text-secondary"})]),a[5]||(a[5]=e("div",{class:"h6 mb-0 fw-semibold"},"Waktu Pelaksanaan",-1))]),n.value.mode==="statis"?(i(),t("div",Ke,[a[6]||(a[6]=e("small",{class:"text-muted"},"Dimulai:",-1)),e("p",je,c(n.value.waktu_mulai_formated),1)])):(i(),t("div",Se,[a[7]||(a[7]=e("small",{class:"text-muted"},"Dimulai antara:",-1)),e("p",Ie,c(n.value.waktu_mulai_formated),1),a[8]||(a[8]=e("small",{class:"text-muted"},"sampai dengan",-1)),e("p",Te,c(n.value.waktu_tutup_formated),1)]))]),e("div",De,[e("div",Ae,[e("div",Me,[u(d,{icon:["fas","stopwatch"],class:"text-secondary"})]),a[9]||(a[9]=e("div",{class:"h6 mb-0 fw-semibold"},"Durasi Pengerjaan",-1))]),e("div",Ee,[e("p",Pe,c(n.value.durasi)+" Menit",1),n.value.mode!="statis"?(i(),t("small",Le,"Kuis akan berjalan sampai durasi habis")):m("",!0)])]),n.value.mode==="statis"&&l.value.mulai?(i(),t("div",Ue,[a[10]||(a[10]=e("div",{class:"d-flex align-items-center mb-2"},[e("div",{class:"p-2 rounded-circle me-2"}),e("div",{class:"h6 mb-0 fw-semibold"},"Kuis Telah Berjalan")],-1)),e("div",ze,[e("p",Be,c(g.value.selesai),1)])])):m("",!0),n.value.mode==="statis"?(i(),t("div",Fe,[e("div",Ne,[e("div",qe,[u(d,{icon:["fas","check-circle"],class:"text-secondary"})]),a[11]||(a[11]=e("div",{class:"h6 mb-0 fw-semibold"},"Selesai",-1))]),e("div",Ce,[e("p",He,c(n.value.waktu_selesai_formated),1)])])):m("",!0),e("div",Re,[e("div",Je,[e("div",Ve,[u(d,{icon:["fa","book"],class:"text-secondary"})]),a[12]||(a[12]=e("div",{class:"h6 mb-0 fw-semibold"},"Mata Pelajaran",-1))]),e("div",$e,[e("p",Oe,c(n.value.mata_pelajaran),1)])])])]),e("div",Qe,[e("div",We,[e("div",Ge,[e("div",Xe,[e("div",Ye,[a[13]||(a[13]=e("h5",{class:"fw-bold text-primary mb-3 d-flex align-items-center"},[e("i",{class:"bi bi-info-circle-fill me-2"}),r("Petunjuk Teknis ")],-1)),e("div",Ze,[e("ul",ea,[(i(),t(E,null,te(F,S=>e("li",aa,[e("span",sa,[u(d,{style:{width:"10px !important",height:"auto !important"},class:"fa-x",icon:["fas","circle"]})]),e("span",{innerHTML:S},null,8,ta)])),64))])])])]),e("div",ia,[e("div",na,[a[14]||(a[14]=e("h5",{class:"fw-bold text-primary mb-3 d-flex align-items-center"},[e("i",{class:"bi bi-info-circle-fill me-2"}),r("Petunjuk Kuis ")],-1)),e("div",la,[e("span",{innerHTML:n.value.petunjuk},null,8,oa)])])])])])]),e("div",ua,[e("div",ra,[e("div",da,[v.value?.status=="selesai"?(i(),t("div",ca," KUIS SELESAI DIKERJAKAN ")):l.value.selesai?(i(),t("div",ma," KUIS BERAKHIR ")):l.value.tutup?(i(),t("div",_a," KUIS DITUTUP ")):l.value.mulai&&n.value.mode==="statis"?(i(),t("div",ba," KUIS TELAH DIMULAI ")):l.value.mulai&&n.value.mode==="dinamis"?(i(),t("div",pa)):l.value.pra_mulai?(i(),t("div",ka," KUIS BELUM DIMULAI ")):m("",!0)]),l.value.selesai||v.value?.status=="selesai"?(i(),t("div",va,[e("div",fa,[a[18]||(a[18]=e("div",{class:"mb-3"},[e("h3",null,"Kuis Selesai")],-1)),n.value.nilai?(i(),t("div",ha,[u(p,{to:{name:"kuis-hasil",params:{id:ie(w)}},class:"btn-outline-custom x-100"},{default:x(()=>[...a[15]||(a[15]=[r(" Lihat hasil kuis",-1)])]),_:1},8,["to"])])):(i(),t("div",ga,[...a[16]||(a[16]=[e("strong",null," Nilai belum ditampilkan oleh guru ",-1)])])),e("div",null,[u(p,{to:{name:"home"}},{default:x(()=>[...a[17]||(a[17]=[r("(Kembali kedepan)",-1)])]),_:1})])])])):m("",!0),e("div",wa,[e("h6",ya,[u(d,{icon:["fas","camera"],class:"me-2 text-secondary"}),a[19]||(a[19]=r(" Status Kamera ",-1))]),e("div",xa,[e("span",{class:ne(_.value==="Diizinkan"?"text-success fw-bold mb-2":"text-danger fw-bold mb-2")},[u(d,{icon:["fas",_.value==="Diizinkan"?"check-circle":"exclamation-circle"],class:"me-1"},null,8,["icon"]),r(" "+c(_.value),1)],2),_.value!=="Diizinkan"?(i(),t("button",{key:0,onClick:R,class:"btn btn-sm btn-primary-modern text-white"}," Aktifkan Kamera ")):m("",!0)]),y.value?(i(),t("p",Ka,c(y.value),1)):m("",!0)]),e("div",ja,[v.value?.status=="selesai"?(i(),t("button",Sa,[...a[20]||(a[20]=[e("span",{class:"pulse-animation position-absolute top-0 start-0 w-100 h-100 bg-white opacity-25 rounded-pill"},null,-1),r(" ▶️ Kuis Selesai ",-1)])])):_.value!=="Diizinkan"?(i(),t("button",Ia,[...a[21]||(a[21]=[e("span",{class:"pulse-animation position-absolute top-0 start-0 w-100 h-100 bg-white opacity-25 rounded-pill"},null,-1),r(" ▶️ Mulai Sekarang ",-1),e("small",{class:"d-block mt-1 fw-normal"},"Aktifkan kamera terlebih dahulu",-1)])])):n.value.dimulai===!0||l.value.mulai?(i(),t("button",{key:2,onClick:a[0]||(a[0]=S=>q()),class:"w-100 btn btn-success btn-modern mb-2 pulse-animation"}," ▶️ Mulai Sekarang ")):(i(),t("button",Ta,[r(" ▶️ "+c(g.value.mulai)+" ",1),l.value.tutup?(i(),t("span",Da,"KUIS DITUTUP")):m("",!0),l.value.selesai?(i(),t("span",Aa,"KUIS SELESAI")):m("",!0)])),u(p,{to:{name:"home"},class:"w-100 btn btn-outline-secondary btn-modern"},{default:x(()=>[...a[22]||(a[22]=[r(" Batal ",-1)])]),_:1})])])])])]))])])])}}});export{Ha as default};
