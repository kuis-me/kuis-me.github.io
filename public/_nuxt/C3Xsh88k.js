import{_ as H}from"./BTT6KBUK.js";import{_ as L}from"./QraDVNg7.js";import{f as R,i as K,h as M,j as U,u as q,r as m,s as E,e as P,c as u,o as r,a,l as _,k as p,z as N,t as i,d as y,w as h,b as c,I as b,v as G,m as J,x as O,y as Q,F as X,q as Y}from"#entry";import{_ as j}from"./BbXXgusc.js";import{u as Z}from"./CUA_6ykz.js";import{_ as w}from"./BFU05jqY.js";import{_ as aa}from"./DlAUqK2U.js";const ta={key:0},sa={class:"list-group-item position-relative mb-3"},ea={class:"card shadow-sm"},na={class:"card-body position-relative"},oa={class:"d-flex justify-content-between align-items-start"},la={class:"row align-items-start"},ia={class:"col-auto"},ra=["src"],da={class:"col"},ua={class:"small-custom text-start"},ca={class:"small-custom text-start"},pa={class:"mb-2"},ma={class:"small-custom text-end d-none d-md-block"},_a={class:"mapel-kuis"},va={class:"small-custom d-md-none d-block"},ga={class:"text-center mapel-kuis"},fa={class:"text-center"},ka={class:"row"},ha={class:"col-sm-12 p-2"},xa={class:"notebook position-relative"},ya={class:"d-flex justify-content-between align-items-center mt-3"},ba={class:"d-flex gap-3 flex-wrap text-secondary position-relative"},wa={class:"ms-1"},Ca={class:"ms-1"},$a={class:"ms-1"},Da={key:0,class:"position-absolute top-0 end-0 m-4"},Ba={class:"dropdown"},Sa={role:"button","data-bs-toggle":"dropdown"},ja={key:0,class:"dropdown-menu"},Fa={class:"card comments-card border-0 shadow-sm"},Ia={class:"card-body"},Na={class:"mb-3"},Ta={class:"position-relative"},Va={class:"upload-footer d-flex justify-content-between align-items-center mt-2"},Wa={class:"d-flex gap-2"},za=["disabled"],Aa={class:"comments-list position-relative"},Ha={class:"d-flex"},La={class:"flex-shrink-0 me-3"},Ra=["onClick"],Ka=["src"],Ma={class:"flex-grow-1"},Ua={class:"d-flex justify-content-between align-items-start mb-1"},qa={class:"fw-bold mb-0"},Ea={class:"text-muted"},Pa={class:"dropdown"},Ga={class:"btn btn-link text-muted p-0",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Ja={class:"dropdown-menu dropdown-menu-end"},Oa=["onClick"],Qa={class:"mb-0"},Xa={key:1,class:"list-group-item mb-3"},Ya={class:"card shadow-sm"},Za={class:"card-body position-relative",style:{"min-height":"150px"}},at=R({__name:"[id]",setup(tt){const C=K();Z({title:"Unggahan - "+C.params.user});const T=M();U();const{$axiosAuth:x}=q(),$=m({}),F=C.params.id,D=C.params.user,s=m({profil:{}}),I=m([]),v=m({}),g=m({}),d=m({tanggapan:!0,tanggapan_input:!1});async function B(){d.value.tanggapan=!0;const l=new FormData;l.append("unggahan_id",F),l.append("username",D);try{const o=(await x({method:"post",url:"/unggahan/show",data:l})).data;s.value=o.data,I.value=o.tanggapan,d.value.tanggapan=!1}catch(t){console.error(t.response?.data||t.message),d.value.tanggapan=!1}}async function V(){d.value.tanggapan_input=!0;const l=new FormData;l.append("unggahan_id",F),l.append("username",D);const t=v.value;for(var o in t)l.append(o,t[o]);try{const n=await x({method:"post",url:"/unggahan/tanggapan/store",data:l});$.value=n.data.data,v.value.text="",B(),d.value.tanggapan_input=!1}catch(n){console.error(n.response?.data||n.message),d.value.tanggapan_input=!1}}async function W(l){const t=new FormData;t.append("tanggapan_id",l);try{const o=await x({method:"delete",url:"/unggahan/tanggapan/"+l+"/destroy",data:t});$.value=o.data,console.log($.value),B()}catch(o){console.error(o.response?.data||o.message)}}async function S(l,t,o){let n=s.value;n.loading=!0;const k=new FormData;k.append("unggahan_id",t),k.append("reaksi",o);try{const e=await x({method:"post",url:"/unggahan/reaksi/store",data:k});g.value=e.data,n.tidak_suka_count=g.value.tidak_suka,n.suka_count=g.value.suka,n.reaksi_ku=g.value.reaksi,n.mark=g.value.mark,n.loading=!1,o=="mark"&&T.set("tanda",g.value.mark)}catch(e){console.error(e.response?.data||e.message),n.loading=!1}}const f=m({max_text:200,remaining_text:200});return E(()=>v.value.text,l=>{const t=f.value.max_text||200,o=l?.length||0,n=t-o;o>t&&(v.value.text=l.slice(0,t)),f.value.remaining_text=n>=0?n:0}),P(()=>{B()}),(l,t)=>{const o=H,n=G("font-awesome-icon"),k=L;return r(),u("div",null,[s.value?.profil?.nama_lengkap?(r(),u("div",ta,[a("div",sa,[a("div",ea,[a("div",na,[d.value.tanggapan?(r(),p(w,{key:0,class:"position-center"})):_("",!0),a("div",null,[a("div",oa,[a("div",la,[a("div",ia,[s.value.profil.image_show?(r(),u("img",{key:0,src:s.value.profil.image_show,class:"profil-img avatar-50",onClick:t[0]||(t[0]=e=>l.redirect(s.value.profil.username))},null,8,ra)):(r(),u("div",{key:1,style:N({backgroundColor:s.value.profil.color}),class:"avatar-50 profile-img",onClick:t[1]||(t[1]=e=>l.redirect(s.value.profil.username))},i(s.value.profil.nama_inisial),5))]),a("div",da,[a("div",{class:"fw-bold cursor-pointer",onClick:t[2]||(t[2]=e=>l.redirect(s.value.profil.username))},i(s.value.profil.nama_lengkap),1),a("div",ua," ID: "+i(s.value.id_ref),1),a("div",ca,i(s.value.created_at_for_humans),1)]),t[9]||(t[9]=a("div",{class:"text-muted small"},null,-1))]),t[10]||(t[10]=a("div",{class:"col-sm-6 text-muted small",style:{"margin-top":"-10px","padding-top":"-10px !important"}},null,-1))]),t[14]||(t[14]=a("hr",{class:"my-2"},null,-1)),a("div",pa,[a("div",ma,[a("span",_a,i(s.value.kuis?.mata_pelajaran),1),y(" ⏰ "+i(s.value.kuis?.mulai_formated_2)+" WIB – "+i(s.value.kuis?.tutup_formated_2)+" WIB ",1)]),a("div",va,[a("div",ga,i(s.value.kuis?.mata_pelajaran),1),a("div",fa," ⏰ "+i(s.value.kuis?.mulai_formated_2)+" WIB – "+i(s.value.kuis?.tutup_formated_2)+" WIB ",1)]),a("div",ka,[a("div",ha,[a("div",xa,[a("div",null,i(s.value.text||""),1)])])])]),a("div",ya,[a("div",null,[a("div",null,[s.value?.kuis?.status_aksi=="tutup"?(r(),p(o,{key:0,to:`/${s.value.profil.username}/unggahan/kuis/${s.value.id}`,class:"btn-outline-custom",style:{gap:"0.5rem"}},{default:h(()=>[...t[11]||(t[11]=[a("img",{src:j,width:"20",height:"20"},null,-1),a("span",null," Tutup",-1)])]),_:1},8,["to"])):s.value?.kuis?.status_aksi=="berlangsung"?(r(),p(o,{key:1,to:`/${s.value.profil.username}/unggahan/kuis/${s.value.id}`,class:"btn-outline-custom",style:{gap:"0.5rem"}},{default:h(()=>[...t[12]||(t[12]=[a("img",{src:j,width:"20",height:"20"},null,-1),a("span",null," Berlangsung",-1)])]),_:1},8,["to"])):(r(),p(o,{key:2,to:`/${s.value.profil.username}/unggahan/kuis/${s.value.id}`,class:"btn-outline-custom",style:{gap:"0.5rem"}},{default:h(()=>[...t[13]||(t[13]=[a("img",{src:j,width:"20",height:"20"},null,-1),a("span",null," Belum dimulai",-1)])]),_:1},8,["to"]))])]),a("div",ba,[a("button",{class:"btn p-0 text-secondary",onClick:t[3]||(t[3]=e=>S(null,s.value.id,"suka")),title:"Suka"},[c(n,{icon:["fas","heart"],class:b({"text-danger":s.value.reaksi_ku==="suka"})},null,8,["class"]),a("span",wa,i(s.value.suka_count),1)]),a("button",{class:"btn p-0 text-secondary",onClick:t[4]||(t[4]=e=>S(null,s.value.id,"tidak suka")),title:"Tidak Suka"},[c(n,{icon:["fas","heart-crack"],class:b({"text-danger":s.value.reaksi_ku==="tidak suka"})},null,8,["class"]),a("span",Ca,i(s.value.tidak_suka_count),1)]),a("button",{class:"btn p-0 text-secondary",onClick:t[5]||(t[5]=e=>S(null,s.value.id,"mark")),title:"Favorit"},[c(n,{icon:["fas","bookmark"],class:b({"text-danger":s.value.mark})},null,8,["class"])]),c(o,{to:{name:"tanggapan",params:{user:s.value.profil.username,id:s.value.id}},class:"text-secondary text-decoration-none small",title:"Komentar"},{default:h(()=>[c(n,{icon:["fas","comments"]}),a("span",$a,i(s.value.tanggapan_all_count??0),1)]),_:1},8,["to"]),s.value.loading?(r(),p(k,{key:0,class:"position-center"})):_("",!0)])])])]),J(D)?_("",!0):(r(),u("div",Da,[a("div",Ba,[a("a",Sa,[c(n,{icon:["fas","ellipsis-vertical"],class:"text-secondary"})]),s.value.miliku?(r(),u("ul",ja,[a("li",null,[c(o,{to:{name:"kuis-laporan",params:{id:s.value.id}},class:"dropdown-item"},{default:h(()=>[...t[15]||(t[15]=[y(" Laporan",-1)])]),_:1},8,["to"])]),a("li",null,[a("a",{href:"#",class:"dropdown-item text-danger",onClick:t[6]||(t[6]=e=>l.unggahanDelete(s.value.id))},"Hapus")])])):_("",!0)])]))])]),a("div",Fa,[a("div",Ia,[a("div",Na,[a("div",Ta,[O(a("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>v.value.text=e),class:"upload-textarea",rows:"3",placeholder:"Apa tanggapan anda?"},null,512),[[Q,v.value.text]]),d.value.tanggapan_input?(r(),p(w,{key:0,class:"spinner-overlay"})):_("",!0)]),a("div",Va,[a("small",{class:b(["char-counter",{warning:f.value.remaining_text<20}])},i(f.value.max_text-f.value.remaining_text)+"/"+i(f.value.max_text),3),a("div",Wa,[a("button",{type:"button",class:"upload-btn btn-send",disabled:d.value.tanggapan_input,onClick:t[8]||(t[8]=e=>V())},[c(n,{icon:["fas","plus"],class:"me-1"}),t[16]||(t[16]=y(" Kirim ",-1))],8,za)])])]),a("div",Aa,[(r(!0),u(X,null,Y(I.value,(e,z)=>(r(),u("div",{key:z,class:"comment-item mb-3"},[a("div",Ha,[a("div",La,[a("div",{class:"profile-picture-container cursor-pointer",onClick:A=>l.redirect(e.profil.username)},[e.profil.image_show?(r(),u("img",{key:0,src:e.profil.image_show,class:"rounded-circle object-fit-cover",width:"40",height:"40",alt:"Profile picture"},null,8,Ka)):(r(),u("div",{key:1,class:"rounded-circle d-flex align-items-center justify-content-center",style:N({backgroundColor:e.profil.color,width:"40px",height:"40px",color:"white",fontWeight:"bold"})},i(e.profil.nama_inisial),5))],8,Ra)]),a("div",Ma,[a("div",Ua,[a("div",null,[a("h6",qa,i(e.profil.nama_lengkap),1),a("small",Ea,i(e.created_at_for_humans),1)]),a("div",Pa,[a("button",Ga,[c(n,{icon:["fas","fa-ellipsis-v"]})]),a("ul",Ja,[a("li",null,[a("button",{class:"dropdown-item text-danger",onClick:A=>W(e.id)},[...t[17]||(t[17]=[a("i",{class:"fas fa-trash me-2"},null,-1),y("Hapus ",-1)])],8,Oa)])])])]),a("p",Qa,i(e.text||""),1)])])]))),128)),d.value.tanggapan?(r(),p(w,{key:0,class:"position-center"})):_("",!0)])])])])):(r(),u("div",Xa,[a("div",Ya,[a("div",Za,[d.value.tanggapan?(r(),p(w,{key:0,class:"position-center"})):_("",!0),t[18]||(t[18]=a("div",{class:"position-center"}," Tidak ada data atau sedang diarsipkan ",-1))])])]))])}}}),dt=aa(at,[["__scopeId","data-v-34df7f47"]]);export{dt as default};
