import{_ as Z}from"./BwT3rymJ.js";import{_ as ee}from"./DTCu01cd.js";import{Q as ae}from"./Cc79cNwZ.js";import{f as te,A as se,h as ne,j as le,i as oe,u as ue,r as k,S as F,e as re,s as M,ak as ie,c as d,o as u,a,k as I,l as v,F as S,q as C,b as m,w as y,x as b,y as P,a9 as de,aj as J,v as U,I as W,d as _,L as me,m as pe,n as ce,t as A}from"#entry";import{_ as j}from"./BFU05jqY.js";const ve={class:"pengaturan"},ge={class:"position-relative"},fe={class:"row"},ke={class:"col-md-5"},be={class:"card card-body mb-3"},_e={class:"mb-3"},we={class:"input-group position-relative"},ye=["value","textContent"],he={class:"mt-1"},xe={class:"d-flex flex-wrap gap-2"},Ie=["onClick"],Se={class:"card card-body mb-3"},Ce={class:"mb-3"},Ae={class:"card card-body mb-3"},je={class:"d-flex justify-content-between align-items-center form-check form-switch m-0 p-0"},Ve={class:"card card-body mb-3"},Ne={class:"mb-3"},Pe={class:"card card-body mb-3"},Te={class:"mb-3"},De={class:"position-relative"},Le={class:"mb-3"},Re={class:"input-group"},Fe={class:"mb-3"},Me={class:"input-group"},Ue={key:0,class:"mb-3"},Ke={class:"position-relative"},Be={key:1,class:"mb-3"},Oe={class:"position-relative"},$e={class:"col-md-7"},Je={class:"card card-body mb-3"},We={class:"mb-3"},Ee={class:"position-relative"},He={key:0,class:"mt-1"},qe={key:1,class:"mt-1"},Qe={class:"mb-3"},Ye={class:"position-relative"},ze={key:0,class:"mt-1"},Ge={key:1,class:"mt-1"},Xe={class:"text-end mt-2"},Ze={class:"btn-group position-relative me-3"},ea={class:"dropdown-menu dropdown-menu-end mt-2 dropdown-custom","data-bs-auto-close":"outside"},aa={class:"p-3"},ta={class:"menu-list"},sa={class:"table table-sm table-bordered table-striped table-hover align-middle"},na={class:"text-center"},la={style:{"white-space":"pre-wrap"}},oa={class:"card card-body"},ua={key:1,class:"modal-footer"},ra={key:2,class:"modal-footer"},ia=te({__name:"pengaturan",props:{data:{type:Object,required:!1,default:()=>({})}},setup(E){const K=E,T=se();ne(),le();const H=oe(),{$axiosAuth:h}=ue(),w=H.params.id,l=k({pg_rumus:!1,ur_rumus:!1,show:!1,waktu_selesai:!1,kategori:!1}),q=new Date().toISOString().slice(0,16),D=k({});k([]);const t=k({kategori:[],waktu_mulai:q,layar_penuh:!0,durasi:120,mode:"dinamis",waktu_selesai:"",waktu_tutup:"",swafoto_aksi:"random",pg_rumus:"(NILAI/NILAI_MAKS)*60",ur_rumus:"(NILAI/NILAI_MAKS)*40",petunjuk:"<div><b>Pilihan Ganda</b></div> baca dengan teliti dan tekan tombol pilihan sesuai pilihan yang Anda anggap benar. Tunggu sampai tanda tunggu berhenti, jawaban akan disimpan otomatis. <div><b>Uraian</b></div> Jawab pertanyaan dengan teliti. Jawab pertanyaan Anda pada kolom yang disediakan. Tunggu tanda tunggu selesai, jawaban Anda akan disimpan otomatis."}),Q=k([{nama:"NILAI",keterangan:"Skor didapat"},{nama:"NILAI_MAKS",keterangan:"Skor Maksimal"},{nama:"+",keterangan:"Tambah"},{nama:"-",keterangan:"Kurang"},{nama:"/",keterangan:"Bagi"},{nama:"*",keterangan:"Kali"},{nama:"sqrt(NILAI, 1/2)	",keterangan:"Akar 2"},{nama:"pow(NILAI, 2)	",keterangan:"Pangkat 2"}]),L=F.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:n=>{n.onmouseenter=F.stopTimer,n.onmouseleave=F.resumeTimer}}),p=k({});async function Y(n,e){V(t.value.pg_rumus,"pilihan_ganda"),V(t.value.ur_rumus,"uraian")}async function V(n,e){e=="pilihan_ganda"?l.value.pg_rumus=!0:l.value.ur_rumus=!0;const r=new FormData;r.append("rumus",n);try{let i=(await h({method:"post",url:"/rumus-tes",data:r})).data;return e=="pilihan_ganda"?(p.value.pg_rumus=i.status,l.value.pg_rumus=!1):(p.value.ur_rumus=i.status,l.value.ur_rumus=!1),i.status}catch(o){console.error(o.response?.data||o.message),l.value.pg_rumus=!1,l.value.ur_rumus=!1}}const R=k([]);async function z(){l.value.kategori=!0;try{let n=await h({method:"post",url:"/other/group"});R.value=n?.data?.data?.kategori,l.value.kategori=!1}catch(n){console.error(n.response?.data||n.message),l.value.kategori=!1}}async function G(n){const e=n.target.value,r=R.value.find(o=>o?.id===e);r&&!t.value.kategori.some(o=>o?.id===r?.id)&&t.value.kategori.push(r),n.target.value=""}async function X(n){const e=t.value.kategori.indexOf(n);e!==-1&&await t.value.kategori.splice(e,1)}async function B(n){l.value.show=!0,T.start();const e=new FormData;e.append("unggahan_id",n);try{let o=(await h({method:"post",url:"/unggahan/kuis/pengaturan/show",data:e})).data,i=o?.data;o?.status==!0?(i.petunjuk||(i.petunjuk=t.value.petunjuk),t.value=i):t.value={},l.value.show=!1,T.finish()}catch(r){console.error(r.response?.data||r.message),l.value.show=!1,T.finish()}}async function O(){l.value.show=!0,D.value={};let n=t.value.pg_rumus;if(n=await V(n,"pilihan_ganda"),n!=!0){l.value.show=!1;return}let e=t.value.ur_rumus;if(e=await V(e,"uraian"),e!=!0){l.value.show=!1;return}const r=new FormData,o=t.value;for(var i in o)if(i=="kategori"){var f=o[i];r.append(i,JSON.stringify(f))}else r.append(i,o[i]);w?r.append("unggahan_id",w):r.append("unggahan_id",K.data.id);try{let c=await h({method:"post",url:"/unggahan/kuis/pengaturan",data:r});l.value.show=!1;let x=c.data;if(console.log(x),x.status!=!0){D.value=x.errors,L.fire({icon:"error",title:"belum disimpan, periksa isian anda"});return}L.fire({icon:"success",title:"Tersimpan"}),w?ce({name:"home"}):document.getElementById("btn_close")?.click()}catch(c){L.fire({icon:"error",title:"belum disimpan, periksa isian anda"}),console.error(c.response?.data||c.message),l.value.show=!1}}re(async()=>{w&&await B(w)});async function N(){if(!t.value.waktu_mulai)return;let n=t.value.mode,e,r;n=="statis"?(l.value.waktu_selesai=!0,e=t.value.durasi,r="waktu_selesai"):(l.value.waktu_selesai=!0,e=30,r="waktu_tutup");const o=new FormData;o.append("waktu_mulai",t.value.waktu_mulai),o.append("durasi",e);try{const i=await h({method:"post",url:"/tambah-menit",data:o});t.value[r]=await i.data.waktu_selesai,l.value.waktu_selesai=!1}catch(i){console.error(i.response?.data||i.message),l.value.waktu_selesai=!1}}return M(ie(K,"data"),async(n,e)=>{JSON.stringify(n)!==JSON.stringify(e)&&n?.id&&await B(n.id)},{deep:!0}),M(()=>t.value.durasi,async(n,e)=>{n!==e&&await N()}),M(()=>t.value.waktu_mulai,async(n,e)=>{n!==e&&await N()}),(n,e)=>{const r=Z,o=U("font-awesome-icon"),i=U("FlatPickr"),f=ee,c=U("FontAwesomeIcon"),x=ae;return u(),d("div",ve,[a("div",ge,[(u(!0),d(S,null,C(D.value,(s,g)=>(u(),d("div",{key:g},[(u(!0),d(S,null,C(s,($,ma)=>(u(),d("p",{key:g,class:"text-danger"},A($),1))),128))]))),128)),a("form",null,[a("div",fe,[a("div",ke,[a("div",be,[e[21]||(e[21]=a("strong",null,[a("label",{class:"form-label"},"Dibagikan kepada kategori")],-1)),a("div",_e,[a("div",we,[a("select",{class:"form-select",onChange:e[0]||(e[0]=s=>G(s)),onFocus:e[1]||(e[1]=s=>z())},[e[19]||(e[19]=a("option",{value:""},null,-1)),(u(!0),d(S,null,C(R.value,(s,g)=>(u(),d("option",{key:g,value:s.id,textContent:A(s.text)},null,8,ye))),128))],32),m(r,{class:"btn btn-light border border-1",to:{name:"home-setting"}},{default:y(()=>[...e[20]||(e[20]=[_("+ K",-1)])]),_:1}),l.value.kategori?(u(),I(j,{key:0,class:"position-center"})):v("",!0)]),a("div",he,[a("div",xe,[(u(!0),d(S,null,C(t.value.kategori,(s,g)=>(u(),d("span",{key:g,class:"border border-1 border-secondary rounded d-inline-flex align-items-center px-2 py-1",style:{"font-size":"0.875rem","line-height":"1"}},[_(A(s.text)+" ",1),a("button",{type:"button",class:"btn btn-sm btn-light ms-2 p-0 d-flex align-items-center justify-content-center",style:{width:"20px",height:"20px"},onClick:$=>X(s)},[m(o,{icon:["fas","circle-xmark"],class:"text-secondary"})],8,Ie)]))),128))])])])]),a("div",Se,[a("div",Ce,[e[22]||(e[22]=a("strong",null,[a("label",{class:"form-label"},"Mata Pelajaran")],-1)),b(a("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.mata_pelajaran=s),type:"text",class:"form-control"},null,512),[[P,t.value.mata_pelajaran]])])]),a("div",Ae,[a("div",je,[e[23]||(e[23]=a("label",{class:"form-check-label m-0",for:"flexSwitchCheckChecked"},[a("strong",null," Layar penuh ")],-1)),b(a("input",{class:"form-check-input m-0","onUpdate:modelValue":e[3]||(e[3]=s=>t.value.layar_penuh=s),type:"checkbox",id:"flexSwitchCheckChecked",checked:""},null,512),[[de,t.value.layar_penuh]])])]),a("div",Ve,[a("div",Ne,[e[25]||(e[25]=a("strong",null,[a("label",{class:"form-label"},"Swafoto")],-1)),b(a("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>t.value.swafoto_aksi=s),class:"form-control"},[...e[24]||(e[24]=[a("option",{value:"off"},"Mati",-1),a("option",{value:"random"},"Random",-1),a("option",{value:"interval",disabled:""},"Interval 10 menit",-1)])],512),[[J,t.value.swafoto_aksi]])])]),a("div",Pe,[e[33]||(e[33]=a("strong",null,[a("label",{class:"form-label"},"Aktifasi")],-1)),a("div",Te,[e[26]||(e[26]=a("label",{class:"form-label"},"Waktu Mulai",-1)),a("div",De,[m(f,null,{default:y(()=>[m(i,{ref:"pickerRef",modelValue:t.value.waktu_mulai,"onUpdate:modelValue":e[5]||(e[5]=s=>t.value.waktu_mulai=s),onOnChange:e[6]||(e[6]=s=>N()),config:{enableTime:!0,time_24hr:!0,dateFormat:"Y-m-d H:i:S"},placeholder:"Pilih tanggal & waktu",class:"form-control"},null,8,["modelValue"])]),_:1}),m(c,{icon:["far","calendar"],class:"right-center",style:{"pointer-events":"none"}})])]),a("div",Le,[e[28]||(e[28]=a("label",{class:"form-label"},"Durasi",-1)),a("div",Re,[b(a("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>t.value.durasi=s),type:"number",class:"form-control"},null,512),[[P,t.value.durasi]]),e[27]||(e[27]=a("span",{class:"input-group-text"},"menit",-1))])]),a("div",Fe,[e[30]||(e[30]=a("label",{class:"form-label"},"Mode",-1)),a("div",Me,[b(a("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>t.value.mode=s),onChange:e[9]||(e[9]=s=>N()),class:"form-control"},[...e[29]||(e[29]=[a("option",{value:"statis"},'Waktu mengikuti "waktu selesai"',-1),a("option",{value:"dinamis"},"Waktu mengikuti durasi",-1)])],544),[[J,t.value.mode]])])]),t.value.mode=="statis"?(u(),d("div",Ue,[e[31]||(e[31]=a("label",{class:"form-label"},"Waktu selesai",-1)),a("div",Ke,[m(f,null,{default:y(()=>[m(i,{modelValue:t.value.waktu_selesai,"onUpdate:modelValue":e[10]||(e[10]=s=>t.value.waktu_selesai=s),config:{enableTime:!0,time_24hr:!0,dateFormat:"Y-m-d H:i:S"},disabled:"",placeholder:"Pilih tanggal & waktu",class:"form-control"},null,8,["modelValue"])]),_:1}),m(c,{class:"right-center",icon:["far","calendar"]}),l.value.waktu_selesai?(u(),I(j,{key:0,class:"position-center"})):v("",!0)])])):(u(),d("div",Be,[e[32]||(e[32]=a("label",{class:"form-label"},"Waktu ditutup",-1)),a("div",Oe,[m(f,null,{default:y(()=>[m(i,{modelValue:t.value.waktu_tutup,"onUpdate:modelValue":e[11]||(e[11]=s=>t.value.waktu_tutup=s),config:{enableTime:!0,time_24hr:!0,dateFormat:"Y-m-d H:i:S"},placeholder:"Pilih tanggal & waktu",class:"form-control"},null,8,["modelValue"])]),_:1}),m(c,{icon:["far","calendar"],class:"right-center",style:{"pointer-events":"none"}})])]))])]),a("div",$e,[a("div",Je,[e[43]||(e[43]=a("strong",null,[a("label",{class:"form-label"},"Rumus Penilaian ")],-1)),e[44]||(e[44]=a("strong",null,[a("label",{class:"form-label"},"(hasil pilihan ganda + hasil uraian)")],-1)),a("div",null,[a("div",We,[a("div",null,[e[34]||(e[34]=a("label",{class:"form-label"},"Pilihan Ganda",-1)),a("div",Ee,[b(a("textarea",{"onUpdate:modelValue":e[12]||(e[12]=s=>t.value.pg_rumus=s),class:W(["form-control",p.value.pg_rumus===!0?"border-success":p.value.pg_rumus===!1?"border-danger":""]),style:{"font-style":"italic"},rows:"3",placeholder:"Contoh: (NILAI * 2) + 5"},null,2),[[P,t.value.pg_rumus]]),l.value.pg_rumus?(u(),I(j,{key:0,class:"position-center"})):v("",!0)])]),p.value.pg_rumus===!0?(u(),d("div",He,[m(o,{icon:["fas","circle-check"],class:"text-success me-1"}),e[35]||(e[35]=_(" Rumus dapat digunakan ",-1))])):v("",!0),p.value.pg_rumus===!1?(u(),d("div",qe,[m(o,{icon:["fas","circle-xmark"],class:"text-danger me-1"}),e[36]||(e[36]=_(" Rumus tidak dapat dugunakan ",-1))])):v("",!0)]),a("div",Qe,[a("div",null,[e[37]||(e[37]=a("label",{class:"form-label"},"Uraian",-1)),a("div",Ye,[b(a("textarea",{"onUpdate:modelValue":e[13]||(e[13]=s=>t.value.ur_rumus=s),class:W(["form-control",p.value.ur_rumus===!0?"border-success":p.value.ur_rumus===!1?"border-danger":""]),style:{"font-style":"italic"},rows:"3",placeholder:"Contoh: (NILAI * 2) + 5"},null,2),[[P,t.value.ur_rumus]]),l.value.ur_rumus?(u(),I(j,{key:0,class:"position-center"})):v("",!0)])]),p.value.ur_rumus===!0?(u(),d("div",ze,[m(o,{icon:["fas","circle-check"],class:"text-success me-1"}),e[38]||(e[38]=_(" Rumus dapat digunakan ",-1))])):v("",!0),p.value.ur_rumus===!1?(u(),d("div",Ge,[m(o,{icon:["fas","circle-xmark"],class:"text-danger me-1"}),e[39]||(e[39]=_(" Rumus tidak dapat dugunakan ",-1))])):v("",!0)]),a("div",Xe,[a("div",Ze,[e[42]||(e[42]=a("button",{class:"btn btn-sm btn-outline-success mr-3","data-bs-toggle":"dropdown","aria-expanded":"false"},"Petunjuk rumus ",-1)),a("div",ea,[a("div",{onClick:e[14]||(e[14]=me(()=>{},["stop"]))},[a("div",aa,[a("div",ta,[e[41]||(e[41]=a("strong",{class:"mb-2"},"Petunjuk Penerapan Rumus",-1)),a("table",sa,[e[40]||(e[40]=a("thead",{class:"table-light text-center"},[a("tr",null,[a("th",{style:{width:"200px"}},"Simbol"),a("th",null,"Keterangan")])],-1)),a("tbody",null,[(u(!0),d(S,null,C(Q.value,(s,g)=>(u(),d("tr",{key:g},[a("td",na,A(s.nama),1),a("td",la,A(s.keterangan),1)]))),128))])])])])])])]),a("button",{type:"button",class:"btn btn-sm btn-outline-success mr-3",onClick:e[15]||(e[15]=s=>Y())},"Tes Rumus")])])]),a("div",oa,[e[45]||(e[45]=a("strong",null,[a("label",{class:"form-label"},"Petunjuk")],-1)),m(f,null,{default:y(()=>[m(x,{modelValue:t.value.petunjuk,"onUpdate:modelValue":e[16]||(e[16]=s=>t.value.petunjuk=s),style:{minHeight:"250px",backgroundColor:"white"}},null,8,["modelValue"])]),_:1})])])])]),l.value.show?(u(),I(j,{key:0,class:"position-center"})):v("",!0),pe(w)?(u(),d("div",ua,[m(r,{to:{name:"home"},class:"btn btn-outline-secondary m-2"},{default:y(()=>[...e[46]||(e[46]=[_("Tutup",-1)])]),_:1}),a("button",{type:"button",class:"btn btn-primary m-2",onClick:e[17]||(e[17]=s=>O())},"Simpan")])):(u(),d("div",ra,[e[47]||(e[47]=a("button",{type:"button",id:"btn_close",class:"btn btn-outline-secondary m-2","data-bs-dismiss":"modal"},"Tutup",-1)),a("button",{type:"button",class:"btn btn-primary m-2",onClick:e[18]||(e[18]=s=>O())},"Simpan")]))])])}}}),ka=Object.assign(ia,{__name:"KuisPengaturan"});export{ka as P};
